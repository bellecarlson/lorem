!function(t){var e,i=t.babelHelpers={};i.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i.jsx=(e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,i,o,n){var a=t&&t.defaultProps,r=arguments.length-3;if(i||0===r||(i={}),i&&a)for(var s in a)void 0===i[s]&&(i[s]=a[s]);else i||(i=a||{});if(1===r)i.children=n;else if(r>1){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+3];i.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:i,_owner:null}}),i.asyncIterator=function(t){if("function"==typeof Symbol){if(Symbol.asyncIterator){var e=t[Symbol.asyncIterator];if(null!=e)return e.call(t)}if(Symbol.iterator)return t[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},i.asyncGenerator=function(){function t(t){this.value=t}function e(e){function i(n,a){try{var r=e[n](a),s=r.value;s instanceof t?Promise.resolve(s.value).then(function(t){i("next",t)},function(t){i("throw",t)}):o(r.done?"return":"normal",r.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?i(n.key,n.arg):a=null}var n,a;this._invoke=function(t,e){return new Promise(function(o,r){var s={key:t,arg:e,resolve:o,reject:r,next:null};a?a=a.next=s:(n=a=s,i(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),i.asyncGeneratorDelegate=function(t,e){function i(i,o){return n=!0,o=new Promise(function(e){e(t[i](o))}),{done:!1,value:e(o)}}var o={},n=!1;return"function"==typeof Symbol&&Symbol.iterator&&(o[Symbol.iterator]=function(){return this}),o.next=function(t){return n?(n=!1,t):i("next",t)},"function"==typeof t.throw&&(o.throw=function(t){if(n)throw n=!1,t;return i("throw",t)}),"function"==typeof t.return&&(o.return=function(t){return i("return",t)}),o},i.asyncToGenerator=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function o(n,a){try{var r=e[n](a),s=r.value}catch(t){return void i(t)}return r.done?void t(s):Promise.resolve(s).then(function(t){o("next",t)},function(t){o("throw",t)})}("next")})}},i.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i.createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),i.defineEnumerableProperties=function(t,e){for(var i in e){var o=e[i];o.configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i,o)}return t},i.defaults=function(t,e){for(var i=Object.getOwnPropertyNames(e),o=0;o<i.length;o++){var n=i[o],a=Object.getOwnPropertyDescriptor(e,n);a&&a.configurable&&void 0===t[n]&&Object.defineProperty(t,n,a)}return t},i.defineProperty=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},i.extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},i.get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,o)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(o):void 0},i.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},i.instanceof=function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e},i.interopRequireDefault=function(t){return t&&t.__esModule?t:{default:t}},i.interopRequireWildcard=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},i.newArrowCheck=function(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")},i.objectDestructuringEmpty=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")},i.objectWithoutProperties=function(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i},i.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},i.selfGlobal=void 0===t?self:t,i.set=function t(e,i,o,n){var a=Object.getOwnPropertyDescriptor(e,i);if(void 0===a){var r=Object.getPrototypeOf(e);null!==r&&t(r,i,o,n)}else if("value"in a&&a.writable)a.value=o;else{var s=a.set;void 0!==s&&s.call(n,o)}return o},i.slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,n=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(o=(r=s.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){n=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i.slicedToArrayLoose=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var i,o=[],n=t[Symbol.iterator]();!(i=n.next()).done&&(o.push(i.value),!e||o.length!==e););return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i.taggedTemplateLiteral=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},i.taggedTemplateLiteralLoose=function(t,e){return t.raw=e,t},i.temporalRef=function(t,e,i){if(t===i)throw new ReferenceError(e+" is not defined - temporal dead zone");return t},i.temporalUndefined={},i.toArray=function(t){return Array.isArray(t)?t:Array.from(t)},i.toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}}("undefined"==typeof global?self:global);try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),!0!==ce.defaultPrevented)throw Error("Could not prevent default")}catch(t){var CustomEvent=function(t,e){var i,o;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},(i=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o=i.preventDefault,i.preventDefault=function(){o.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},i};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}"undefined"!=typeof window&&function(t){"use strict";if(window.DOMTokenList){var e=document.createElement("a").classList,i=DOMTokenList.prototype,o=i.add,n=i.remove,a=i.toggle;e.add("c1","c2");var r=function(t){return function(){var e,i=arguments;for(e=0;e<i.length;e+=1)t.call(this,i[e])}};e.contains("c2")||(i.add=r(o),i.remove=r(n)),e.toggle("c1",!0)||(i.toggle=function(t,e){return void 0===e?a.call(this,t):((e?o:n).call(this,t),!!e)})}}(),"undefined"!=typeof window&&function(t){"use strict";var e=[],i=function(t,i){var o;if(e.indexOf)return e.indexOf.call(t,i);for(o=0;o<t.length;o++)if(t[o]===i)return o;return-1},o=function(t){if(""===t||/[\u0009\u000A\u000C\u000D\u0020]/.test(t))throw new Error("Token must not be empty or contain whitespace.")},n=function(t,e){var i,o=[];if(t&&e&&(this.element=t,this.prop=e,t[e]))for(o=t[e].replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<o.length;i++)this[i]=o[i];this.length=o.length};n.prototype={add:function(){var t,i=this,n=arguments;for(t=0;t<n.length;t++)o(n[t]),i.contains(n[t])||e.push.call(i,n[t]);i.element&&(i.element[i.prop]=i)},contains:function(t){return o(t),-1!==i(this,t)},item:function(t){return this[t]||null},remove:function(){var t,n,a=arguments,r=this;for(n=0;n<a.length;n++)o(a[n]),-1!==(t=i(r,a[n]))&&e.splice.call(r,t,1);r.element&&(r.element[r.prop]=r)},toggle:function(t,e){return this.contains(t)?!!e||(this.remove(t),!1):!1!==e&&(this.add(t),!0)},toString:function(){return e.join.call(this," ")}},t.DOMTokenList=n}(window),"undefined"!=typeof window&&function(){"use strict";"classList"in document.createElement("a")||Object.defineProperty(Element.prototype,"classList",{get:function(){return new DOMTokenList(this,"className")}})}(),"undefined"!=typeof window&&function(){"use strict";if(!("relList"in document.createElement("a"))){var t,e=[HTMLAnchorElement,HTMLAreaElement,HTMLLinkElement],i=function(){return new DOMTokenList(this,"rel")};for(t=0;t<e.length;t++)Object.defineProperty(e[t].prototype,"relList",{get:i})}}(),"undefined"!=typeof window&&function(){"use strict";"undefined"!=typeof SVGElement&&("classList"in document.createElementNS("http://www.w3.org/2000/svg","svg")&&!window.QUnit||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return"string"==typeof this.className?new DOMTokenList(this,"className"):"string"==typeof this.className.baseVal?new DOMTokenList(this.className,"baseVal"):void 0}}))}(),function(t,e){t.ES6Promise||(t.ES6Promise=function(){"use strict";function t(t){return"function"==typeof t}function e(){var t=setTimeout;return function(){return t(i,1)}}function i(){for(var t=0;t<_;t+=2){var e=b[t],i=b[t+1];e(i),b[t]=void 0,b[t+1]=void 0}_=0}function o(t,e){var i=arguments,o=this,n=new this.constructor(a);void 0===n[O]&&g(n);var r,s=o._state;return s?(r=i[s-1],N(function(){return m(s,n,r,o._result)})):p(o,n,t,e),n}function n(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(a);return l(e,t),e}function a(){}function r(t){try{return t.then}catch(t){return G.error=t,G}}function s(e,i,a){var r,s,c,h;i.constructor===e.constructor&&a===o&&i.constructor.resolve===n?(c=e,(h=i)._state===H?d(c,h._result):h._state===U?u(c,h._result):p(h,void 0,function(t){return l(c,t)},function(t){return u(c,t)})):a===G?u(e,G.error):void 0===a?d(e,i):t(a)?(r=i,s=a,N(function(t){var e=!1,i=function(t,e,i,o){try{t.call(e,i,o)}catch(t){return t}}(s,r,function(i){e||(e=!0,r!==i?l(t,i):d(t,i))},function(i){e||(e=!0,u(t,i))},t._label);!e&&i&&(e=!0,u(t,i))},e)):d(e,i)}function l(t,e){var i;t===e?u(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(i=e)||"object"==typeof i&&null!==i?s(t,e,r(e)):d(t,e)}function c(t){t._onerror&&t._onerror(t._result),h(t)}function d(t,e){t._state===w&&(t._result=e,t._state=H,0!==t._subscribers.length&&N(h,t))}function u(t,e){t._state===w&&(t._state=U,t._result=e,N(c,t))}function p(t,e,i,o){var n=t._subscribers,a=n.length;t._onerror=null,n[a]=e,n[a+H]=i,n[a+U]=o,0===a&&t._state&&N(h,t)}function h(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var o=void 0,n=void 0,a=t._result,r=0;r<e.length;r+=3)o=e[r],n=e[r+i],o?m(i,o,n,a):n(a);t._subscribers.length=0}}function y(){this.error=null}function m(e,i,o,n){var a=t(o),r=void 0,s=void 0,c=void 0,p=void 0;if(a){if((r=function(t,e){try{return t(e)}catch(t){return V.error=t,V}}(o,n))===V?(p=!0,s=r.error,r=null):c=!0,i===r)return void u(i,new TypeError("A promises callback cannot return that same promise."))}else r=n,c=!0;i._state!==w||(a&&c?l(i,r):p?u(i,s):e===H?d(i,r):e===U&&u(i,r))}function g(t){t[O]=F++,t._state=void 0,t._result=void 0,t._subscribers=[]}function f(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[O]||g(this.promise),P(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&d(this.promise,this._result))):u(this.promise,new Error("Array Methods must be provided an Array"))}function C(t){this[O]=F++,this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof C?function(t,e){try{e(function(e){l(t,e)},function(e){u(t,e)})}catch(e){u(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var P=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_=0,A=void 0,E=void 0,N=function(t,e){b[_]=t,b[_+1]=e,2===(_+=2)&&(E?E(i):I())},v="undefined"!=typeof window?window:void 0,M=v||{},S=M.MutationObserver||M.WebKitMutationObserver,T="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,b=new Array(1e3),I=void 0;I=T?function(){return process.nextTick(i)}:S?(D=0,k=new S(i),R=document.createTextNode(""),k.observe(R,{characterData:!0}),function(){R.data=D=++D%2}):x?(L=new MessageChannel,L.port1.onmessage=i,function(){return L.port2.postMessage(0)}):void 0===v&&"function"==typeof require?function(){try{var t=require,o=t("vertx");return void 0!==(A=o.runOnLoop||o.runOnContext)?function(){A(i)}:e()}catch(t){return e()}}():e();var L;var D,k,R;var O=Math.random().toString(36).substring(16),w=void 0,H=1,U=2,G=new y,V=new y,F=0;return f.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===w&&i<t;i++)this._eachEntry(e[i],i)},f.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,l=i.resolve;if(l===n){var c=r(t);if(c===o&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!=typeof c)this._remaining--,this._result[e]=t;else if(i===C){var d=new i(a);s(d,t,c),this._willSettleAt(d,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(l(t),e)},f.prototype._settledAt=function(t,e,i){var o=this.promise;o._state===w&&(this._remaining--,t===U?u(o,i):this._result[e]=i),0===this._remaining&&d(o,this._result)},f.prototype._willSettleAt=function(t,e){var i=this;p(t,void 0,function(t){return i._settledAt(H,e,t)},function(t){return i._settledAt(U,e,t)})},C.all=function(t){return new f(this,t).promise},C.race=function(t){var e=this;return new e(P(t)?function(i,o){for(var n=t.length,a=0;a<n;a++)e.resolve(t[a]).then(i,o)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},C.resolve=n,C.reject=function(t){var e=new this(a);return u(e,t),e},C._setScheduler=function(t){E=t},C._setAsap=function(t){N=t},C._asap=N,C.prototype={constructor:C,then:o,catch:function(t){return this.then(null,t)}},C.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=C},C.Promise=C,C}(),t.ES6Promise.polyfill())}(this),"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var a=e[n];if(t.call(o,a,n,e))return n;n++}return-1}}),function(t){function e(t,e){this.setNotifyMethod(t),this.setNotifyContext(e)}function i(t,e,i){this.name=t,this.body=e,this.type=i}function o(){}function n(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function r(t,e){this.mediatorName=t||this.constructor.NAME,this.viewComponent=e}function s(t,e){this.proxyName=t||this.constructor.NAME,null!=e&&this.setData(e)}function l(t){if(null!=l.instanceMap[t])throw Error(l.MULTITON_MSG);this.initializeNotifier(t),l.instanceMap[t]=this,this.initializeFacade()}function c(t){if(null!=c.instanceMap[t])throw Error(c.MULTITON_MSG);this.multitonKey=t,c.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function d(t){if(d.instanceMap[t])throw Error(d.MULTITON_MSG);this.multitonKey=t,d.instanceMap[t]=this,this.proxyMap=[],this.initializeModel()}function u(t){if(null!=u.instanceMap[t])throw Error(u.MULTITON_MSG);this.multitonKey=t,u.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function p(t,e,i){t=t.split("."),i=i||h.global;for(var o,n,a=0,r=t.length;a<r;a++)o=i,i=null==i[n=t[a]]?i[n]={}:i[n];return null==e?i:o[n]=e}if(null==t&&(t=window),!t.puremvc){e.prototype.setNotifyMethod=function(t){this.notify=t},e.prototype.setNotifyContext=function(t){this.context=t},e.prototype.getNotifyMethod=function(){return this.notify},e.prototype.getNotifyContext=function(){return this.context},e.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},e.prototype.compareNotifyContext=function(t){return t===this.context},e.prototype.notify=null,e.prototype.context=null,i.prototype.getName=function(){return this.name},i.prototype.setBody=function(t){this.body=t},i.prototype.getBody=function(){return this.body},i.prototype.setType=function(t){this.type=t},i.prototype.getType=function(){return this.type},i.prototype.toString=function(){return"Notification Name: "+this.getName()+"\nBody:"+(null==this.body?"null":this.body.toString())+"\nType:"+(null==this.type?"null":this.type)},i.prototype.name=null,i.prototype.type=null,i.prototype.body=null,o.prototype.sendNotification=function(t,e,i){var o=this.getFacade();o&&o.sendNotification(t,e,i)},o.prototype.initializeNotifier=function(t){this.multitonKey=""+t,this.facade=this.getFacade()},o.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(o.MULTITON_MSG);return l.getInstance(this.multitonKey)},o.prototype.multitonKey=null,o.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",n.prototype=new o,n.prototype.constructor=n,n.prototype.execute=function(){},a.prototype=new o,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(t){this.subCommands.push(t)},a.prototype.execute=function(t){for(;0<this.subCommands.length;){var e=new(this.subCommands.shift());e.initializeNotifier(this.multitonKey),e.execute(t)}},r.NAME="Mediator",r.prototype=new o,r.prototype.constructor=r,r.prototype.getMediatorName=function(){return this.mediatorName},r.prototype.setViewComponent=function(t){this.viewComponent=t},r.prototype.getViewComponent=function(){return this.viewComponent},r.prototype.listNotificationInterests=function(){return[]},r.prototype.handleNotification=function(){},r.prototype.onRegister=function(){},r.prototype.onRemove=function(){},r.prototype.mediatorName=null,r.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new o,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(t){this.data=t},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(t){return null==t?null:(null==l.instanceMap[t]&&(l.instanceMap[t]=new l(t)),l.instanceMap[t])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=u.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=d.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=c.getInstance(this.multitonKey))},l.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},l.prototype.removeCommand=function(t){this.controller.removeCommand(t)},l.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},l.prototype.registerProxy=function(t){this.model.registerProxy(t)},l.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},l.prototype.removeProxy=function(t){var e=null;return null!=this.model&&(e=this.model.removeProxy(t)),e},l.prototype.hasProxy=function(t){return this.model.hasProxy(t)},l.prototype.registerMediator=function(t){null!=this.view&&this.view.registerMediator(t)},l.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},l.prototype.removeMediator=function(t){var e=null;return null!=this.view&&(e=this.view.removeMediator(t)),e},l.prototype.hasMediator=function(t){return this.view.hasMediator(t)},l.prototype.sendNotification=function(t,e,o){this.notifyObservers(new i(t,e,o))},l.prototype.notifyObservers=function(t){null!=this.view&&this.view.notifyObservers(t)},l.prototype.initializeNotifier=function(t){this.multitonKey=t},l.hasCore=function(t){return null!=l.instanceMap[t]},l.removeCore=function(t){null!=l.instanceMap[t]&&(d.removeModel(t),c.removeView(t),u.removeController(t),delete l.instanceMap[t])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",c.prototype.initializeView=function(){},c.getInstance=function(t){return null==t?null:(null==c.instanceMap[t]&&(c.instanceMap[t]=new c(t)),c.instanceMap[t])},c.prototype.registerObserver=function(t,e){null!=this.observerMap[t]?this.observerMap[t].push(e):this.observerMap[t]=[e]},c.prototype.notifyObservers=function(t){if(null!=this.observerMap[t.getName()]){for(var e,i=this.observerMap[t.getName()],o=[],n=0;n<i.length;n++)e=i[n],o.push(e);for(n=0;n<o.length;n++)(e=o[n]).notifyObserver(t)}},c.prototype.removeObserver=function(t,e){for(var i=this.observerMap[t],o=0;o<i.length;o++)if(1==i[o].compareNotifyContext(e)){i.splice(o,1);break}0==i.length&&delete this.observerMap[t]},c.prototype.registerMediator=function(t){if(null==this.mediatorMap[t.getMediatorName()]){t.initializeNotifier(this.multitonKey),this.mediatorMap[t.getMediatorName()]=t;var i=t.listNotificationInterests();if(0<i.length)for(var o=new e(t.handleNotification,t),n=0;n<i.length;n++)this.registerObserver(i[n],o);t.onRegister()}},c.prototype.retrieveMediator=function(t){return this.mediatorMap[t]},c.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(e){for(var i=e.listNotificationInterests(),o=0;o<i.length;o++)this.removeObserver(i[o],e);delete this.mediatorMap[t],e.onRemove()}return e},c.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},c.removeView=function(t){delete c.instanceMap[t]},c.prototype.mediatorMap=null,c.prototype.observerMap=null,c.instanceMap=[],c.prototype.multitonKey=null,c.MULTITON_MSG="View instance for this Multiton key already constructed!",d.prototype.initializeModel=function(){},d.getInstance=function(t){return null==t?null:(null==d.instanceMap[t]&&(d.instanceMap[t]=new d(t)),d.instanceMap[t])},d.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},d.prototype.retrieveProxy=function(t){return this.proxyMap[t]},d.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},d.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(this.proxyMap[t]=null,e.onRemove()),e},d.removeModel=function(t){delete d.instanceMap[t]},d.prototype.proxyMap=null,d.instanceMap=[],d.MULTITON_MSG="Model instance for this Multiton key already constructed!",u.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)},u.getInstance=function(t){return null==t?null:(null==this.instanceMap[t]&&(this.instanceMap[t]=new this(t)),this.instanceMap[t])},u.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];null!=e&&((e=new e).initializeNotifier(this.multitonKey),e.execute(t))},u.prototype.registerCommand=function(t,i){null==this.commandMap[t]&&this.view.registerObserver(t,new e(this.executeCommand,this)),this.commandMap[t]=i},u.prototype.hasCommand=function(t){return null!=this.commandMap[t]},u.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),this.commandMap[t]=null)},u.removeController=function(t){delete this.instanceMap[t]},u.prototype.view=null,u.prototype.commandMap=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="controller key for this Multiton key already constructed";var h={global:function(){return this}(),extend:function(t,e){if("function"!=typeof t)throw new TypeError("#extend- child should be Function");if("function"!=typeof e)throw new TypeError("#extend- parent should be Function");if(e!==t){var i=new Function;return i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},decorate:function(t,e){for(var i in e)t[i]=e[i];return t}};t.puremvc={View:c,Model:d,Controller:u,SimpleCommand:n,MacroCommand:a,Facade:l,Mediator:r,Observer:e,Notification:i,Notifier:o,Proxy:s,define:function(t,e,i){t||(t={});var o=t.name,n=t.parent,a="function"==typeof n,r=t.scope||null;if("parent"in t&&!a)throw new TypeError("Class parent must be Function");if(t.hasOwnProperty("constructor")){if("function"!=typeof(t=t.constructor))throw new TypeError("Class constructor must be Function")}else t=a?function(){n.apply(this,arguments)}:new Function;if(a&&h.extend(t,n),e&&(a=t.prototype,h.decorate(a,e),a.constructor=t),i&&h.decorate(t,i),o){if("string"!=typeof o)throw new TypeError("Class name must be primitive string");p(o,t,r)}return t},declare:p}}}(this),function(){var global,version,_ref;function AkamaiSDKManager(){var t,e,i,o,n=this;e=null,this.getSDK=function(){return e},this.setSDK=function(i){var o,n;for(o in e=i,t(),e)n=e[o],window[o]=n;return e},this.saveSDK=function(t,e){var o,n;if(null!=e&&null!=t&&""!==t){if(null==e.main)for(o in e)if((null!=(n=e[o])?n.VERSION:void 0)===t){e.main=n;break}return null==e.version&&(e.version=t),i.push(e),this[t]=e,e}},i=[],this.getVersions=function(){return i.slice()},this.getVersion=function(t){return this[t]},this.setVersion=function(t){return null==(e=this.getVersion(t))?null:(this.setSDK(e),e)},this.revert=function(){return this.setSDK(i[0])},this.noConflict=function(){var t;return t=this.getSDK(),this.revert(),t},this.create=(o=function(t,e){return this.prototype=t.prototype,t.apply(this,e)},function(t){return new o(e.main,arguments)}),(t=function(){var t,i,o,a,r;if(null!=(a=window.com)&&null!=(r=a.akamai)?r.amp:void 0)for(t in window)if(((o=window[t])===window.AMP||o===window.AMPremier)&&null!=(null!=o?o.VERSION:void 0)&&""!==o.VERSION&&o.VERSION!==(null!=e?e.version:void 0)&&null==n[o.VERSION]){(i={}).main=o,i.com=window.com,window.AMP&&(i.AMP=window.AMP),window.AMPPremier&&(i.AMPremier=window.AMPPremier),window.Utils&&(i.Utils=window.Utils),window.QueryString&&(i.QueryString=window.QueryString),window.QueryParams&&(i.QueryParams=window.QueryParams),n.saveSDK(o.VERSION,i);break}})()}if(null==(_ref=window.AKAMAI_MEDIA_PLAYER)&&(window.AKAMAI_MEDIA_PLAYER=new AkamaiSDKManager),version="FOX News Player v7.90.9",null==window.AKAMAI_MEDIA_PLAYER[version]){function __hasProp(t){return{}.hasOwnProperty(t)}function __extends(t,e){for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);function o(){this.constructor=t}return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t}function __indexOf(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1}function __bind(t,e){return function(){return t.apply(e,arguments)}}function QueryString(){}function ModuleProxy(t,e){this.config=t,ModuleProxy.__super__.constructor.call(this,e)}function Module(t){this.viewComponent=t,this.performance={init:Date.now()},Module.__super__.constructor.call(this,this.getModuleName()+"-"+Utils.createUID()),this.dispatcher=new EventDispatcher(this),this.logger=Logger.instance,this.moduleMap={}}function EventDispatcher(t){this._target=null!=t?t:this,this._listenerMap={}}function TrackList(t){this.list=null!=t?t:[],TrackList.__super__.constructor.call(this),this.dispatcher=new EventDispatcher(this),this.handlers={change:this.changeHandler.bind(this)}}function InstallPlayer(t){var e,i,o;t.className=Namespace.PREFIX+"player",i=UI.create("install-flash",t),UI.create(null,i,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed."),(e=UI.create(null,i,"a")).href="http://www.adobe.com/go/getflashplayer",(o=UI.create(null,e,"img")).src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",o.alt="Get Adobe Flash player"}function Manager(){this.map={}}function URL(){}function Authorization(t,e,i){this.key=t,this.token=e,this.expiration=i}function ResourceManager(){ResourceManager.__super__.constructor.call(this)}function PluginsInitializedCommand(){PluginsInitializedCommand.__super__.constructor.call(this)}function PlayerCommand(){PlayerCommand.__super__.constructor.call(this)}function TogglePlayPauseCommand(){TogglePlayPauseCommand.__super__.constructor.call(this)}function ToggleFullScreenCommand(){ToggleFullScreenCommand.__super__.constructor.call(this)}function PlayerEventCommand(){PlayerEventCommand.__super__.constructor.call(this)}function PlayingCommand(){PlayingCommand.__super__.constructor.call(this)}global=window.AKAMAI_MEDIA_PLAYER[version]={},QueryString.construct=function(){var t,e,i;for(t in i=this.decode(window.location.search),QueryString.typed={},i)e=i[t],QueryString[t]=e,QueryString.typed[t]=this.parse(e);return!0},QueryString.encode=function(t,e){var i,o,n,a;for(o in n=[],t)null!=(a=t[o])&&(i=e?e+"["+o+"]":o,n.push("object"==typeof a?this.encode(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a)));return n.join("&")},QueryString.decode=function(t){var e,i=this;return null!=t&&(e={},(t=t.replace(/^[^?]*\?/,"")).replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,o,n,a){var r,s;r=decodeURIComponent(o),s=decodeURIComponent(a),/~/.test(s)&&(s=i.decodeObject(s)),e[r]=s})),e},QueryString.decodeObject=function(t){var e,i=this;return null!=t&&(e={},t.replace(/([^:~]+)(:([^~]*))?/g,function(t,o,n,a){e[decodeURIComponent(o)]=i.parse(decodeURIComponent(a))})),e},QueryString.parse=function(t){var e;if("object"==typeof t)return t;if("undefined"===t)return!0;if("true"===(e=t.toLowerCase())||"false"===e)return"true"===e;if("null"===e)return null;if(e=parseFloat(t),!isNaN(e))return e;try{return e=JSON.parse(t)}catch(e){return t}},QueryString.constructed=QueryString.construct(),__extends(ModuleProxy,puremvc.Proxy),ModuleProxy.NAME="ModuleProxy",ModuleProxy.prototype.defaults=null,ModuleProxy.prototype.config=null,ModuleProxy.prototype.initializeNotifier=function(t){ModuleProxy.__super__.initializeNotifier.call(this,t),this.createData()},ModuleProxy.prototype.createData=function(){this.setData(this.config)},ModuleProxy.prototype.getDefaults=function(){return this.defaults||{}},ModuleProxy.prototype.setData=function(t){var e,i,o,n,a;for(i in null==t&&(t={}),o={},a=this.getDefaults())e=a[i],n=i in t?t[i]:e,o[i]=n;return ModuleProxy.__super__.setData.call(this,o),t},ModuleProxy.prototype.destroy=function(){},__extends(Module,puremvc.Facade),Module.prototype.logger=null,Module.prototype.config=null,Module.prototype.moduleName=null,Module.prototype.moduleMap=null,Module.prototype.viewComponent=null,Module.prototype.dispatcher=null,Module.prototype.oninitialized=null,Module.prototype.onerror=null,Module.prototype.parentModule=null,Module.prototype.performance=null,Module.prototype.initialize=function(t,e){this.config=t,this.parentModule=e,this.loadModuleResources().then(this.resourcesLoaded.bind(this)).catch(this.resourcesError.bind(this))},Module.prototype.loadModuleResources=function(t){var e,i,o;if(null==t&&(t=this.config.resources),!(null!=t?t.length:void 0)>0)return Promise.resolve();for(i=0,o=t.length;i<o;i++)(e=t[i]).src=this.evaluatePaths(e.src),null!=e.debug&&(e.debug=this.evaluatePaths(e.debug));return AMP.addResources(t)},Module.prototype.evaluatePaths=function(t){var e,i,o;if(null!=t)return null!=(e=this.config.paths||(null!=(i=this.parentModule)&&null!=(o=i.config)?o.paths:void 0))&&(t=DataBinding.eval(t,{paths:e})),t},Module.prototype.resourcesError=function(t){"function"==typeof this.onerror&&this.onerror(this)},Module.prototype.resourcesLoaded=function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)},Module.prototype.createFramework=function(){this.createModel(),this.createController(),this.createView()},Module.prototype.createModel=function(){this.registerProxy(new ModuleProxy(this.config))},Module.prototype.createView=function(){},Module.prototype.createController=function(){this.registerCommand(Notifications.DISPATCH_EVENT,DispatchEventCommand)},Module.prototype.getModuleName=function(){return this.moduleName},Module.prototype.getConfig=function(){return this.config},Module.prototype.hasModule=function(t){return null!=this.moduleMap[t]},Module.prototype.getModules=function(){var t,e,i,o;for(t in e={},o=this.moduleMap)i=o[t],e[t]=i.module;return e},Module.prototype.registerModule=function(t){var e,i;i=t.getModuleName(),null!=t&&null==this.moduleMap[i]&&(e=new ModuleAdapter(t),this.moduleMap[i]=e,this.registerMediator(e),t.onRegister())},Module.prototype.retrieveModule=function(t){return this.moduleMap[t].module},Module.prototype.removeModule=function(t){var e,i;if(null!=(e=this.moduleMap[t]))return delete this.moduleMap[t],this.removeMediator(t),(i=e.module).onRemove.call(i),i},Module.prototype.listNotificationInterests=function(){return[]},Module.prototype.listNotificationPublications=function(){return[]},Module.prototype.getViewComponent=function(){return this.viewComponent},Module.prototype.setViewComponent=function(t){return this.viewComponent=t,t},Module.prototype.onRegister=function(){},Module.prototype.onRemove=function(){},Module.prototype.destroy=function(){var t,e,i,o;if(null!=this.getModules())for(t in i=this.getModules())e=i[t],this.removeModule(t),e.destroy();for(t in null!=(o=this.retrieveProxy(ModuleProxy.NAME))&&"function"==typeof o.destroy&&o.destroy(),puremvc.Facade.removeCore(this.multitonKey),null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className=""),this){try{this[t]=null}catch(t){}delete this[t]}},Module.prototype.addEventListener=function(t,e){this.dispatcher.addEventListener(t,e)},Module.prototype.once=function(t,e){this.dispatcher.once(t,e)},Module.prototype.logEvent=function(t){var e;!0!==/(timeupdate|progress|fragmentloaded|fragmentloadstart)/.test(t.type)&&(e=this.getModuleName().toUpperCase(),t.dispatcher&&(e+=" "+t.dispatcher),this.logger.log("["+e+" EVENT] "+t.type,t))},Module.prototype.dispatchEvent=function(t){this.logEvent(t),this.dispatcher.dispatchEvent(t)},Module.prototype.removeEventListener=function(t,e){this.dispatcher.removeEventListener(t,e)},EventDispatcher.prototype.addEventListener=function(t,e,i){null!=e&&null!=t&&(null==this._listenerMap[t]&&(this._listenerMap[t]=[]),-1===this._listenerMap[t].indexOf(e)&&this._listenerMap[t].push(e))},EventDispatcher.prototype.once=function(t,e){e.once=!0,this.addEventListener(t,e)},EventDispatcher.prototype.dispatchEvent=function(t){var e,i,o,n,a,r,s,l;if(i=this._listenerMap[t.type],e=this._target["on"+t.type],t.target=this._target,o=[],null!=e&&e.apply(this._target,[t]),null!=i){for(n=0,r=(l=i.slice()).length;n<r;n++)(e=l[n]).apply(this._target,[t]),!0===e.once&&o.push(e);if(o.length>0)for(a=0,s=o.length;a<s;a++)e=o[a],i.splice(i.indexOf(e),1)}},EventDispatcher.prototype.removeEventListener=function(t,e,i){var o,n;if(null!=e&&null!=t&&null!=(n=this._listenerMap[t])&&-1!==(o=null!=n?n.indexOf(e):void 0))return n.splice(o,1)},__extends(TrackList,Array),TrackList.prototype.onchange=null,TrackList.prototype.changeHandler=function(t){this.dispatchEvent(t)},TrackList.prototype.addEventListener=function(t,e,i){this.dispatcher.addEventListener(t,e,i)},TrackList.prototype.dispatchEvent=function(t){this.dispatcher.dispatchEvent(t)},TrackList.prototype.removeEventListener=function(t,e,i){return this.dispatcher.removeEventListener(t,e,i)},TrackList.prototype.add=function(t,e){null==e&&(e=!0),this.push(t),t.addEventListener("change",this.handlers.change),!0===e&&this.dispatchEvent({type:"addtrack"})},TrackList.prototype.remove=function(t,e){var i;if(null==e&&(e=!0),-1!==(i=this.indexOf(t)))return this.splice(i,1),t.removeEventListener("change",this.handlers.change),!0===e&&this.dispatchEvent({type:"removetrack"}),t},TrackList.prototype.clear=function(){var t,e;if(0!==this.length){for(t=0,e=this.length;t<e;t++)this[t],this.remove(this[this.length-1],!1);this.dispatchEvent({type:"removetrack"})}},TrackList.prototype.getTrackById=function(t){var e,i,o;for(i=0,o=this.length;i<o;i++)if((e=this[i]).id===t)return e},InstallPlayer.prototype.initialize=function(){},InstallPlayer.prototype.getModules=function(){return[]},Manager.prototype.map=null,Manager.prototype.add=function(t,e){this.map[t]=e},Manager.prototype.item=function(t){return this.map[t]},Manager.prototype.remove=function(t){var e;return null!=(e=this.map[t])&&(this.map[t]=null,delete this.map[t]),e},URL.prototype.url=null,URL.prototype.method=null,URL.prototype.withCredentials=null,URL.prototype.headers=null,URL.prototype.data=null,Authorization.prototype.key=null,Authorization.prototype.token=null,Authorization.prototype.expiration=null,__extends(ResourceManager,Manager),ResourceManager.prototype.js=function(t,e){return Utils.loadScript(t,document.body)},ResourceManager.prototype.css=function(t,e){return new Promise(function(i,o){try{Utils.loadStyleSheet(t)}catch(t){o()}i(e)})},ResourceManager.prototype.json=function(t,e){return Utils.requestJson(e.src).then(function(t){return e.data=t,e})},ResourceManager.prototype.require=function(t){var e;return null==(e=this.item(t))?"string"==typeof t?this.add({src:t}):null!=t.src?this.add(t):Promise.resolve(t):"function"==typeof e?(Manager.prototype.add.call(this,t,null),Promise.resolve().then(function(){return e()})):"function"==typeof e.then?e:Promise.resolve(e)},ResourceManager.prototype.add=function(t){var e,i,o,n,a,r=this;return!1===t.enabled?Promise.resolve():(n=Logger.instance.enabled&&null!=t.debug?t.debug:t.src,e=t.id||n,!0===t.defer?(t.defer=!1,ResourceManager.__super__.add.call(this,e,this.add.bind(this,t)),Promise.resolve()):null!=(i=this.item(e))?"function"==typeof i.then?i:Promise.resolve(i):((a=t.type||Utils.getMimeType(n))===Utils.mimeTypes.js||/javascript/.test(a)?o=this.js(n,t):a===Utils.mimeTypes.css?o=this.css(n,t):a===Utils.mimeTypes.json||/json/.test(a)?o=this.json(n,t):a!==Utils.mimeTypes.swf&&(o=Utils.request(n)),null==o?Promise.resolve():(o=o.then(function(t){return Manager.prototype.add.call(r,e,t),t}),ResourceManager.__super__.add.call(this,e,o),o)))},ResourceManager.prototype.addResources=function(t){var e,i,o,n,a;if(!(null!=t?t.length:void 0)>0)return Promise.resolve();for(i=[],e=[],n=0,a=t.length;n<a;n++)(o=t[n])instanceof Array?i.push(this.addResources.bind(this,o)):!0===o.async?e.push(this.add(o)):i.push(this.add.bind(this,o));return(e.length>0?Promise.all(e):Promise.resolve()).then(function(){return Utils.chain(i)})},__extends(PluginsInitializedCommand,puremvc.SimpleCommand),PluginsInitializedCommand.prototype.execute=function(t){var e,i;this.facade.performance.ready=Date.now(),this.sendNotification(Notifications.READY,this.facade.config),null!=(e=null!=(i=this.facade.config)?i.media:void 0)&&setTimeout(this.sendNotification.bind(this,Notifications.SET_MEDIA,e),0)},__extends(PlayerCommand,puremvc.SimpleCommand),PlayerCommand.prototype.applicationState=null,PlayerCommand.prototype.media=null,PlayerCommand.prototype.player=null,PlayerCommand.prototype.playback=null,PlayerCommand.prototype.config=null,PlayerCommand.prototype.logger=null,PlayerCommand.prototype.bindings=null,PlayerCommand.prototype.params=null,PlayerCommand.prototype.playerCore=null,PlayerCommand.prototype.security=null,PlayerCommand.prototype.tracks=null,PlayerCommand.prototype.initializeNotifier=function(t){var e;PlayerCommand.__super__.initializeNotifier.call(this,t),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.mediaProxy,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.tracks=this.player.tracks,this.playback=(null!=(e=this.player.playerCore)?e.getActivePlaybackCore():void 0)||this.player.playback},__extends(TogglePlayPauseCommand,PlayerCommand),TogglePlayPauseCommand.prototype.execute=function(t){var e;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case PlayState.ENDED:e=Notifications.REPLAY;break;case PlayState.PAUSED:case PlayState.READY:e=Notifications.PLAY;break;case PlayState.PLAYING:e=Notifications.PAUSE}this.applicationState.getWaiting()&&!0===this.facade.getMediaElement().paused&&(e=Notifications.PLAY),this.sendNotification(e,!0)}},__extends(ToggleFullScreenCommand,PlayerCommand),ToggleFullScreenCommand.prototype.execute=function(t){var e;e=this.applicationState.getDisplayState()===DisplayState.FULL_SCREEN?DisplayState.NORMAL:DisplayState.FULL_SCREEN,this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,e)},__extends(PlayerEventCommand,PlayerCommand),PlayerEventCommand.prototype.dispatchEvent=function(t,e){var i;"string"!=typeof t&&(e=null!=t.getBody()?t.getBody():{},t=t.getName()),i=new Event(t.toLowerCase(),e),this.sendNotification(Notifications.DISPATCH_EVENT,i)},PlayerEventCommand.prototype.dispatchEventAfterCommand=function(t,e){setTimeout(this.dispatchEvent.bind(this,t,e),0)},PlayerEventCommand.prototype.execute=function(t){this.dispatchEvent(t)},__extends(PlayingCommand,PlayerEventCommand),PlayingCommand.prototype.execute=function(t){!0!==this.applicationState.getIsUserActive()&&(0===this.facade.getMediaElement().currentTime&&!1===this.media.started&&!1===this.applicationState.getSeeking()&&(this.media.started=!0,this.sendNotification(Notifications.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()===PlayState.PLAYING?PlayingCommand.__super__.execute.call(this,t):this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING))};var FullscreenMode={EXTERNAL:"external"},ControlsMode={AUTO:"auto",PERSISTENT:"persistent",NONE:"none"};function PauseCommand(){PauseCommand.__super__.constructor.call(this)}function ChangeAutoplayCommand(){ChangeAutoplayCommand.__super__.constructor.call(this)}function ChangeLoopCommand(){ChangeLoopCommand.__super__.constructor.call(this)}function ChangeVolumeCommand(){ChangeVolumeCommand.__super__.constructor.call(this)}function MediaValidatedCommand(){MediaValidatedCommand.__super__.constructor.call(this)}function SeekCommand(){SeekCommand.__super__.constructor.call(this)}function SeekingCommand(){SeekingCommand.__super__.constructor.call(this)}function SeekedCommand(){SeekedCommand.__super__.constructor.call(this)}function ReplayCommand(){ReplayCommand.__super__.constructor.call(this)}function EndCommand(){EndCommand.__super__.constructor.call(this)}function EndedCommand(){EndedCommand.__super__.constructor.call(this)}function StartCommand(){StartCommand.__super__.constructor.call(this)}function IsUserActiveCommand(){IsUserActiveCommand.__super__.constructor.call(this)}function WaitingCommand(){WaitingCommand.__super__.constructor.call(this)}function ChangeMutedCommand(){ChangeMutedCommand.__super__.constructor.call(this)}function AuthorizedCommand(){AuthorizedCommand.__super__.constructor.call(this)}function InitializedCommand(){InitializedCommand.__super__.constructor.call(this)}function RegisterPlaybackCoreCommand(){RegisterPlaybackCoreCommand.__super__.constructor.call(this)}function RecordContentChangeCommand(){RecordContentChangeCommand.__super__.constructor.call(this)}function TimeUpdateCommand(){TimeUpdateCommand.__super__.constructor.call(this)}function ToggleMutedCommand(){ToggleMutedCommand.__super__.constructor.call(this)}function PlayRequestCommand(){PlayRequestCommand.__super__.constructor.call(this)}function EnableVideoEventsCommand(){EnableVideoEventsCommand.__super__.constructor.call(this)}function DisableVideoEventsCommand(){DisableVideoEventsCommand.__super__.constructor.call(this)}function VolumeChangeCommand(){VolumeChangeCommand.__super__.constructor.call(this)}function HasPostContentCommand(){HasPostContentCommand.__super__.constructor.call(this)}function MediaSequenceEndedCommand(){MediaSequenceEndedCommand.__super__.constructor.call(this)}function LockCommand(){LockCommand.__super__.constructor.call(this)}function GoLiveCommand(){GoLiveCommand.__super__.constructor.call(this)}function ChangeActiveStateCommand(){ChangeActiveStateCommand.__super__.constructor.call(this)}function ChangeDisplayStateCommand(){ChangeDisplayStateCommand.__super__.constructor.call(this)}function PlayCommand(){PlayCommand.__super__.constructor.call(this)}function ToggleActiveCommand(){ToggleActiveCommand.__super__.constructor.call(this)}function Track(t){this.data=null!=t?t:{},Track.__super__.constructor.call(this),Object.defineProperties(this,{kind:{get:this.getKind,enumerable:!0,configurable:!1},label:{get:this.getLabel,enumerable:!0,configurable:!1},language:{get:this.getLanguage,enumerable:!0,configurable:!1},id:{get:this.getId,enumerable:!0,configurable:!1},enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1}})}function XMLUtils(){}function TracksProxy(){TracksProxy.__super__.constructor.call(this,null,{}),this.data.audioTracks=new TrackList,this.data.videoTracks=new TrackList,this.data.textTracks=new TrackList}function Player(t){Player.__super__.constructor.call(this,t)}function HTMLPlayer(t){HTMLPlayer.__super__.constructor.call(this,t)}__extends(PauseCommand,PlayerEventCommand),PauseCommand.prototype.execute=function(t){this.playback.pause(),this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),PauseCommand.__super__.execute.call(this,t)},__extends(ChangeAutoplayCommand,PlayerCommand),ChangeAutoplayCommand.prototype.execute=function(t){this.config.setAutoplay(t.getBody())},__extends(ChangeLoopCommand,PlayerCommand),ChangeLoopCommand.prototype.execute=function(t){this.config.setLoop(t.getBody())},__extends(ChangeVolumeCommand,PlayerCommand),ChangeVolumeCommand.prototype.execute=function(t){var e;e=Utils.clamp(t.getBody(),0,1),this.playback.getVolume()!==e&&this.playback.setVolume(e)},__extends(MediaValidatedCommand,PlayerCommand),MediaValidatedCommand.prototype.execute=function(t){var e,i,o,n,a,r,s,l=this;o=t.getBody(),n=this.facade.getMediaElement(),this.sendNotification(Notifications.MEDIA_CHANGE,o),"amp"===this.applicationState.getPlaybackTarget()&&(e=!1===this.applicationState.getLocked()&&!0===this.facade.getAutoplay(),r=this.config.getPlaysInline(),n.playsInline=null==r||r,null!=(a=this.config.getMuted())&&this.playback.setMuted(a),e&&a&&(i=this.facade.getContainer(),s=function(){l.config.setMuted(!1),l.facade.setMuted(!1),i.removeEventListener("click",s)},i.addEventListener("click",s)),e&&setTimeout(this.sendNotification.bind(this,Notifications.PLAY,!0),0))},__extends(SeekCommand,PlayerCommand),SeekCommand.prototype.execute=function(t){var e,i;0===(e=t.getBody())&&this.media.getType()===Utils.mimeTypes.m3u8&&(e=.25),e!==this.playback.getCurrentTime()&&(!0===this.playback.getStarted()&&this.sendNotification(Notifications.WAITING),this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:e,duration:this.playback.getDuration()}),this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),i=this.facade.getMediaElement(),this.applicationState.pausedBeforeSeek=i.paused,this.playback.setCurrentTime(e),!0!==this.playback.getStarted()&&this.sendNotification(Notifications.TIME_UPDATE,e))},__extends(SeekingCommand,PlayerEventCommand),SeekingCommand.prototype.execute=function(t){!0!==this.applicationState.getSeeking()?(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),this.applicationState.setSeeking(!0),SeekingCommand.__super__.execute.call(this,t)):this.applicationState.setSeekRequested(!0)},__extends(SeekedCommand,PlayerEventCommand),SeekedCommand.prototype.execute=function(t){var e=this;!0!==this.applicationState.getIsUserActive()?setTimeout(function(){var i,o,n;e.applicationState.setSeeking(!1),e.dispatchEvent(t),e.applicationState.setSeekRequested(!1),e.sendNotification(UserNotifications.SEEKED,t.getBody()),e.applicationState.getPlayState()!==PlayState.READY&&(i=!0===(null!=(n=e.facade.ads)?n.getInProgress():void 0),o=!0!==e.applicationState.pausedBeforeSeek&&!0!==e.facade.retrieveProxy(PlaybackProxy.NAME).getPaused()||!1!==i?PlayState.PLAYING:PlayState.PAUSED,"full-screen"===e.applicationState.displayState&&"ipad"===e.applicationState.device&&e.facade.retrieveProxy(PlaybackProxy.NAME).getPaused()!==e.facade.getMediaElement().paused&&(o=!0===e.facade.getMediaElement().paused?PlayState.PAUSED:PlayState.PLAYING),e.sendNotification(Notifications.CHANGE_PLAY_STATE,o))},1):setTimeout(this.sendNotification.bind(this,t.getName(),t.getBody()),100)},__extends(ReplayCommand,PlayerCommand),ReplayCommand.prototype.execute=function(t){"function"!=typeof this.playback.replay?this.sendNotification(Notifications.SET_MEDIA,this.media.getData()):this.playback.replay()},__extends(EndCommand,PlayerCommand),EndCommand.prototype.execute=function(t){this.applicationState.getEnded()||(this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,Notifications.ENDED)))},__extends(EndedCommand,PlayerEventCommand),EndedCommand.prototype.execute=function(t){this.applicationState.getEnded()||(this.applicationState.setEnded(!0),EndedCommand.__super__.execute.call(this,t),!0===this.config.getLoop()?this.sendNotification(Notifications.REPLAY):!1===this.applicationState.getHasPostContent()&&this.sendNotification(Notifications.MEDIA_SEQUENCE_ENDED))},__extends(StartCommand,PlayerCommand),StartCommand.prototype.execute=function(t){this.sendNotification(Notifications.PLAY_REQUEST),this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()}),this.sendNotification(Notifications.STARTED,t.getBody())},__extends(IsUserActiveCommand,PlayerCommand),IsUserActiveCommand.prototype.execute=function(t){this.applicationState.setIsUserActive(t.getBody())},__extends(WaitingCommand,PlayerEventCommand),WaitingCommand.prototype.execute=function(t){this.applicationState.getWaiting()||(this.applicationState.setWaiting(!0),WaitingCommand.__super__.execute.call(this,t))},__extends(ChangeMutedCommand,PlayerCommand),ChangeMutedCommand.prototype.execute=function(t){this.playback.setMuted(t.getBody())},__extends(AuthorizedCommand,PlayerEventCommand),AuthorizedCommand.prototype.execute=function(t){null==this.security.getSession()&&(this.security.setSession(UI.createUID()),this.sendNotification(Notifications.MEDIA_VALIDATED,this.media.getData()),AuthorizedCommand.__super__.execute.call(this,t))},__extends(InitializedCommand,PlayerCommand),InitializedCommand.prototype.execute=function(t){this.playback.initialized=!0},__extends(RegisterPlaybackCoreCommand,PlayerCommand),RegisterPlaybackCoreCommand.prototype.execute=function(t){this.playerCore.registerPlaybackCore(t.getBody())},__extends(RecordContentChangeCommand,PlayerCommand),RecordContentChangeCommand.prototype.execute=function(t){var e;e=t.getBody(),this.sendNotification(Notifications.CHANGE_CONTENT,{from:this.media.getData(),to:e}),this.media.updateData(e),this.sendNotification(Notifications.UPDATE_DATA_BINDINGS),this.sendNotification(Notifications.CHANGE_CONTENT,this.media.getData())},__extends(TimeUpdateCommand,PlayerEventCommand),TimeUpdateCommand.prototype.execute=function(t){this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:this.playback.getCurrentTime(),duration:this.playback.getDuration()}),TimeUpdateCommand.__super__.execute.call(this,t)},__extends(ToggleMutedCommand,PlayerCommand),ToggleMutedCommand.prototype.execute=function(t){this.playback.setMuted(!this.playback.getMuted())},__extends(PlayRequestCommand,PlayerEventCommand),PlayRequestCommand.prototype.execute=function(t){!0!==this.media.started&&(this.media.started=!0,PlayRequestCommand.__super__.execute.call(this,t),this.sendNotification(Notifications.WAITING),this.sendNotification(Notifications.MEDIA_SEQUENCE_STARTED))},__extends(EnableVideoEventsCommand,PlayerCommand),EnableVideoEventsCommand.prototype.execute=function(t){var e,i,o,n,a;for(o=this.player.getMediaElement(),n=0,a=(i=t.getBody()).length;n<a;n++)e=i[n],o.addEventListener(e,this.playback.handlers[e])},__extends(DisableVideoEventsCommand,PlayerCommand),DisableVideoEventsCommand.prototype.execute=function(t){var e,i,o,n,a;for(o=this.player.getMediaElement(),n=0,a=(i=t.getBody()).length;n<a;n++)e=i[n],o.removeEventListener(e,this.playback.handlers[e])},__extends(VolumeChangeCommand,PlayerEventCommand),VolumeChangeCommand.prototype.execute=function(t){this.applicationState.setVolume(t.getBody()),VolumeChangeCommand.__super__.execute.call(this,t)},__extends(HasPostContentCommand,PlayerCommand),HasPostContentCommand.prototype.execute=function(t){this.applicationState.setHasPostContent(t.getBody())},__extends(MediaSequenceEndedCommand,PlayerEventCommand),MediaSequenceEndedCommand.prototype.execute=function(t){!0===this.config.getLoop()?(MediaSequenceEndedCommand.__super__.execute.call(this,t),this.sendNotification(Notifications.REPLAY)):(this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.ENDED),this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),MediaSequenceEndedCommand.__super__.execute.call(this,t))},__extends(LockCommand,PlayerCommand),LockCommand.prototype.execute=function(t){var e,i;i=(e=t.getBody())?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE,this.sendNotification(i,"locked"),this.applicationState.setLocked(e)},__extends(GoLiveCommand,PlayerCommand),GoLiveCommand.prototype.execute=function(t){var e;"function"==typeof(e=this.playback).goLive&&e.goLive()},__extends(ChangeActiveStateCommand,PlayerCommand),ChangeActiveStateCommand.prototype.execute=function(t){var e;e=this.config.getControls().mode!==ControlsMode.PERSISTENT?t.getBody():ActiveState.ACTIVE,this.applicationState.setActiveState(e)},__extends(ChangeDisplayStateCommand,PlayerEventCommand),ChangeDisplayStateCommand.interval=null,ChangeDisplayStateCommand.prototype.execute=function(t){var e,i,o,n,a=this;(o=t.getBody())!==this.applicationState.getDisplayState()&&(this.applicationState.setDisplayState(o),this.config.getFullscreen().mode!==FullscreenMode.EXTERNAL?(e=this.facade.getMediaElement(),n=this.facade.getViewComponent(),i=Utils.getFullScreenApi(n,e),o===DisplayState.FULL_SCREEN?(null!=i.event?null!=n.mozRequestFullScreen?document[i.event]=function(t){if(!document.mozFullScreen)return a.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)}:n[i.event]=function(t){if(null==document[i.element])return a.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)}:(clearInterval(ChangeDisplayStateCommand.interval),ChangeDisplayStateCommand.interval=setInterval(function(){!0!==e.webkitDisplayingFullscreen&&(a.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL),clearInterval(ChangeDisplayStateCommand.interval))},100)),null!=i.error&&document.addEventListener(i.error,this.facade.logger.error.bind(this.facade.logger)),i.enter()):o===DisplayState.NORMAL&&(null!=i&&"function"==typeof i.exit&&i.exit(),e[i.event]=null,clearInterval(ChangeDisplayStateCommand.interval)),this.sendNotifications(o)):this.sendNotifications(o))},ChangeDisplayStateCommand.prototype.sendNotifications=function(t){setTimeout(this.sendNotification.bind(this,Notifications.FULL_SCREEN_CHANGE,t),100),this.dispatchEvent("fullscreenchange",t===DisplayState.FULL_SCREEN)},__extends(PlayCommand,PlayerEventCommand),PlayCommand.prototype.execute=function(t){!0!==this.applicationState.getLocked()&&(t.getBody()&&!0!==this.playback.initialized&&this.sendNotification(Notifications.INITIALIZED),!0===this.playback.initialized&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(Notifications.START),this.playback.play(),PlayCommand.__super__.execute.call(this,t)))},__extends(ToggleActiveCommand,PlayerCommand),ToggleActiveCommand.prototype.execute=function(t){var e;e=this.applicationState.getActiveState()===ActiveState.ACTIVE?ActiveState.INACTIVE:ActiveState.ACTIVE,this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,e)},__extends(Track,EventDispatcher),Track.prototype.getKind=function(){return this.data.kind},Track.prototype.getLabel=function(){return this.data.label},Track.prototype.getLanguage=function(){return this.data.language},Track.prototype.getId=function(){return this.data.id},Track.prototype.setEnabled=function(t){t!==this.data.enabled&&(this.data.enabled=t,this.changeEnabled(t),this.dispatchEvent("change"))},Track.prototype.changeEnabled=function(t){},Track.prototype.getEnabled=function(){return this.data.enabled},Track.prototype.flatten=function(){return{kind:this.getKind(),label:this.getLabel(),language:this.getLanguage(),id:this.getId(),enabled:this.getEnabled()}},XMLUtils.createTextContent=function(t,e){return/[\&<>]/.test(e)?t.createCDATASection(e):t.createTextNode(e)},XMLUtils.updateTextContent=function(t,e){var i;return i=XMLUtils.createTextContent(t.ownerDocument,e),t.removeChild(t.childNodes[0]),t.appendChild(i),t},XMLUtils.serialize=function(t){if(null!=t){if("string"==typeof t)return t;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(t)}catch(e){try{return t.xml}catch(t){}}}}},XMLUtils.parse=function(t){var e;return window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)),e},__extends(TracksProxy,puremvc.Proxy),TracksProxy.NAME="TracksProxy",TracksProxy.prototype.clear=function(){this.data.audioTracks.clear(),this.data.videoTracks.clear(),this.data.textTracks.clear()},TracksProxy.prototype.getAudioTracks=function(){return this.data.audioTracks},TracksProxy.prototype.getVideoTracks=function(){return this.data.videoTracks},TracksProxy.prototype.getTextTracks=function(){return this.data.textTracks},__extends(Player,Module),Player.prototype.moduleName="amp",Player.prototype.playerType=null,Player.prototype.hidden=!1,Player.prototype.l10n=null,Player.prototype.appState=null,Player.prototype.mediaProxy=null,Player.prototype.bindings=null,Player.prototype.configuration=null,Player.prototype.params=null,Player.prototype.security=null,Player.prototype.createModel=function(){this.appState=new ApplicationStateProxy,this.registerProxy(this.appState),this.bindings=new DataBindingProxy,this.registerProxy(this.bindings),this.security=new SecurityProxy,this.registerProxy(this.security),this.mediaProxy=new MediaProxy(this.config),this.registerProxy(this.mediaProxy),this.params=new ParamsProxy(this.config.params),this.registerProxy(this.params),this.configuration=new ConfigurationProxy(this.config),this.registerProxy(this.configuration)},Player.prototype.resourcesLoaded=function(){Player.__super__.resourcesLoaded.call(this),Object.defineProperties(this,{src:{get:this.getSrc,set:this.setSrc,enumerable:!0,configurable:!1},media:{get:this.getMedia,set:this.setMedia,enumerable:!0,configurable:!1},currentTime:{get:this.getCurrentTime,set:this.setCurrentTime,enumerable:!0,configurable:!1},autoplay:{get:this.getAutoplay,set:this.setAutoplay,enumerable:!0,configurable:!1},duration:{get:this.getDuration,enumerable:!0,configurable:!1},playState:{get:this.getPlayState,enumerable:!0,configurable:!1},seeking:{get:this.getSeeking,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},ended:{get:this.getEnded,enumerable:!0,configurable:!1},volume:{get:this.getVolume,set:this.setVolume,enumerable:!0,configurable:!1},muted:{get:this.getMuted,set:this.setMuted,enumerable:!0,configurable:!1},mediaElement:{get:this.getMediaElement,enumerable:!0,configurable:!1},textTracks:{get:function(){return this.getMediaElement().textTracks},enumerable:!0,configurable:!1},audioTracks:{get:this.getAudioTracks,enumerable:!0,configurable:!1},container:{get:this.getContainer,enumerable:!0,configurable:!1},loop:{get:this.getLoop,set:this.setLoop,enumerable:!0,configurable:!1},displayState:{get:this.getDisplayState,set:this.setDisplayState,enumerable:!0,configurable:!1},playbackRate:{get:this.getPlaybackRate,set:this.setPlaybackRate,enumerable:!0,configurable:!1},language:{get:this.getLanguage,set:this.setLanguage,enumerable:!0,configurable:!1},localization:{get:function(){return this.retrieveProxy(LocalizationProxy.NAME)},enumerable:!0,configurable:!1},version:{get:this.getVersion,enumerable:!0,configurable:!1},error:{get:this.getError,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},mediaTransforms:{get:this.getMediaTransforms,enumerable:!0,configurable:!1},waiting:{get:this.getWaiting,set:this.setWaiting,enumerable:!0,configurable:!1},cues:{get:this.getCues,set:this.setCues,enumerable:!0,configurable:!1},quality:{get:this.getQuality,set:this.setQuality,enumerable:!0,configurable:!1},qualityMode:{get:this.getQualityMode,set:this.setQualityMode,enumerable:!0,configurable:!1},qualityLevels:{get:this.getQualityLevels,enumerable:!0,configurable:!1},debug:{get:this.getDebug,enumerable:!0,configurable:!1},settings:{get:this.getSettings,enumerable:!0,configurable:!1},mode:{get:this.getMode,enumerable:!0,configurable:!1},buffering:{get:this.getBuffering,enumerable:!0,configurable:!1},width:{get:this.getWidth,enumerable:!0,configurable:!1},height:{get:this.getHeight,enumerable:!0,configurable:!1},videoWidth:{get:this.getVideoWidth,enumerable:!0,configurable:!1},videoHeight:{get:this.getVideoHeight,enumerable:!0,configurable:!1},defaultMediaTransform:{get:function(){return this.mediaProxy.defaultMediaTransform()},enumerable:!0,configurable:!1}})},Player.prototype.createView=function(){this._settings=new SettingsMediator,this.registerMediator(this._settings)},Player.prototype.createController=function(){Player.__super__.createController.call(this),this.registerCommand(Notifications.CHANGE_SETTINGS,ChangeSettingsCommand),this.registerCommand(Notifications.SETTINGS_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.CUES_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.DESTROY,PlayerEventCommand)},Player.prototype.setViewComponent=function(t){return t.amp=this,Player.__super__.setViewComponent.call(this,t)},Player.prototype.getPlayerType=function(){return this.playerType},Player.prototype.getVersion=function(){return AMP.getVersion()},Player.prototype.getDebug=function(){return this.config.debug},Player.prototype.getMode=function(){return this.config.mode},Player.prototype.createPlugins=function(){this.sendNotification(PluginNotifications.REGISTER_PLUGINS,this.config)},Player.prototype.createMediaElement=function(){return null},Player.prototype.createFramework=function(){Player.__super__.createFramework.call(this),this.setMediaElement(this.createMediaElement()),this.createPlugins()},Player.prototype.getLanguage=function(){return this.retrieveProxy(LocalizationProxy.NAME).getLanguage()},Player.prototype.setLanguage=function(t){return this.retrieveProxy(LocalizationProxy.NAME).setLanguage(t),t},Player.prototype.getLocalizedString=function(t){try{return this.retrieveProxy(LocalizationProxy.NAME).getString(t)}catch(e){return t}},Player.prototype.getMediaElement=function(){return this.appState.getMediaElement()},Player.prototype.setMediaElement=function(t){return this.appState.setMediaElement(t),null==t.once&&(t.once=function(t,e){var i,o;i=function(t,e,i,o){this.removeEventListener(e,this[t]),delete this[t],i(o)},this[o=Utils.createUID()]=i.bind(this,o,t,e),this.addEventListener(t,this[o])},t.once=t.once.bind(t)),t.amp=this,t},Player.prototype.getContainer=function(){return this.getViewComponent()},Player.prototype.getAudioTracks=function(){},Player.prototype.evaluateBindings=function(t,e){return DataBinding.evaluateBindings(t,Utils.override(this.bindings.data,e))},Player.prototype.canPlayType=function(t){},Player.prototype.load=function(){},Player.prototype.play=function(){},Player.prototype.replay=function(){},Player.prototype.pause=function(){},Player.prototype.end=function(){},Player.prototype.setParams=function(t){},Player.prototype.getParams=function(){},Player.prototype.setAutoplay=function(t){},Player.prototype.getAutoplay=function(){},Player.prototype.setLoop=function(t){},Player.prototype.getLoop=function(){},Player.prototype.setMuted=function(t){},Player.prototype.getMuted=function(){},Player.prototype.mute=function(){return this.setMuted(!0)},Player.prototype.unmute=function(){return this.setMuted(!1)},Player.prototype.setMedia=function(t){},Player.prototype.getMedia=function(){},Player.prototype.setCurrentTime=function(t){},Player.prototype.getCurrentTime=function(){},Player.prototype.getCurrentTimeUTC=function(){},Player.prototype.getDuration=function(){},Player.prototype.setSrc=function(t){},Player.prototype.getSrc=function(){},Player.prototype.setSource=function(t){},Player.prototype.getSource=function(){},Player.prototype.setVolume=function(t){},Player.prototype.getVolume=function(){},Player.prototype.getSeeking=function(){},Player.prototype.getPaused=function(){},Player.prototype.getEnded=function(){},Player.prototype.getBuffering=function(){return this.appState.getBuffering()},Player.prototype.setDisplayState=function(t){},Player.prototype.getDisplayState=function(){},Player.prototype.getWaiting=function(){return this.appState.getWaiting()},Player.prototype.setWaiting=function(t){return this.appState.setWaiting(t)},Player.prototype.getError=function(){},Player.prototype.enterFullScreen=function(){},Player.prototype.exitFullScreen=function(){},Player.prototype.setHidden=function(t){var e;t!==this.appState.getHidden()&&(this.appState.setHidden(t),e=this.viewComponent.style,!0===t?(this.hiddenData={width:e.width,height:e.height,paused:this.getPaused()},e.width=e.height="0px",!1===this.hiddenData.paused&&this.pause()):(e.width=this.hiddenData.width,e.height=this.hiddenData.height,!1===this.hiddenData.paused&&this.play(),this.hiddenData=null))},Player.prototype.getHidden=function(){return this.appState.getHidden()},Player.prototype.getWidth=function(){var t;return null!=(t=this.getViewComponent())?t.offsetWidth:void 0},Player.prototype.getHeight=function(){var t;return null!=(t=this.getViewComponent())?t.offsetWidth:void 0},Player.prototype.getVideoWidth=function(){var t;return null!=(t=this.getMediaElement())?t.videoWidth:void 0},Player.prototype.getVideoHeight=function(){var t;return null!=(t=this.getMediaElement())?t.videoHeight:void 0},Player.prototype.recordContentChange=function(t){},Player.prototype.setPlaybackRate=function(){},Player.prototype.getPlaybackRate=function(){},Player.prototype.setCues=function(t){return this.mediaProxy.setCues(t),t},Player.prototype.getCues=function(){return this.mediaProxy.getCues()},Player.prototype.setQuality=function(t){},Player.prototype.getQuality=function(){},Player.prototype.getQualityLevels=function(){},Player.prototype.getQualityMode=function(){},Player.prototype.setQualityMode=function(t){},Player.prototype.getPlaystate=function(){},Player.prototype.getMediaTransforms=function(){return this.mediaProxy.getTransforms()},Player.prototype.authorize=function(t){this.security.authorize(t)},Player.prototype.goLive=function(){},Player.prototype.appendChild=function(t){this.mediator.addLayer(t)},Player.prototype.removeChild=function(t){this.mediator.removeLayer(t)},Player.prototype.getSettings=function(){var t;return(null!=(t=this._settings)?t.getSettings():void 0)||{change:function(){}}},Player.prototype.destroy=function(){this.sendNotification(Notifications.DESTROY),Player.__super__.destroy.call(this)},__extends(HTMLPlayer,Player),HTMLPlayer.prototype.playerType="html",HTMLPlayer.prototype.playerCore=null,HTMLPlayer.prototype.tracks=null,HTMLPlayer.prototype.mediator=null,HTMLPlayer.prototype.createMediaElement=function(){var t;return this.mediator=new MediaElementMediator("html5","video"),this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,this.mediator),null==(t=this.mediator.getViewComponent()).dataset&&(t.dataset={}),t},HTMLPlayer.prototype.createModel=function(){var t;HTMLPlayer.__super__.createModel.call(this),this.registerProxy(new LocalizationProxy(this.config)),t=new PlaybackCoreProxy,this.registerProxy(t),this.playerCore=new PlayerProxy(t,this.config.getPlaybackOrder),this.registerProxy(this.playerCore),this.tracks=new TracksProxy,this.registerProxy(this.tracks),this.appState.setRenderMode(RenderMode.HTML),this.bindings.initialize(),this.fps=Utils.override(FPS,this.config.fps)},HTMLPlayer.prototype.createView=function(){HTMLPlayer.__super__.createView.call(this),this.mediator=new PlayerMediator("html5",this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new PluginAdapter),this.registerMediator(new VideoLayerMediator),this.registerMediator(new OverlayLayerMediator)},HTMLPlayer.prototype.createController=function(){HTMLPlayer.__super__.createController.call(this),this.registerCommand(PluginNotifications.PLUGINS_INITIALIZED,PluginsInitializedCommand),this.registerCommand(Notifications.PLAY,PlayCommand),this.registerCommand(Notifications.PLAYING,PlayingCommand),this.registerCommand(Notifications.PAUSE,PauseCommand),this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand),this.registerCommand(Notifications.TOGGLE_FULL_SCREEN,ToggleFullScreenCommand),this.registerCommand(Notifications.CHANGE_DISPLAY_STATE,ChangeDisplayStateCommand),this.registerCommand(Notifications.TOGGLE_ACTIVE,ToggleActiveCommand),this.registerCommand(Notifications.CHANGE_ACTIVE_STATE,ChangeActiveStateCommand),this.registerCommand(Notifications.SET_MEDIA,SetMediaCommand),this.registerCommand(Notifications.CHANGE_MEDIA,ChangeMediaCommand),this.registerCommand(Notifications.MEDIA_VALIDATED,MediaValidatedCommand),this.registerCommand(Notifications.MEDIA_CHANGE,MediaChangeCommand),this.registerCommand(Notifications.UPDATE_DATA_BINDINGS,UpdateDataBindingsCommand),this.registerCommand(Notifications.START,StartCommand),this.registerCommand(Notifications.SEEK,SeekCommand),this.registerCommand(Notifications.SEEKING,SeekingCommand),this.registerCommand(Notifications.SEEKED,SeekedCommand),this.registerCommand(Notifications.CHANGE_VOLUME,ChangeVolumeCommand),this.registerCommand(Notifications.CHANGE_MUTED,ChangeMutedCommand),this.registerCommand(Notifications.CHANGE_AUTOPLAY,ChangeAutoplayCommand),this.registerCommand(Notifications.CHANGE_LOOP,ChangeLoopCommand),this.registerCommand(Notifications.END,EndCommand),this.registerCommand(Notifications.ENDED,EndedCommand),this.registerCommand(Notifications.REPLAY,ReplayCommand),this.registerCommand(Notifications.ERROR,ErrorCommand),this.registerCommand(Notifications.READY,ReadyCommand),this.registerCommand(Notifications.WAITING,WaitingCommand),this.registerCommand(Notifications.CHANGE_DURATION,ChangeDurationCommand),this.registerCommand(Notifications.CHANGE_PARAMS,ChangeParamsCommand),this.registerCommand(Notifications.IS_USER_ACTIVE,IsUserActiveCommand),this.registerCommand(SecurityNotifications.AUTHORIZED,AuthorizedCommand),this.registerCommand(Notifications.INITIALIZED,InitializedCommand),this.registerCommand(Notifications.REGISTER_PLAYBACK_CORE,RegisterPlaybackCoreCommand),this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,TogglePlayPauseCommand),this.registerCommand(UserNotifications.SEEK,SeekCommand),this.registerCommand(Notifications.CHANGE_PLAYBACK_TARGET,ChangePlaybackTargetCommand),this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,PlaybackTargetChangeCommand),this.registerCommand(Notifications.RECORD_CONTENT_CHANGE,RecordContentChangeCommand),this.registerCommand(Notifications.TIME_UPDATE,TimeUpdateCommand),this.registerCommand(Notifications.TOGGLE_MUTED,ToggleMutedCommand),this.registerCommand(Notifications.VOLUME_CHANGE,VolumeChangeCommand),this.registerCommand(Notifications.PLAY_REQUEST,PlayRequestCommand),this.registerCommand(Notifications.HAS_POST_CONTENT,HasPostContentCommand),this.registerCommand(Notifications.LOCK,LockCommand),this.registerCommand(UserNotifications.GO_LIVE,GoLiveCommand),this.registerCommand(Notifications.BUFFERING_CHANGE,BufferingChangeCommand),this.registerCommand(Notifications.PLAY_STATE_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.PROGRESS,PlayerEventCommand),this.registerCommand(Notifications.CAN_PLAY,PlayerEventCommand),this.registerCommand(Notifications.CAN_PLAY_THROUGH,PlayerEventCommand),this.registerCommand(Notifications.LOAD_START,PlayerEventCommand),this.registerCommand(Notifications.STARTED,PlayerEventCommand),this.registerCommand(Notifications.LOADED_METADATA,PlayerEventCommand),this.registerCommand(Notifications.DURATION_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.MEDIUM_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.TEMPORAL_TYPE_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.LANGUAGE_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.PLAYBACK_TARGET_AVAILABLE,PlayerEventCommand),this.registerCommand(SecurityNotifications.AUTHORIZE,PlayerEventCommand),this.registerCommand(SecurityNotifications.AUTHORIZATION_FAILED,PlayerEventCommand),this.registerCommand(SecurityNotifications.AUTHENTICATION_FAILED,PlayerEventCommand),this.registerCommand(SecurityNotifications.AUTHORIZATION_EXPIRED,PlayerEventCommand),this.registerCommand(Notifications.FAIL_OVER_ATTEMPT,PlayerEventCommand),this.registerCommand(Notifications.IS_LIVE,PlayerEventCommand),this.registerCommand(Notifications.TIMED_METADATA,PlayerEventCommand),this.registerCommand(Notifications.PAUSED,PlayerEventCommand),this.registerCommand(Notifications.STALLED,PlayerEventCommand),this.registerCommand(Notifications.QUALITY_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.QUALITY_CHANGING,PlayerEventCommand),this.registerCommand(Notifications.QUALITY_LEVELS_LOADED,PlayerEventCommand),this.registerCommand(Notifications.MUTE_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.RESUME,PlayerEventCommand),this.registerCommand(Notifications.FRAGMENT_LOAD_START,PlayerEventCommand),this.registerCommand(Notifications.FRAGMENT_LOADED,PlayerEventCommand),this.registerCommand(Notifications.AUTOPLAY_BLOCKED,PlayerEventCommand),this.registerCommand(Notifications.MEDIA_SEQUENCE_STARTED,PlayerEventCommand),this.registerCommand(Notifications.MEDIA_SEQUENCE_ENDED,MediaSequenceEndedCommand),this.registerCommand(Notifications.ENABLE_VIDEO_EVENTS,EnableVideoEventsCommand),this.registerCommand(Notifications.DISABLE_VIDEO_EVENTS,DisableVideoEventsCommand)},HTMLPlayer.prototype.setMediaElement=function(t){var e;return null!=(e=this.getMediaElement())&&e.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged),t.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged),HTMLPlayer.__super__.setMediaElement.call(this,t),t},HTMLPlayer.prototype.presentationModeChanged=function(t){"inline"===t.target.webkitPresentationMode&&(t.target.controls=!1)},HTMLPlayer.prototype.recordContentChange=function(t){this.sendNotification(Notifications.RECORD_CONTENT_CHANGE,t)},HTMLPlayer.prototype.canPlayType=function(t){return this.retrieveProxy(PlaybackProxy.NAME).canPlayType(t)},HTMLPlayer.prototype.getAudioTracks=function(){return this.retrieveProxy(TracksProxy.NAME).getAudioTracks()},HTMLPlayer.prototype.load=function(){this.sendNotification(Notifications.LOAD)},HTMLPlayer.prototype.play=function(){this.sendNotification(Notifications.PLAY,!0)},HTMLPlayer.prototype.replay=function(){this.sendNotification(Notifications.REPLAY)},HTMLPlayer.prototype.pause=function(){this.sendNotification(Notifications.PAUSE)},HTMLPlayer.prototype.end=function(){this.sendNotification(Notifications.END)},HTMLPlayer.prototype.setParams=function(t){return this.sendNotification(Notifications.CHANGE_PARAMS,t),t},HTMLPlayer.prototype.getParams=function(){return this.params.getData()},HTMLPlayer.prototype.setAutoplay=function(t){return this.sendNotification(Notifications.CHANGE_AUTOPLAY,t),t},HTMLPlayer.prototype.getAutoplay=function(){var t,e;return t=this.retrieveProxy(PlaybackProxy.NAME),(Utils.isAutoplaySupported()&&this.configuration.getMuted()||t.initialized)&&(this.configuration.getAutoplay()||!0===(null!=(e=this.getMedia())?e.autoplay:void 0))},HTMLPlayer.prototype.setLoop=function(t){return this.sendNotification(Notifications.CHANGE_LOOP,t),t},HTMLPlayer.prototype.getLoop=function(){return this.configuration.getLoop()},HTMLPlayer.prototype.setMuted=function(t){return this.sendNotification(Notifications.CHANGE_MUTED,t),t},HTMLPlayer.prototype.getMuted=function(){return this.retrieveProxy(PlaybackProxy.NAME).getMuted()},HTMLPlayer.prototype.setMedia=function(t){return this.sendNotification(Notifications.SET_MEDIA,t),t},HTMLPlayer.prototype.getMedia=function(){return this.mediaProxy.getData()},HTMLPlayer.prototype.setCurrentTime=function(t){return this.sendNotification(Notifications.SEEK,t),t},HTMLPlayer.prototype.getCurrentTime=function(){return this.retrieveProxy(PlaybackProxy.NAME).getCurrentTime()},HTMLPlayer.prototype.getDuration=function(){return this.mediaProxy.getDuration()},HTMLPlayer.prototype.setSrc=function(t){return this.sendNotification(Notifications.SET_MEDIA,{src:t}),t},HTMLPlayer.prototype.getSrc=function(){return this.mediaProxy.getSrc()},HTMLPlayer.prototype.setSource=function(t){return this.sendNotification(Notifications.SET_MEDIA,{source:t}),t},HTMLPlayer.prototype.getSource=function(){return this.mediaProxy.getSource()},HTMLPlayer.prototype.setVolume=function(t){return this.sendNotification(Notifications.CHANGE_VOLUME,t),t},HTMLPlayer.prototype.getVolume=function(){return this.retrieveProxy(PlaybackProxy.NAME).getVolume()},HTMLPlayer.prototype.getSeeking=function(){return this.retrieveProxy(PlaybackProxy.NAME).getSeeking()},HTMLPlayer.prototype.getPaused=function(){return this.retrieveProxy(PlaybackProxy.NAME).getPaused()},HTMLPlayer.prototype.getEnded=function(){return this.appState.getEnded()},HTMLPlayer.prototype.getError=function(){return this.getMediaElement().error},HTMLPlayer.prototype.setDisplayState=function(t){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,t)},HTMLPlayer.prototype.getDisplayState=function(t){return this.appState.getDisplayState()},HTMLPlayer.prototype.enterFullScreen=function(){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.FULL_SCREEN)},HTMLPlayer.prototype.exitFullScreen=function(){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)},HTMLPlayer.prototype.setPlaybackRate=function(t){var e;!0!==(null!=(e=this.ads)?e.inProgress:void 0)&&t!==this.getMediaElement().playbackRate&&(this.getMediaElement().playbackRate=t,this.dispatchEvent(new Event(Events.PLAYBACK_RATE_CHANGE,t)))},HTMLPlayer.prototype.getPlaybackRate=function(){return this.getMediaElement().playbackRate},HTMLPlayer.prototype.getQualityLevels=function(){return this.retrieveProxy(PlaybackProxy.NAME).getQualityLevels()},HTMLPlayer.prototype.setQuality=function(t){return this.retrieveProxy(PlaybackProxy.NAME).setQuality(t)},HTMLPlayer.prototype.getQuality=function(){return this.retrieveProxy(PlaybackProxy.NAME).getQuality()},HTMLPlayer.prototype.getQualityMode=function(){return this.retrieveProxy(PlaybackProxy.NAME).getQualityMode()},HTMLPlayer.prototype.setQualityMode=function(t){return this.retrieveProxy(PlaybackProxy.NAME).setQualityMode(t)},HTMLPlayer.prototype.getPlayState=function(){return this.appState.getPlayState()},HTMLPlayer.prototype.goLive=function(){return this.retrieveProxy(PlaybackProxy.NAME).goLive()},HTMLPlayer.prototype.destroy=function(){var t,e;null!=(t=this.retrieveProxy(PlayerProxy.NAME))&&null!=(e=t.activePlaybackCore)&&"function"==typeof e.destroy&&e.destroy(),HTMLPlayer.__super__.destroy.call(this)};var FlashNotifications={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackClose",MEDIA_SEQUENCE_ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",BUFFERING_CHANGE:"mediaPlayerBufferingChanged",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",FEED_UPDATED:"mediaPlayerDataFeedUpdated",FEED_LOADED:"mediaPlayerFeedLoaded",TIMED_METADATA:"mediaPlayerSendCuePoint",MEDIA_PLAYER_ID3_UPDATED:"mediaPlayerID3Updated"};function PlaybackProxy(){PlaybackProxy.__super__.constructor.call(this,PlaybackProxy.NAME),this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1,waiting:!1},"desktop"===Utils.getDevice()&&(this.initialized=!0),this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this),stalled:this.onstalled.bind(this)},this.resume={event:-1===Utils.getIEVersion()||11===Utils.getIEVersion()?"loadedmetadata":"canplaythrough",listener:this.resumestart.bind(this)},this.textTrackHandlers={addtrack:this.onaddtrack.bind(this)},this.onneedkey=this.onneedkey.bind(this)}function FlashPluginsInitializedCommand(){FlashPluginsInitializedCommand.__super__.constructor.call(this)}function FlashStartCommand(){FlashStartCommand.__super__.constructor.call(this)}function ChangePlaybackTargetCommand(){ChangePlaybackTargetCommand.__super__.constructor.call(this)}function BufferingChangeCommand(){BufferingChangeCommand.__super__.constructor.call(this)}function LocalizationWrapper(t,e){this.player=t,this.config=e,LocalizationWrapper.__super__.constructor.call(this,this.constructor.NAME),this.proxy=new LocalizationProxy(this.config),this.player.registerProxy(this.proxy)}function ModuleMediator(t){null==this.cssPrefix&&(this.cssPrefix=Namespace.PREFIX),ModuleMediator.__super__.constructor.call(this,this.mediatorName,t)}function LocalizedMediator(t){LocalizedMediator.__super__.constructor.call(this,t)}function ComponentMediator(t,e,i,o){this.componentName=null!=t?t:this.componentName,this.componentType=null!=e?e:this.componentType,this.parent=i,this.element=o,null==this.mediatorName&&(this.mediatorName=this.createMediatorName()),ComponentMediator.__super__.constructor.call(this,this.viewComponent)}function MediaElementMediator(t,e){this.mediatorName=this.componentType+"-mediator",MediaElementMediator.__super__.constructor.call(this,t,null,null,e)}function LayerMediator(){LayerMediator.__super__.constructor.call(this)}function VideoLayerMediator(){VideoLayerMediator.__super__.constructor.call(this)}function PlayerMediator(t,e){this.componentName=t,this.layers=[],PlayerMediator.__super__.constructor.call(this,null,null,null,e)}function FlashPlayerMediator(t){FlashPlayerMediator.__super__.constructor.call(this,this.type,t)}function PlaybackTargetChangeCommand(){PlaybackTargetChangeCommand.__super__.constructor.call(this)}function FlashAuthorizedCommand(){FlashAuthorizedCommand.__super__.constructor.call(this)}function PlaybackCoreProxy(t,e){this.supportedTypes=null!=t?t:this.supportedTypes,this.config=e,PlaybackCoreProxy.__super__.constructor.call(this),this.temporalTypes=["vod","live","ondemand"]}function FlashPlaybackProxy(t){this.player=t,FlashPlaybackProxy.__super__.constructor.call(this)}function FlashPlayer(t){var e=this;this.flashObjectID+=Date.now(),this.plugins={},this._displayState=DisplayState.NORMAL,this.debug=/debug\=true/.test(location.search),FlashPlayer.__super__.constructor.call(this,t),this.addEventListener("mediachange",function(t){var i,o,n,a,r,s,l;if(r=t.detail.track,n=(o=e.getMediaElement()).textTracks=[],null!=r)for(s=0,l=r.length;s<l;s++)i={kind:(a=r[s]).kind,label:a.label,language:a.srclang,_mode:a.mode},Object.defineProperty(i,"mode",{get:function(){return this._mode},set:function(t){var e;this._mode=t,(e="showing"===t)&&o.setTrackByLanguage(this.language),o.setPlayerProperty("captionDisplay",{visible:e})},enumerable:!0,configurable:!1}),n.push(i)})}function ModuleAdapter(t){this.module=t,ModuleAdapter.__super__.constructor.call(this,t.getModuleName(),this)}function DataBinding(){}function DispatchEventCommand(){DispatchEventCommand.__super__.constructor.call(this)}__extends(PlaybackProxy,puremvc.Proxy),PlaybackProxy.NAME="PlaybackProxy",PlaybackProxy.prototype.data=null,PlaybackProxy.prototype.initialized=!1,PlaybackProxy.prototype.enabled=null,PlaybackProxy.prototype.handlers=null,PlaybackProxy.prototype.resume=null,PlaybackProxy.prototype.playWhenLoaded=!1,PlaybackProxy.prototype.metadataloaded=!1,PlaybackProxy.prototype.activeCuesIndex=0,PlaybackProxy.prototype.id3CueType=null,PlaybackProxy.prototype.getEnabled=function(){return this.enabled},PlaybackProxy.prototype.setEnabled=function(t){if(t!==this.enabled)return this.enabled=t,!0===this.enabled?this.load():this.applyHandlers(!1),t},PlaybackProxy.prototype.applyHandlers=function(t){var e,i,o,n,a;for(o in null==t&&(t=!0),n=this.getMediaElement(),e=t?"addEventListener":"removeEventListener",a=this.handlers)i=a[o],n[e](o,i)},PlaybackProxy.prototype.resumestart=function(t){var e=this;this.getMediaElement(),this.handlers.durationchange(t),this.data.currentTime>0?setTimeout(function(){e.seek(e.data.currentTime).then(e.resumecomplete.bind(e))},50):this.resumecomplete()},PlaybackProxy.prototype.resumecomplete=function(){this.data.loading=!1,this.applyHandlers(!0),!0===this.playWhenLoaded&&setTimeout(this.play.bind(this),1)},PlaybackProxy.prototype.onaddtrack=function(t){var e,i=this;"metadata"===(e=t.track).kind&&(e.mode="hidden",e.addEventListener("cuechange",function(t){var e,o,n,a;for(o=0,n=(a=t.target.activeCues).length;o<n;o++)e=a[o],i.sendNotification(Notifications.TIMED_METADATA,e)}))},PlaybackProxy.prototype.ontimeupdate=function(t){var e;!0!==(("function"==typeof(e=this.facade.ads||{}).getInProgress?e.getInProgress():void 0)||e.inProgress)&&(this.data.currentTime=t.target.currentTime,this.sendNotification(Notifications.TIME_UPDATE,this.data.currentTime))},PlaybackProxy.prototype.ondurationchange=function(t){var e;(e=t.target.duration)===this.data.duration||0===e||isNaN(e)||(this.data.duration=e,/Android [4-7]/.test(navigator.userAgent)&&-1!==this.getMediaElement().src.indexOf(".m3u8")&&e===1/0||this.sendNotification(Notifications.CHANGE_DURATION,e))},PlaybackProxy.prototype.onplay=function(t){this.data.paused=!1},PlaybackProxy.prototype.onplaying=function(t){this.data.paused=!1,this.data.seeking=!1,this.data.waiting=!1,this.sendNotification(Notifications.PLAYING)},PlaybackProxy.prototype.onpause=function(t){!0!==this.getMediaElement().ended&&this.facade.playState!==PlayState.READY&&(!0===this.data.waiting&&"hls"===this.playbackCoreName||(this.data.paused=!0,t.target.readyState>0&&(this.sendNotification(Notifications.PAUSED),this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED))))},PlaybackProxy.prototype.onloadeddata=function(t){this.sendNotification(Notifications.LOADED_DATA)},PlaybackProxy.prototype.onwaiting=function(t){var e;this.data.waiting=!0,this.sendNotification(Notifications.WAITING),!1===(e=this.getMediaElement()).seeking&&2===e.readyState&&2===e.networkState&&(e.once("playing",this.sendNotification.bind(this,Notifications.BUFFERING_CHANGE,!1)),this.sendNotification(Notifications.BUFFERING_CHANGE,!0))},PlaybackProxy.prototype.onstalled=function(t){this.sendNotification(Notifications.STALLED)},PlaybackProxy.prototype.onseeking=function(t){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate),this.data.seeking=!0,this.sendNotification(Notifications.SEEKING)},PlaybackProxy.prototype.onseeked=function(t){this.data.seeking=!1,this.sendNotification(Notifications.SEEKED,t.target.currentTime),this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)},PlaybackProxy.prototype.onended=function(t){this.data.ended=!0,this.sendNotification(Notifications.ENDED)},PlaybackProxy.prototype.onprogress=function(t){var e,i;try{e=(i=this.getMediaElement()).buffered,this.sendNotification(Notifications.PROGRESS,e.end(e.length-1)/i.duration)}catch(t){}},PlaybackProxy.prototype.onerror=function(t){this.sendNotification(Notifications.ERROR,this.getMediaElement().error)},PlaybackProxy.prototype.onloadstart=function(t){this.sendNotification(Notifications.LOAD_START)},PlaybackProxy.prototype.oncanplay=function(t){this.sendNotification(Notifications.CAN_PLAY)},PlaybackProxy.prototype.oncanplaythrough=function(t){this.createTracks(),this.sendNotification(Notifications.CAN_PLAY_THROUGH),this.sendNotification(Notifications.PROGRESS,this.getDuration())},PlaybackProxy.prototype.onloadedmetadata=function(t){this.metadataloaded=!0,this.sendNotification(Notifications.ENABLE_FULL_SCREEN),this.sendNotification(Notifications.LOADED_METADATA)},PlaybackProxy.prototype.applyTextTrackHandlers=function(t){var e,i;e=!0===t?"addEventListener":"removeEventListener",null!=(i=this.getMediaElement().textTracks)&&i[e]("addtrack",this.textTrackHandlers.addtrack)},PlaybackProxy.prototype.createTracks=function(){var t,e,i,o,n,a,r,s,l;if(t=this.getMediaElement().audioTracks,r=this.facade.retrieveProxy(TracksProxy.NAME).getAudioTracks(),e=function(t,e){if(this.facade.tracks.getAudioTracks().forEach(function(t){return t.data.enabled=!1}),!0===e)return this.facade.tracks.getAudioTracks()[t.id].data.enabled=!0},null!=t)for(i=t.length||0,o=s=0,l=t.length;s<l;o=++s)n=t[o],!1!==Utils.fieldIsUnique(r,"id",n.id)&&((a=new Track(n)).changeEnabled=e.bind(this,a),r.add(a,o+1===i))},PlaybackProxy.prototype.reset=function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1,this.applyTextTrackHandlers(!1)},PlaybackProxy.prototype.getStarted=function(){return this.data.started},PlaybackProxy.prototype.getMediaElement=function(){return this.facade.getMediaElement()},PlaybackProxy.prototype.canPlayMedium=function(t){return"video"===t},PlaybackProxy.prototype.canPlayTemporalType=function(t){return"dvr"!==t},PlaybackProxy.prototype.canPlayType=function(t){var e;return e=document.createElement("video").canPlayType(t)||"",(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&t===Utils.mimeTypes.m3u8&&(e="maybe"),"probably"===e&&/video\/f4m|x-flv/.test(t)&&/UCBrowser/.test(navigator.userAgent)&&(e=""),e},PlaybackProxy.prototype.getPaused=function(){return this.data.paused},PlaybackProxy.prototype.getSeeking=function(){return this.data.seeking},PlaybackProxy.prototype.getCurrentTime=function(){return this.data.currentTime},PlaybackProxy.prototype.setCurrentTime=function(t){if(t!==this.data.currentTime)return this.data.currentTime=t,this.getStarted()&&this.seek(t),t},PlaybackProxy.prototype.seek=function(t){var e=this;return null==t&&(t=this.data.currentTime),new Promise(function(i,o){var n,a,r,s;try{s=e.getMediaElement(),a=function(){setTimeout(i,10,t)},s.once("seeked",a),s.currentTime=t,r=navigator.userAgent,/Android.*Chrome/.test(r)&&(n=setInterval(function(){Math.round(s.currentTime)===Math.round(t)&&(clearInterval(n),s.dispatchEvent(new CustomEvent("seeked")))},10))}catch(t){o(t)}})},PlaybackProxy.prototype.goLive=function(){var t,e;e=(t=this.getMediaElement()).duration===1/0?t.seekable.end(0):t.duration,t.currentTime=e},PlaybackProxy.prototype.getVolume=function(){var t;return!0===(t=this.getMediaElement()).muted?0:t.volume},PlaybackProxy.prototype.setVolume=function(t){return this.getMuted()&&t>0?this.setMuted(!1,!1):this.getMuted()||0!==t||this.setMuted(!0,!1),this.sendNotification(Notifications.VOLUME_CHANGE,this.getMediaElement().volume=t),t},PlaybackProxy.prototype.getMuted=function(){return this.data.muted},PlaybackProxy.prototype.setMuted=function(t,e){var i;if(null==e&&(e=!0),this.data.muted!==t)return this.data.muted=t,!0===this.data.muted?(this.data.volume=this.getVolume(),i=0):i=this.data.volume,this.getMediaElement().muted=t,!0===e&&(this.sendNotification(Notifications.CHANGE_VOLUME,i),this.sendNotification(Notifications.VOLUME_CHANGE,i)),this.sendNotification(Notifications.MUTE_CHANGE,this.data.muted),t},PlaybackProxy.prototype.getDuration=function(){return this.data.duration},PlaybackProxy.prototype.play=function(){var t,e=this;if(!0!==this.data.started){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,!1===this.metadataloaded)return}else if(!0===this.data.loading)return void(this.playWhenLoaded=!0);this.getPaused()&&this.sendNotification(Notifications.RESUME),null!=(null!=(t=this.getMediaElement().play())?t.catch:void 0)&&t.catch(function(t){return e.sendNotification(Notifications.AUTOPLAY_BLOCKED)})},PlaybackProxy.prototype.pause=function(){this.data.paused=!0,this.getMediaElement().pause()},PlaybackProxy.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()},PlaybackProxy.prototype.load=function(){var t;this.sendNotification(Notifications.WAITING),this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1,(t=this.getMediaElement()).once(this.resume.event,this.resume.listener),t.addEventListener("loadedmetadata",this.handlers.loadedmetadata),t.addEventListener("durationchange",this.handlers.durationchange),t.addEventListener("canplaythrough",this.handlers.canplaythrough),t.addEventListener("webkitneedkey",this.onneedkey),t.addEventListener("error",this.handlers.error),this.applyTextTrackHandlers(!0),this.applySrc()},PlaybackProxy.prototype.applySrc=function(){var t,e,i;null!=(e=this.getSrc())&&""!==e||this.sendNotification(Notifications.ERROR,"The value of src is not supported: "+value),(t=this.getMediaElement()).src=e,!0===t.muted&&(this.data.muted=!0),Utils.isIPad()&&(null!=(i=Utils.getIOSversion())?i[0]:void 0)<8?setTimeout(t.load.bind(t),100):t.load()},PlaybackProxy.prototype.setQuality=function(t){},PlaybackProxy.prototype.getQuality=function(){},PlaybackProxy.prototype.getQualityLevels=function(){return[]},PlaybackProxy.prototype.getQualityMode=function(){},PlaybackProxy.prototype.setQualityMode=function(t){},PlaybackProxy.prototype.destroy=function(){var t,e,i,o,n;for(e in t=this.getMediaElement(),o=this.handlers)i=o[e],t.removeEventListener(e,i);t.removeEventListener(this.resume.event,this.resume.listener),t.removeEventListener("webkitneedkey",this.onneedkey),null!=(n=t.textTracks)&&n.removeEventListener("addtrack",this.textTrackHandlers.addtrack)},PlaybackProxy.prototype.onneedkey=function(t){var e,i,o,n,a,r,s,l=this;s=t.target,n=Utils.getKeySystem(),a=this.facade.mediaProxy.getKeys()[n],i=this.facade.fps,null!=a&&"com.apple.fps.1_0"===n&&(o=t.initData,e=i.extractContentId(o,a),r=i.extractServerUrl(o,a),i.requestCertificate(a).then(function(t){return i.concatInitDataIdAndCertificate(o,e,t)}).then(function(t){var o;if(!WebKitMediaKeys.isTypeSupported(n,"video/mp4"))throw"Key System not supported";if(null==s.webkitKeys&&s.webkitSetMediaKeys(new WebKitMediaKeys(n)),null==s.webkitKeys)throw"Could not create MediaKeys";if(null==(o=s.webkitKeys.createSession("video/mp4",t)))throw"Could not create key session";o.addEventListener("webkitkeymessage",function(t){i.requestLicense(t.message,e,r,a).then(function(t){o.update(t)}).catch(function(t){l.facade.logger.error("[AMP DRM] A key request error was encountered.",t)})}),o.addEventListener("webkitkeyadded",function(t){l.facade.logger.log("[AMP DRM] Decryption key was added to session.")}),o.addEventListener("webkitkeyerror",function(t){l.facade.logger.log("[AMP DRM] A decryption key error was encountered.",t)})}).catch(function(t){l.facade.logger.error(t)}))},__extends(FlashPluginsInitializedCommand,puremvc.SimpleCommand),FlashPluginsInitializedCommand.prototype.execute=function(t){setTimeout(this.facade.pluginsinitialized.bind(this.facade),0)},__extends(FlashStartCommand,PlayerCommand),FlashStartCommand.prototype.execute=function(t){this.player.started=!0,this.sendNotification(Notifications.STARTED,t.getBody()),this.sendNotification(Notifications.PLAY,t.getBody())},__extends(ChangePlaybackTargetCommand,PlayerCommand),ChangePlaybackTargetCommand.prototype.execute=function(t){var e;e=t.getBody(),this.applicationState.setPlaybackTarget(e),"amp"!==e?this.applicationState.getPlayState()!==PlayState.PAUSED&&this.facade.pause():this.applicationState.getPlayState()===PlayState.PLAYING&&this.facade.play()},__extends(BufferingChangeCommand,PlayerEventCommand),BufferingChangeCommand.prototype.execute=function(t){var e;e=t.getBody(),this.applicationState.getBuffering()!==e&&(this.applicationState.setBuffering(e),BufferingChangeCommand.__super__.execute.call(this,t))},__extends(LocalizationWrapper,puremvc.Mediator),LocalizationWrapper.prototype.player=null,LocalizationWrapper.prototype.config=null,LocalizationWrapper.prototype.proxy=null,LocalizationWrapper.NAME="LocalizationWrapper",LocalizationWrapper.prototype.getString=function(t){return this.proxy.getString(t)},LocalizationWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.CREATE_XML]},LocalizationWrapper.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y;switch(LocalizationWrapper.__super__.handleNotification.call(this,t),c=t.getName(),i=t.getBody(),c){case FlashNotifications.CREATE_FLASH_VARS:n=i.flashvars,i.config,n.locale_setting=this.proxy.getLocaleId();break;case FlashNotifications.CREATE_XML:for(r in e=(h=i.xml).firstChild,null==(l=h.getElementsByTagName("locales")[0])&&(l=h.createElement("locales"),e.appendChild(l)),y=this.proxy.getLocales())for(a in s=y[r],(o=h.createElement("locale")).setAttribute("id",r),l.appendChild(o),s)p=s[a],(d=h.createElement("property")).setAttribute("key",a),u=XMLUtils.createTextContent(h,p),d.appendChild(u),o.appendChild(d)}},__extends(ModuleMediator,puremvc.Mediator),ModuleMediator.prototype.config=null,ModuleMediator.prototype.cssPrefix=null,ModuleMediator.prototype.classList=null,ModuleMediator.prototype.initializeNotifier=function(t){var e;ModuleMediator.__super__.initializeNotifier.call(this,t),e=this.facade.player||this.facade,this.config=e.retrieveProxy(ModuleProxy.NAME),this.classList=this.classList=new ClassList(this.viewComponent)},__extends(LocalizedMediator,ModuleMediator),LocalizedMediator.prototype.localizationManager=null,LocalizedMediator.prototype.initializeNotifier=function(t){var e;LocalizedMediator.__super__.initializeNotifier.call(this,t),e=this.facade.player||this.facade,this.localizationManager=e.retrieveProxy(LocalizationProxy.NAME)},__extends(ComponentMediator,LocalizedMediator),ComponentMediator.prototype.componentName=null,ComponentMediator.prototype.componentType=null,ComponentMediator.prototype.parent=null,ComponentMediator.prototype.element=null,ComponentMediator.prototype.classList=null,ComponentMediator.prototype.state=null,ComponentMediator.prototype.disabled=!1,ComponentMediator.prototype.onRegister=function(){this.viewComponent=this.createViewComponent(this.parent,this.element),this.classList=this.viewComponent._classList,UI.bindEvents(this.viewComponent,this)},ComponentMediator.prototype.createViewComponent=function(t,e){var i;return i=this.getTypeList(),UI.create(i,t,e)},ComponentMediator.prototype.createMediatorName=function(){var t;return(t=this.getTypeList()).push("mediator"),t.push(UI.createUID()),t.join("-")},ComponentMediator.prototype.getTypeList=function(){var t;return t=[],null!=this.componentName&&t.push(this.componentName),null!=this.componentType&&(t=t.concat(this.componentType)),t},ComponentMediator.prototype.create=function(t,e,i,o){return null==e&&(e=this),!1===e&&(e=null),UI.create(t,e,i,o)},ComponentMediator.prototype.createText=function(t,e,i,o){return null==i&&(i=this),UI.create(t,i,o,e)},ComponentMediator.prototype.setState=function(t){if(t!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=t,null!=this.state&&this.classList.add(this.state),t},ComponentMediator.prototype.getState=function(){return this.state},ComponentMediator.prototype.setDisabled=function(t){if(t!==this.disabled)return this.disabled=t,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),t},ComponentMediator.prototype.getDisabled=function(){return this.disabled},__extends(MediaElementMediator,ComponentMediator),MediaElementMediator.prototype.componentType="media-element",MediaElementMediator.prototype.created=!1,MediaElementMediator.prototype.onRegister=function(){!0!==this.created&&(this.created=!0,MediaElementMediator.__super__.onRegister.call(this))},__extends(LayerMediator,ComponentMediator),LayerMediator.prototype.componentType="layer",LayerMediator.prototype.onRegister=function(){LayerMediator.__super__.onRegister.call(this),this.registerLayer()},LayerMediator.prototype.onRemove=function(){LayerMediator.__super__.onRemove.call(this),this.removeLayer()},LayerMediator.prototype.registerLayer=function(){this.sendNotification(Notifications.ADD_LAYER,this.viewComponent)},LayerMediator.prototype.removeLayer=function(){this.sendNotification(Notifications.REMOVE_LAYER,this.viewComponent)},__extends(VideoLayerMediator,LayerMediator),VideoLayerMediator.prototype.componentName="video",VideoLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAYBACK_CORE_CHANGE]},VideoLayerMediator.prototype.mediator=null,VideoLayerMediator.prototype.mediaElement=null,VideoLayerMediator.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case Notifications.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName()),null!=(null!=e?e.getViewComponent:void 0)?(this.facade.registerMediator(e),this.mediator=e,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=e),null!=this.mediaElement&&(this.facade.setMediaElement(this.mediaElement),this.viewComponent.appendChild(this.mediaElement))}},__extends(PlayerMediator,ComponentMediator),PlayerMediator.prototype.componentType="player",PlayerMediator.prototype.core=null,PlayerMediator.prototype.medium=null,PlayerMediator.prototype.layers=null,PlayerMediator.prototype.ready=!1,PlayerMediator.prototype.onRegister=function(){var t;PlayerMediator.__super__.onRegister.call(this),null!=(t=Utils.getDevice())&&this.classList.add(t),Utils.isTouchDevice()&&this.classList.add("touch")},PlayerMediator.prototype.listNotificationInterests=function(){return[Notifications.DISPLAY_STATE_CHANGE,Notifications.ACTIVE_STATE_CHANGE,Notifications.PLAY_STATE_CHANGE,Notifications.ADD_APPLICATION_STATE,Notifications.REMOVE_APPLICATION_STATE,Notifications.MEDIUM_CHANGE,Notifications.DURATION_CHANGE,Notifications.TEMPORAL_TYPE_CHANGE,Notifications.IS_LIVE,Notifications.ADD_LAYER,Notifications.REMOVE_LAYER,Notifications.READY]},PlayerMediator.prototype.handleNotification=function(t){var e,i,o,n,a,r;switch(i=t.getName(),e=t.getBody(),i){case Notifications.ACTIVE_STATE_CHANGE:case Notifications.PLAY_STATE_CHANGE:case Notifications.DISPLAY_STATE_CHANGE:case Notifications.MEDIUM_CHANGE:r=(a=e).value,null!=(o=a.previous)&&this.classList.contains(o)&&this.classList.remove(o),null!=r&&this.classList.add(r);break;case Notifications.ADD_APPLICATION_STATE:n=e,this.classList.add(n);break;case Notifications.REMOVE_APPLICATION_STATE:n=e,this.classList.remove(n);break;case Notifications.TEMPORAL_TYPE_CHANGE:e.previous&&this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,e.previous),e.value&&this.sendNotification(Notifications.ADD_APPLICATION_STATE,e.value);break;case Notifications.IS_LIVE:!0===e?this.sendNotification(Notifications.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"is-live");break;case Notifications.DURATION_CHANGE:e>3600?this.sendNotification(Notifications.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"long-form");break;case Notifications.ADD_LAYER:this.addLayer(e);break;case Notifications.REMOVE_LAYER:this.removeLayer(e);break;case Notifications.READY:this.initialize(),this.viewCreated()}},PlayerMediator.prototype.initialize=function(){var t,e,i,o;for(this.ready=!0,e=0,i=(o=this.layers).length;e<i;e++)t=o[e],this.viewComponent.contains(t)||this.viewComponent.appendChild(t)},PlayerMediator.prototype.viewCreated=function(){this.sendNotification(Notifications.VIEW_CREATED)},PlayerMediator.prototype.addLayer=function(t){this.layers.push(t),this.ready&&this.viewComponent.appendChild(t)},PlayerMediator.prototype.removeLayer=function(t){var e;this.viewComponent.contains(t)&&this.viewComponent.removeChild(t),(e=this.layers.indexOf(t))>=0&&this.layers.splice(e,1)},__extends(FlashPlayerMediator,PlayerMediator),FlashPlayerMediator.NAME="FlashPlayerMediator",FlashPlayerMediator.prototype.type="flash",FlashPlayerMediator.prototype.listNotificationInterests=function(){return FlashPlayerMediator.__super__.listNotificationInterests.call(this).concat([PluginNotifications.PLUGINS_INITIALIZED])},FlashPlayerMediator.prototype.handleNotification=function(t){var e;switch(e=t.getName(),t.getBody(),e){case Notifications.READY:return void this.viewCreated();case PluginNotifications.PLUGINS_INITIALIZED:return void this.initialize()}FlashPlayerMediator.__super__.handleNotification.call(this,t)},__extends(PlaybackTargetChangeCommand,PlayerEventCommand),PlaybackTargetChangeCommand.prototype.execute=function(t){var e;e="amp"===t.getBody().value?Notifications.REMOVE_APPLICATION_STATE:Notifications.ADD_APPLICATION_STATE,this.sendNotification(e,"remote-playback"),PlaybackTargetChangeCommand.__super__.execute.call(this,t)},__extends(FlashAuthorizedCommand,PlayerEventCommand),FlashAuthorizedCommand.prototype.execute=function(t){var e;FlashAuthorizedCommand.__super__.execute.call(this,t),(e=Utils.clone(this.media.getData())).src=this.media.getSrc(),this.facade.getMediaElement().authenticationComplete({media:e})},__extends(PlaybackCoreProxy,PlaybackProxy),PlaybackCoreProxy.prototype.temporalTypes=null,PlaybackCoreProxy.prototype.supportedTypes=null,PlaybackCoreProxy.prototype.playbackCoreName="default",PlaybackCoreProxy.prototype.config=null,PlaybackCoreProxy.prototype.onRegister=function(){this.mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME)},PlaybackCoreProxy.prototype.getUseMAE=function(){var t;return null!=(t=this.config.mae)&&!1!==t.enabled},PlaybackCoreProxy.prototype.getPlaybackCoreName=function(){return this.playbackCoreName},PlaybackCoreProxy.prototype.getSupportedTypes=function(){return this.supportedTypes||[]},PlaybackCoreProxy.prototype.setSupportedTypes=function(t){return this.supportedTypes=t,t},PlaybackCoreProxy.prototype.getTemporalTypes=function(){return this.temporalTypes||[]},PlaybackCoreProxy.prototype.setTemporalTypes=function(t){return this.temporalTypes=t,t},PlaybackCoreProxy.prototype.canPlayTemporalType=function(t){return-1!==this.getTemporalTypes().indexOf(t)},PlaybackCoreProxy.prototype.canPlayType=function(t){return null!=this.supportedTypes?-1!==this.getSupportedTypes().indexOf(t)?"maybe":"":PlaybackCoreProxy.__super__.canPlayType.call(this,t)},__extends(FlashPlaybackProxy,PlaybackCoreProxy),FlashPlaybackProxy.NAME=PlaybackProxy.NAME,FlashPlaybackProxy.prototype.player=null,FlashPlaybackProxy.prototype.initialized=!0,FlashPlaybackProxy.prototype.playbackCoreName="flash",FlashPlaybackProxy.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"],FlashPlaybackProxy.prototype.getPaused=function(){return this.player.getPaused()},FlashPlaybackProxy.prototype.getEnded=function(){return this.player.getEnded()},FlashPlaybackProxy.prototype.getSeeking=function(){return this.player.getSeeking()},FlashPlaybackProxy.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},FlashPlaybackProxy.prototype.setCurrentTime=function(t){return this.player.setCurrentTime(t),t},FlashPlaybackProxy.prototype.getSrc=function(){return this.player.getSrc()},FlashPlaybackProxy.prototype.setSrc=function(t){return this.player.setSrc(t),t},FlashPlaybackProxy.prototype.getVolume=function(){return this.player.getVolume()},FlashPlaybackProxy.prototype.setVolume=function(t){return this.player.setVolume(t),t},FlashPlaybackProxy.prototype.getMuted=function(){return this.player.getMuted()},FlashPlaybackProxy.prototype.setMuted=function(t){return this.player.setMuted(t),t},FlashPlaybackProxy.prototype.getDuration=function(t){return this.player.getDuration()},FlashPlaybackProxy.prototype.play=function(){this.player.play()},FlashPlaybackProxy.prototype.pause=function(){this.player.pause()},FlashPlaybackProxy.prototype.load=function(){this.player.load()},__extends(FlashPlayer,Player),FlashPlayer.prototype.initialize=function(t,e){var i,o;this.config=t,this.parentModule=e,this.createDefaults(),this.logEvents=!0===(null!=(i=this.config.flash)?i.logEvents:void 0)||"true"===(null!=(o=QueryString["amp-flash-log"])?o.toLowerCase():void 0),FlashPlayer.__super__.initialize.call(this,this.config,this.parentModule)},FlashPlayer.prototype.loadModuleResources=function(t){var e=this;return FlashPlayer.__super__.loadModuleResources.call(this,t).then(function(){var t,i,o,n,a;for(t in o=[],n=function(t,e){i[t]=e.data},i=e.config.locales)"string"==typeof(a=i[t])&&o.push(AMP.addResource({src:e.evaluatePaths(a),type:Utils.mimeTypes.json}).then(n.bind(e,t)).catch(function(t){return Promise.resolve()}));return Promise.all(o)})},FlashPlayer.prototype.pluginsinitialized=function(){var t,e,i,o,n,a,r;n=!0===(null!=(r=(e=this.config.flash||{}).static)?r.enabled:void 0)?e.static:e,o=this.debug&&null!=n.debug?n.debug:n.swf||"amp.swf",e.version,this.evaluatePaths(e.expressInstallSWF),i=this.createParams(e),t=this.createAttributes(e),this.flashvars=this.createFlashVars(e),null==this.flashvars.settings_url&&null!=(a=this.createXML(this.config))&&(this.flashvars.settings_xml=a),t.data=this.evaluatePaths(o),this.createdHandler(Utils.createFlashObject({params:i,attributes:t,vars:this.flashvars},this.getMediaElement().parentNode))},FlashPlayer.prototype.playerType="flash",FlashPlayer.prototype.flashObjectID="flashObject",FlashPlayer.prototype.loaded=!1,FlashPlayer.prototype.flashvars=null,FlashPlayer.prototype._paused=!1,FlashPlayer.prototype._ended=!1,FlashPlayer.prototype._muted=!1,FlashPlayer.prototype.plugins=null,FlashPlayer.prototype.debug=!1,FlashPlayer.prototype.started=!1,FlashPlayer.prototype._displayState=null,FlashPlayer.prototype.logEvents=!1,FlashPlayer.prototype._loop=!1,FlashPlayer.prototype.playback=null,FlashPlayer.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"//sslplayers-vh.akamaihd.net/flash/plugins/osmf/advanced-streaming-plugin/v3.10/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}],FlashPlayer.prototype.flashView=null,FlashPlayer.prototype.createModel=function(){FlashPlayer.__super__.createModel.call(this),this.playback=new FlashPlaybackProxy(this),this.registerProxy(this.playback),this.appState.setRenderMode(RenderMode.FLASH),this.bindings.initialize()},FlashPlayer.prototype.createView=function(){FlashPlayer.__super__.createView.call(this),this.mediator=new FlashPlayerMediator(this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new VideoLayerMediator),this.registerMediator(new OverlayLayerMediator),this.registerMediator(new LocalizationWrapper(this,this.config))},FlashPlayer.prototype.createController=function(){var t,e=this;FlashPlayer.__super__.createController.call(this),null!=(null!=(t=this.config.plugins)?t.react:void 0)&&(this.registerCommand(Notifications.CHANGE_DISPLAY_STATE,ChangeDisplayStateCommand),this.getDisplayState=function(){return e.appState.getDisplayState()},this.setDisplayState=function(t){return e.sendNotification(Notifications.CHANGE_DISPLAY_STATE,t)}),this.registerCommand(PluginNotifications.PLUGINS_INITIALIZED,FlashPluginsInitializedCommand),this.registerCommand(SecurityNotifications.AUTHORIZE,PlayerEventCommand),this.registerCommand(SecurityNotifications.AUTHORIZED,FlashAuthorizedCommand),this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand),this.registerCommand(Notifications.PLAY_STATE_CHANGE,PlayerEventCommand),this.registerCommand(Notifications.START,FlashStartCommand),this.registerCommand(Notifications.STARTED,PlayerEventCommand),this.registerCommand(Notifications.PLAY,PlayerEventCommand),this.registerCommand(Notifications.PLAY_REQUEST,PlayerEventCommand),this.registerCommand(FlashNotifications.FLASH_CREATED,PlayerEventCommand),this.registerCommand(Notifications.CHANGE_PLAYBACK_TARGET,ChangePlaybackTargetCommand),this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,PlaybackTargetChangeCommand),this.registerCommand(Notifications.UPDATE_DATA_BINDINGS,UpdateDataBindingsCommand),this.registerCommand(Notifications.BUFFERING_CHANGE,BufferingChangeCommand),this.registerCommand(FlashNotifications.CREATE_XML,PlayerEventCommand),this.registerCommand(FlashNotifications.CREATE_FLASH_VARS,PlayerEventCommand)},FlashPlayer.prototype.createMediaElement=function(){var t,e;return t=new MediaElementMediator("flash","div"),this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,t),(e=t.getViewComponent()).id=e.name=this.flashObjectID,e},FlashPlayer.prototype.createDefaults=function(){var t,e,i,o,n,a,r,s;if(!(!(null!=(a=this.flashPlugins)?a.length:void 0)>0)){for(e=this.config.resources||[],null!=(null!=(r=this.config.flash)?r.resources:void 0)&&(e=e.concat(this.config.flash.resources)),i=Utils.mimeTypes.swf,o=0,n=(s=this.flashPlugins).length;o<n;o++)null!=(t=s[o])&&0===e.filter(function(e){return e.id===t.id}).length&&(null==t.type&&(t.type=i),e.push(t));this.config.resources=e}},FlashPlayer.prototype.createParams=function(t){var e;return e={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},null!=t.params&&(null!=t.params.allowFullScreen&&(e.allowFullScreen=t.params.allowFullScreen),null!=t.params.allowScriptAccess&&(e.allowScriptAccess=t.params.allowScriptAccess),null!=t.params.wmode&&(e.wmode=t.params.wmode),null!=t.params.bgColor&&(e.bgColor=t.params.bgColor)),"direct"===e.wmode&&/MSIE/.test(navigator.userAgent)&&(e.wmode="transparent"),e},FlashPlayer.prototype.getModules=function(){return this.plugins},FlashPlayer.prototype.createPlugins=function(){var t,e,i,o,n,a,r,s,l,c,d=this;for(o in l=this.getPlayerType(),c=AMP.plugins)if(s=c[o],o in this.config&&null!=this.config[o]&&!1!==this.config[o].enabled)if(null!=(t=s[l]))try{n=this[o]=this.plugins[o]=new t(this,this.config[o]),this.registerMediator(this.plugins[o]),null!=(e="function"==typeof n.getFeatureName?n.getFeatureName():void 0)&&(this[e]=n),null!=n.flashView&&(this.flashView=Utils.override(this.flashView,n.flashView)),this.logger.debug("[AMP] Plugin registered: "+o)}catch(t){this.logger.error("[AMP] Plugin could not be created: "+o+". "+t);continue}else this.logger.debug("[AMP] Plugin could not be found: "+o);for(o in r=[],a=this.config.plugins||{})null!=(i=a[o])&&!1!==i.enabled&&(n=function(e,i,o){return d.loadResources(i.resources).then(function(){if(null==(t=AMP.plugins[o][l]))throw new Error("[AMP] Plugin could not be found: "+o);return t(e,i,o).then(function(t){return d.logger.debug("[AMP] Plugin registered: "+o),{key:o,value:t}})}).catch(function(t){return d.logger.error("[AMP] Plugin could not be created: "+o+". "+t)})},r.push(n.bind(null,this,i,o)));r=r.map(function(t){return t()}),Promise.all(r).then(function(t){var e,i,o;for(null!=d.config.flash.view&&(d.flashView=Utils.override(d.flashView,d.config.flash.view)),i=0,o=t.length;i<o;i++)null!=(e=t[i])&&(d[e.key]=e.value,d.plugins[e.key]=e.value);return d.sendNotification(PluginNotifications.PLUGINS_INITIALIZED,d.plugins)}).catch(function(t){return d.logger.error(t)})},FlashPlayer.prototype.createAttributes=function(t){var e;return e={id:this.flashObjectID,name:this.flashObjectID},null!=t.attributes&&(null!=t.attributes.id&&(e.id=t.attributes.id),null!=t.attributes.name&&(e.name=t.attributes.name)),e},FlashPlayer.prototype.createFlashJSON=function(t,e){var i,o;return null==t&&(t=this.config),t=JSON.stringify(t),t=this.evaluatePaths(t),t=JSON.parse(t),o=function(t,e,o){switch(typeof o){case"string":t[e]=escape(o);break;case"object":i(o)}},(i=function(t){var e,i,n,a;if(t instanceof Array)for(e=n=0,a=t.length;n<a;e=++n)i=t[e],o(t,e,i);else if("object"==typeof t)for(e in t)i=t[e],o(t,e,i)})(t),encodeURIComponent(JSON.stringify(t,null,e))},FlashPlayer.prototype.createFlashVars=function(t){var e,i,o,n,a,r,s,l,c,d,u;if(e={},(n=JSON.parse(JSON.stringify(this.config))).flash=null,delete n.flash,n.locales=null,delete n.locales,n.params=null,delete n.params,n.rules=null,delete n.rules,e.settings_json=this.createFlashJSON(n),null!=this.config.autoplay&&(e.auto_play=this.config.autoplay),null!=this.config.rules&&Utils.mergeRules(this.config.rules),e.hinting_rules=escape(JSON.stringify(Utils.rules)),null!=this.config.volume&&(e.volume=Utils.clamp(this.config.volume,0,1)),null!=this.config.target&&(e.external_target=this.config.target),null!=this.config.name&&(e.core_player_name=this.config.name),null!=this.config.domain&&(e.embed_domain=e.domain=this.config.domain),this._loop=e.auto_replay=!0===this.config.loop,null!=this.config.fullscreen&&(e.fullscreen_enabled=!1!==this.config.fullscreen.enabled&&this.config.fullscreen.mode!==FullscreenMode.EXTERNAL),null!=this.config.titlebar&&(e.titlebar_enabled=!1!==this.config.titlebar.enabled),null!=this.config.params&&(e.params=escape(JSON.stringify(this.config.params))),null!=this.config.version&&(e.context_menu_label=this.config.version),null!=(null!=(a=this.config.controls)?a.displaySceneMarkers:void 0)&&(e.displaySceneMarkers=this.config.controls.displaySceneMarkers),null!=this.config.media&&(this.mediaProxy.setData(this.config.media),null!=this.config.media.src&&(this.setSrc(this.config.media.src),e.video_url=escape(this.config.media.src)),null!=this.config.media.source&&this.config.media.source.length>0&&(this.setSource(this.config.media.source),e.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),e.medium=this.config.media.medium),null!=this.config.media.title&&(e.title=encodeURIComponent(this.config.media.title)),null!=this.config.media.poster&&(e.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(e.temporalType=this.config.media.temporalType)),"audio"===this.getMedium()&&(e.controls=!0,e.auto_hide=-1),null!=(null!=(r=this.config.ima)&&null!=(s=r.overlay)?s.delay:void 0)&&(e.overlay_ad_delay=this.config.ima.overlay.delay),null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(e.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(e.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(e.ticker_speed=this.config.ticker.speed)),e.show_play_button_overlay=!1,e.auto_play_list=!1,e.next_video_timer=0,null==e.context_menu_mode&&(e.context_menu_mode=!0===this.debug?"long":"short"),null!=(null!=(l=this.config.flash)&&null!=(c=l.view)&&null!=(d=c.elements)&&null!=(u=d.loadingView)?u.attributes:void 0)){for(o in i="",this.config.flash.view.elements.loadingView.attributes)i+=o+":"+this.config.flash.view.elements.loadingView.attributes[o]+" ";e.loadingView=i}return this.sendNotification(FlashNotifications.CREATE_FLASH_VARS,{flashvars:e,config:this.config}),e=Utils.override(e,t.vars)},FlashPlayer.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P,_,A,E,N;if(null==(null!=t&&null!=(A=t.flash)?A.xml:void 0)&&(null==t.flash&&(t.flash={}),t.flash.xml="<application></application>"),(g=XMLUtils.parse(t.flash.xml)).childNodes.length>1&&g.removeChild(g.firstChild),this.sendNotification(FlashNotifications.CREATE_XML,{config:t,xml:g}),l=function(t){var e,i,o,a,r,s,c,d;if(i=[],(a=t.resources)instanceof Array&&(null!=a?a.length:void 0)>0)for(s=0,c=a.length;s<c;s++)(o=a[s]).type===h&&(o=Utils.clone(o),!0===n?null!=o.main&&""!==o.main?(o.src=o.main,o.type="static"):o.type="dynamic":null!=o.src&&""!==o.src?o.type="dynamic":(o.src=o.main,o.type="static"),delete o.main,i.push(o));for(e in t)r=t[e],"flash"!==e&&null!=(a=null!=r?r.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(l(r)));for(e in d=t.plugins)null!=(a=null!=(r=d[e])?r.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(l(r)));return i},h=Utils.mimeTypes.swf,u=l(this.config),n=!0===(null!=(E=t.flash.static)?E.enabled:void 0),(null!=u?u.length:void 0)>0)for((s=g.getElementsByTagName("plugins")).length<1?(s=g.createElement("plugins"),g.firstChild.appendChild(s)):s=s[0],f=0,P=u.length;f<P;f++)if(!1!==(d=u[f]).enabled){for(a in r=g.createElement("plugin"),d)y=d[a],"loaded"!==a&&("src"!==a?r.setAttribute(a,""+y):("id"===a&&"AkamaiAdvancedStreamingPlugin"===y&&!0===this.debug&&(y=y.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),r.appendChild(XMLUtils.createTextContent(g,y))));s.appendChild(r)}if(c=function(t,e){var i,o,n,a,r,s;if(null!=t.attributes)for(o in a=t.attributes)n=a[o],e.setAttribute(o,""+n);if(null!=t.elements)for(o in r=t.elements)null!=(n=r[o])&&((i=g.createElement("element")).setAttribute("id",o),"state"!==i.id&&(c(n,i),e.appendChild(i)));if(null!=t.state){if(i=g.createElement("state"),t.state.attributes)for(o in s=t.state.attributes)null!=(n=s[o])&&i.setAttribute(o,""+n);e.appendChild(i)}return e},null==(m=g.getElementsByTagName("view")[0])&&(m=g.createElement("view"),g.firstChild.appendChild(m)),c(this.flashView,m),null!=(null!=(N=this.config.fullscreen)?N.mode:void 0))for(C=0,_=(o=g.getElementsByTagName("element")).length;C<_;C++)"fullscreenBtn"===(i=o[C]).getAttribute("id")&&i.setAttribute("action","external");return e=(e=(p=XMLUtils.serialize(g)).match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||p).replace(/[\n\r\t]/g,""),e=this.evaluatePaths(e),encodeURIComponent(e)},FlashPlayer.prototype.createdHandler=function(t){var e,i,o=this;e=this.getMediaElement().id,i=document.getElementById(e),this.setMediaElement(i),i.className=Namespace.PREFIX+MediaElementMediator.prototype.componentType,i.eventHandler=function(t,e){return o.eventHandler(t,e)},this.sendNotification(FlashNotifications.FLASH_CREATED),null!=this.getMedium()&&this.setMedium(this.getMedium())},FlashPlayer.prototype.eventHandler=function(t,e){var i,o,n,a,r,s,l,c,d,u,p=this;this.logEvents&&!this.excludedFlashEvents.test(t)&&this.logger.log("[AMP FLASH EVENT] "+t,e);try{switch(t){case FlashNotifications.INITIALIZED:r=a="ready";break;case FlashNotifications.RESET:null==e&&(a="ready"),this.started=!1;break;case FlashNotifications.LOADING:r="loadstart";break;case FlashNotifications.PLAYER_ERROR:case FlashNotifications.MEDIA_ERROR:r=a="error";break;case FlashNotifications.FEED_LOADED:e=JSON.parse(e),null!=(n=null!=(l=(new MRSSHelper).createFeed(e))&&null!=(c=l.item)?c[0]:void 0)&&this.mediaProxy.setData(n);break;case FlashNotifications.FEED_UPDATED:r="mediachange",e=this.getMedia(),s=!0;break;case FlashNotifications.ERROR_STREAM_NOT_FOUND:r=a="error";break;case FlashNotifications.CAPABILITY_CHANGE:"canPlayChange"===(o=e.type)&&!0===e.enabled?(r="canplay",this.loaded=!0):"canSeekChange"===o&&!0===e.enabled?r="canplaythrough":"temporalChange"===o&&!0===e.enabled&&(r="loadedmetadata",this.started||this.sendNotification(Notifications.START,e));break;case FlashNotifications.PLAYING:this.started||this.sendNotification(Notifications.START,e),r=a="playing",this._ended=!1,this._paused=!1,!0===this.appState.getSeeking()&&(this.appState.setSeeking(!1),this.sendNotification(Notifications.SEEKED),this.sendNotification(Notifications.DISPATCH_EVENT,new Event("seeked")));break;case FlashNotifications.ELEMENT_EVENT:"fullscreenBtn"===e.element&&"click"===e.type&&(null!=(d=this.config)&&null!=(u=d.fullscreen)?u.mode:void 0)===FullscreenMode.EXTERNAL&&(a=this.getDisplayState()===DisplayState.FULL_SCREEN?DisplayState.NORMAL:DisplayState.FULL_SCREEN,this.setDisplayState(a));break;case FlashNotifications.PLAY_REQUEST:this.sendNotification(Notifications.PLAY_REQUEST),this.setPlayState("playing"),r=Notifications.MEDIA_SEQUENCE_STARTED,this.loaded=!0,this._ended=!1;break;case FlashNotifications.PLAY:"paused"!==this.getPlayState()&&this.started&&this.sendNotification(Notifications.PLAY,e);break;case FlashNotifications.ENDED:r=Notifications.ENDED;break;case FlashNotifications.MEDIA_SEQUENCE_ENDED:r=Notifications.MEDIA_SEQUENCE_ENDED,a=Notifications.ENDED,this._ended=!0;break;case FlashNotifications.PAUSED:r="pause",a="paused",this._paused=!0;break;case FlashNotifications.BUFFERING:"ended"!==this.className&&(r=a="waiting");break;case FlashNotifications.BUFFERING_CHANGE:return void this.sendNotification(Notifications.BUFFERING_CHANGE,e);case FlashNotifications.DURATION_CHANGE:isNaN(e.time)||(0===e.time&&this.sendNotification(Notifications.MEDIA_SEQUENCE_ABORTED),r="durationchange",e=e.time,setTimeout(function(){p.setCues(p.getCues().slice())},0));break;case FlashNotifications.VOLUME_CHANGE:r="volumechange",e=e.volume;break;case FlashNotifications.TIME_UPDATE:r="timeupdate",e=e.currentTime;break;case FlashNotifications.SEEKING_CHANGE:if(!1===this.appState.getSeeking()&&!1===e.seeking)return;r=e.seeking?"seeking":"seeked",this.appState.setSeeking(e.seeking),e.seeking&&(a="seeking");break;case FlashNotifications.FULLSCREEN_CHANGE:r="fullscreenchange",e="fullScreen"===e.displayState,this.applyDisplayState(e?DisplayState.FULL_SCREEN:DisplayState.NORMAL);break;case FlashNotifications.FAIL_OVER_ATTEMPT:r="failoverattempt",e=e;break;case FlashNotifications.ERROR:t=null;break;case FlashNotifications.AUTHORIZE:r=SecurityNotifications.AUTHORIZE;break;case FlashNotifications.TIMED_METADATA:r=Notifications.TIMED_METADATA,e={startTime:e.time,endTime:e.time,data:e};break;case FlashNotifications.MEDIA_PLAYER_ID3_UPDATED:r=Notifications.TIMED_METADATA,e={startTime:e.time,endTime:e.time,data:window.atob(e)}}null!=t&&t!==r&&((o=new Event(t,e)).dispatcher="FLASH",this.sendNotification(Notifications.DISPATCH_EVENT,o),this.sendNotification(t,e)),null!=r&&("error"===r&&(i=e.error||e,this.logError("Flash Error",i)),this.sendNotification(r,e),this.sendNotification(Notifications.DISPATCH_EVENT,new Event(r,e))),null!=s&&this.sendNotification(Notifications.UPDATE_DATA_BINDINGS),null!=a&&this.setPlayState(a)}catch(i){this.logError("Event Error: "+t,i)}},FlashPlayer.prototype.logError=function(t,e){this.logger.error("[AMP FLASH ERROR]",t,e)},FlashPlayer.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/,FlashPlayer.prototype.logFlashEvents=!1,FlashPlayer.prototype.logEvent=function(t){"FLASH"===t.dispatcher&&!1===this.logFlashEvents||!0===this.excludedFlashEvents.test(t.type)||FlashPlayer.__super__.logEvent.call(this,t)},FlashPlayer.prototype.setPlayState=function(t){return this.sendNotification(Notifications.CHANGE_PLAY_STATE,t),t},FlashPlayer.prototype.getPlayState=function(){return this.appState.getPlayState()},FlashPlayer.prototype.setMedia=function(t){var e=this;return null!=this.getPlayState()&&this.setPlayState("ready"),this.mediaProxy.transform(t).then(function(i){return t=i,e.mediaProxy.setData(t),null!=t.src&&e.setSrc(t.src),null!=t.source&&t.source.length>0&&e.setSource(t.source),e.sendNotification(Notifications.MEDIA_CHANGE,t),e.load(e.mediaProxy.getData())}).catch(function(t){return e.sendNotification(Notifications.ERROR,t)}),t},FlashPlayer.prototype.getMedia=function(){return this.mediaProxy.getData()},FlashPlayer.prototype.load=function(){var t,e,i;if(i=this.mediaProxy.getData(),this.security.setMedia(i),this.security.getAuthorized()){for(e in this.loaded=!0,null==(t=Utils.clone(i)).autoplay&&(t.autoplay=this.config.autoplay),t)void 0===t[e]&&delete t[e];this.getMediaElement().loadURL(this.mediaProxy.getSrc(),t)}else this.sendNotification(SecurityNotifications.AUTHORIZE,{media:i})},FlashPlayer.prototype.play=function(){this.loaded||this.load(),this.getMediaElement().unpause()},FlashPlayer.prototype.setMuted=function(t){this._muted=t;try{!0===t?(this.getMediaElement().unmute(),this.getMediaElement().mute()):this.getMediaElement().unmute()}catch(t){this.logError("Flash muted error",t)}return t},FlashPlayer.prototype.getMuted=function(){return this._muted},FlashPlayer.prototype.getLoop=function(){return this._loop},FlashPlayer.prototype.getSrc=function(t){return this.getMediaElement().getURL()},FlashPlayer.prototype.setSrc=function(t){return this.mediaProxy.setSrc(t),this.loaded=!1,this.setMedium(Utils.getMimeType(t)),t},FlashPlayer.prototype.setAutoplay=function(t){return this.getMediaElement().setPlayerProperty("autoplay",t),t},FlashPlayer.prototype.getAutoplay=function(){return this.getMediaElement().getPlayerProperty("autoplay")},FlashPlayer.prototype.getMedium=function(){return this.mediaProxy.getData().medium},FlashPlayer.prototype.setMedium=function(t){var e,i;if(t!==(e=this.mediaProxy.getData()).medium)return null!=e.medium&&(i="medium-"+e.medium),e.medium=/audio/.test(t)?"audio":"video",this.sendNotification(Notifications.MEDIUM_CHANGE,{value:"medium-"+e.medium,previous:i}),t},FlashPlayer.prototype.setSource=function(t){var e,i=this;if(!(null==t||t.length<1)){if(this.mediaProxy.getData().source=t,this.loaded=!1,null==(null!=(e=Utils.selectSource(t,function(t){return i.canPlayType(t)}))?e.src:void 0)||""===e.src)throw new Error("No valid source could be found");return this.setSrc(e.src),"undefined"!=typeof type&&null!==type&&this.setMedium(type),t}},FlashPlayer.prototype.getSource=function(){return this.mediaProxy.getData().source},FlashPlayer.prototype.getSeeking=function(){return this.appState.getSeeking()},FlashPlayer.prototype.getPaused=function(){return this._paused},FlashPlayer.prototype.getEnded=function(){return this._ended},FlashPlayer.prototype.getFlashXML=function(){var t,e;e=decodeURIComponent(this.flashvars.settings_xml),t=XMLUtils.parse(e);try{t.toString=function(){return e}}catch(t){}return t},FlashPlayer.prototype.getFlashVars=function(){return this.flashvars},FlashPlayer.prototype.getFlashJSON=function(){return JSON.parse(decodeURIComponent(this.flashvars.settings_json))},FlashPlayer.prototype.canPlayType=function(t){return __indexOf.call(Utils.flashTypes,t)>=0?"maybe":""},FlashPlayer.prototype.replay=function(){this.getMediaElement().replay()},FlashPlayer.prototype.pause=function(){this.getMediaElement().pause()},FlashPlayer.prototype.end=function(){this.getMediaElement().stopPlayer()},FlashPlayer.prototype.getCurrentTime=function(){var t;return"function"==typeof(t=this.getMediaElement()).getCurrentTime?t.getCurrentTime():void 0},FlashPlayer.prototype.setCurrentTime=function(t){return this.getMediaElement().jumpToTime(t),t},FlashPlayer.prototype.getParams=function(){return this.getMediaElement().getParams()},FlashPlayer.prototype.setParams=function(t){return this.getMediaElement().setParams(t),t},FlashPlayer.prototype.getVolume=function(){var t;return(null!=(t=this.getMediaElement())&&"function"==typeof t.getVolume?t.getVolume():void 0)||0},FlashPlayer.prototype.setVolume=function(t,e){return this.getMediaElement().setVolume(t,e||""),t},FlashPlayer.prototype.getDuration=function(){var t;return"function"==typeof(t=this.getMediaElement()).getDuration?t.getDuration():void 0},FlashPlayer.prototype.getDisplayState=function(){return this._displayState},FlashPlayer.prototype.setDisplayState=function(t){var e;if(t!==this._displayState&&(this.applyDisplayState(t),(null!=(e=this.config.fullscreen)?e.mode:void 0)!==FullscreenMode.EXTERNAL))return this._displayState===DisplayState.FULL_SCREEN?this.getMediaElement().enterFullScreen():this.getMediaElement().exitFullScreen(),t},FlashPlayer.prototype.applyDisplayState=function(t){var e;t!==this._displayState&&(e={value:t,previous:this._displayState},this._displayState=t,this.sendNotification(Notifications.DISPLAY_STATE_CHANGE,e),this.sendNotification(Notifications.DISPATCH_EVENT,new Event("fullscreenchange",this._displayState===DisplayState.FULL_SCREEN)))},FlashPlayer.prototype.enterFullScreen=function(){this.setDisplayState(DisplayState.FULL_SCREEN)},FlashPlayer.prototype.exitFullScreen=function(){this.setDisplayState(DisplayState.NORMAL)},FlashPlayer.prototype.recordContentChange=function(t){this.getMediaElement().recordContentChange(t)},FlashPlayer.prototype.setQuality=function(t){return this.getMediaElement().setQuality(t)},FlashPlayer.prototype.getQuality=function(){var t;try{t=this.getMediaElement().getQuality()}catch(t){}return t},FlashPlayer.prototype.getQualityLevels=function(){var t,e;try{t=("function"==typeof(e=this.getMediaElement()).getQualityLevels?e.getQualityLevels():void 0)||[]}catch(e){t=[]}return t},Events={LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",BUFFERING_CHANGE:"bufferingchange",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",PLAYBACK_RATE_CHANGE:"playbackratechange",SETTINGS_CHANGE:"settingschange",QUALITY_CHANGE:"qualitychange",QUALITY_CHANGING:"qualitychanging",QUALITY_MODE_CHANGE:"qualitymodechange",QUALITY_LEVELS_LOADED:"qualitylevelsloaded",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",AUTOPLAY_BLOCKED:"autoplayblocked",LANGUAGE_CHANGE:"languagechange",TIMED_METADATA:"timedmetadata",CUES_CHANGE:"cueschange",VIEW_CREATED:"viewcreated",MUTE_CHANGE:"mutechange",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",DESTROY:"destroy",init:function(){var t,e;for(t in this.values=[],this)e=this[t],"values"!==t&&"init"!==t&&this.values.push(e)}},Events.init(),__extends(ModuleAdapter,puremvc.Mediator),ModuleAdapter.prototype.module=null,ModuleAdapter.prototype.mediator=null,ModuleAdapter.prototype.initializeNotifier=function(t){var e,i=this;ModuleAdapter.__super__.initializeNotifier.call(this,t),null!=(e=this.module.listNotificationPublications())&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return e},this.mediator.handleNotification=function(t){i.facade.sendNotification(t.getName(),t.getBody(),t.getType())})},ModuleAdapter.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)},ModuleAdapter.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMediator(this.mediator)},ModuleAdapter.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()},ModuleAdapter.prototype.handleNotification=function(t){this.module.sendNotification(t.getName(),t.getBody(),t.getType())},DataBinding.SINGLE=/^\s*[#\$]{([^\$#{}]+)}\s*$/,DataBinding.TOKEN=/[#\$]{([^\$#}]*)}/g,DataBinding.eval=function(t,e){var i=this;if(null==t)return t;if(this.SINGLE.test(t))try{return this.exec(t.replace(this.SINGLE,"$1"),e)}catch(e){return t}return t.replace(this.TOKEN,function(t,o,n,a){try{return i.exec(o,e)}catch(e){return t}})},DataBinding.exec=function(t,e){return new Function("with (this) { return "+t+" }").bind(e)()},DataBinding.evaluateBindings=function(t,e,i){var o,n=this;if(null==i&&(i=!0),null!=t){if("object"==typeof t){if(i=!0===i?JSON.parse(JSON.stringify(t)):t,t instanceof Array)return i.map(function(t){return n.evaluateBindings(t,e,!1)});for(o in t={},i)t[o]=this.evaluateBindings(i[o],e,!1);return t}return"string"==typeof t?this.eval(t,e):t}},__extends(DispatchEventCommand,puremvc.SimpleCommand),DispatchEventCommand.prototype.execute=function(t){var e;(e=t.getBody()).player=this.facade.player||this.facade,this.facade.dispatchEvent(e)};var Notifications={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",CHANGE_SETTINGS:"changesettings",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",AUTOPLAY_CHANGE:"autoplaychange",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",init:function(){var t,e;for(t in Events)e=Events[t],"values"!==t&&"init"!==t&&(this[t]=e)}};function Config(t){var e,i,o,n;for(i in null==t&&(t={}),null==akamai.amp.AMP.plugins.controls&&(o={plugins:{react:{resources:[{src:"https://unpkg.com/react@15/dist/react.min.js",debug:"https://unpkg.com/react@15/dist/react.js",type:"text/javascript"},{src:"https://unpkg.com/react-dom@15/dist/react-dom.min.js",debug:"https://unpkg.com/react-dom@15/dist/react-dom.js",type:"text/javascript"},{src:"https://unpkg.com/prop-types/prop-types.min.js",debug:"https://unpkg.com/prop-types/prop-types.min.js",type:"text/javascript"},{src:"#{paths.plugins}react/React.min.css",debug:"#{paths.plugins}react/React.css",type:"text/css"},{src:"#{paths.plugins}react/React.min.js",debug:"#{paths.plugins}react/React.js",type:"text/javascript"}],autoHide:3}}},t=Utils.override(o,t)),e=Utils.override(Config.defaults,t),!0===/amp\-debug\=true/.test(location.search.toLowerCase())&&(e.debug=!0),"object"==typeof QueryString.amp&&(e=Utils.override(e,QueryString.amp)),e.mode=Utils.getPlaybackMode(e.mode),9===Utils.getIEVersion()&&(e.plugins.react=null,e.flash.view=Utils.override(e.flash.view,Config.flashView)),e.version=AMP.getVersion(),e)n=e[i],this[i]=n}Notifications.init(),Config.create=function(t){return new Config(t)},Config.defaults={paths:{base:"../",root:"../",player:"../amp.premier/",plugins:"../akamai/amp/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.premier.css",type:"text/css",async:!0}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},attributes:{},settings:{},autoplay:!0,loop:!1,playsinline:null,muted:null,target:"_blank",domain:"akamai.com",fullscreen:{},contextmenu:{},captioning:{},controls:{},playoverlay:{},hls:{resources:[{type:"text/javascript",src:"#{paths.resources}js/hls.min.js",debug:"#{paths.resources}js/hls.js"}],quality:{startLevel:-1},data:{enableWorker:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v2.6.2/dash.all.min.js",debug:"//cdn.dashjs.org/v2.6.2/dash.all.debug.js"}],buffer:1},flash:{swf:"#{paths.player}AkamaiPremierPlayer.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf",expressInstallSWF:"#{paths.player}playerProductInstall.swf",static:{enabled:!1,swf:"#{paths.player}AkamaiPremierPlayer-static.swf",debug:"#{paths.player}AkamaiPremierPlayer-static-debug.swf"},vars:{core_player_name:"amp.premier",mbr_starting_index:2,use_last_known_bitrate:!1,use_netsession_client:!1,netsession_install_prompt_frequency_secs:-1,ad_server_timeout:20,ad_control_enabled:!0,dvr_enabled:1,branding_preload:"none",hds_live_low_latency:!0,fullscreen_enabled:!0,show_feature_bar:!1,suppress_events:"mediaPlayerViewInitialized",hds_fragment_retry_data_gap_threshold:20},view:{attributes:{skin:"#{paths.player}amp.chromeless.assets.swf"},elements:{controls:{},endSlate:{attributes:{enabled:!1,hideElements:"brandingLogo|viewAll"}},loadingView:{attributes:{enabled:!1,style:"backgroundColor: 'rgba(0, 0, 0, 0)'; color: 'rgba(0, 0, 0, 0)'",radius:0}}}}},locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PLAY:"Play",MSG_REWIND:"Rewind",MSG_PLAYBACK_RATE:"Playback Rate",MSG_FULLSCREEN:"Fullscreen",MSG_ENTER_FULLSCREEN:"Enter Fullscreen",MSG_EXIT_FULLSCREEN:"Exit Fullscreen",MSG_MUTE:"Mute",MSG_JUMP_BACK:"Jump Back",MSG_JUMP_AHEAD:"Jump Ahead",MSG_VOLUME:"Volume",MSG_REPLAY:"Replay",MSG_SETTINGS:"Settings",MSG_SHARE:"Share",MSG_CLOSED_CAPTIONING:"Closed Captioning",MSG_SLIDER:"Slider",MSG_SEEK:"Seek",MSG_OF:"of",MSG_AD:"Ad",MSG_PREVIEW:"Preview",MSG_CURRENT:"Current",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_ERROR:"Error",MSG_ERROR_ABORTED:"Media Aborted",MSG_ERROR_DECODE:"Decode Error",MSG_ERROR_NETWORK:"Network Error",MSG_ERROR_SRC:"Source not supported",MSG_ERROR_DEFAULT:"An error has occured",MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CC_PREVIEW_TEXT:"Lorem ipsum dolor sit amet..",MSG_EN:"English",MSG_ENG:"English",MSG_ES:"Spanish",MSG_SPA:"Spanish",MSG_DE:"German",MSG_DEU:"German",MSG_GER:"German",MSG_FR:"French",MSG_FRE:"French",MSG_FRA:"French",MSG_IT:"Italian",MSG_ITA:"Italian",MSG_RU:"Russian",MSG_RUS:"Russian",MSG_ZH:"Chinese",MSG_ZHO:"Chinese",MSG_CHI:"Chinese",MSG_JA:"Japanese",MSG_JPN:"Japanese",MSG_KO:"Korean",MSG_KOR:"Korean",MSG_CHROMECAST_MESSAGE:"Video playing on another screen",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended",MSG_VIEWER_ID:"Viewer ID: ",MSG_SIGN_IN:"Sign In",MSG_PREVIEW_INFO:"Free Preview",MSG_PREVIEW_EXPIRES:"Expires in",MSG_UNKNOWN:"Unknown"},es:"#{paths.player}es.json",fr:"#{paths.player}fr.json"}},Config.flashView={attributes:{skin:"#{paths.player}premier.assets.swf"},elements:{infoOverlay:{attributes:{style:"top: 0px;"}},endSlate:{attributes:{enabled:!0,hideElements:"brandingLogo|viewAll"}},replayView:{},bufferingView:{},controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:{},playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}};var DisplayState={NORMAL:"normal",FULL_SCREEN:"full-screen"};function DataBoundConfigurationProxy(t){DataBoundConfigurationProxy.__super__.constructor.call(this,t),this.value={}}__extends(DataBoundConfigurationProxy,ModuleProxy),DataBoundConfigurationProxy.NAME=ModuleProxy.NAME,DataBoundConfigurationProxy.prototype.bindings=null,DataBoundConfigurationProxy.prototype.configurationName=null,DataBoundConfigurationProxy.prototype.contextName=null,DataBoundConfigurationProxy.prototype.contextData=null,DataBoundConfigurationProxy.prototype.value=null,DataBoundConfigurationProxy.prototype.getConfigurationName=function(){return this.configurationName},DataBoundConfigurationProxy.prototype.getConfigurationData=function(){return this.value||{}},DataBoundConfigurationProxy.prototype.getContextName=function(){return this.contextName},DataBoundConfigurationProxy.prototype.getContextData=function(){return this.contextData},DataBoundConfigurationProxy.prototype.onRegister=function(){var t;t=this.facade.player||this.facade,null==this.getConfigurationName()&&(this.configurationName=this.facade.moduleName),this.bindings=t.retrieveProxy(DataBindingProxy.NAME),this.bindings.registerConfiguration(this),null!=this.getContextName()&&(this.bindings.registerContext(this),this.value=DataBinding.evaluateBindings(this.data,this.bindings.getData()))},DataBoundConfigurationProxy.prototype.setData=function(t){var e,i,o;for(e in null==t&&(t={}),this.data={},o=this.getDefaults())i=o[e],this.data[e]=e in t?t[e]:i;return this.data},DataBoundConfigurationProxy.prototype.getValue=function(t){return this.bindings.update(),this.value[t]=DataBinding.evaluateBindings(this.data[t],this.bindings.getData()),this.value[t]},DataBoundConfigurationProxy.prototype.compile=function(t,e){return null==e&&(e=!1),null==t&&(t=this.bindings.getData()),null!=this.contextName&&null!=this.contextData&&((t=Utils.clone(t))[this.contextName]=this.contextData),this.value=DataBinding.evaluateBindings(this.data,this.bindings.getData()),this.value};var SecurityNotifications={AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",AUTHENTICATION_FAILED:"authenticationfailed",AUTHENTICATE:"authenticate",AUTHENTICATED:"authenticated",AUTHORIZATION_EXPIRED:"authorizationexpired"};function EventHandler(t,e,i){var o;this.target=t,this.type=e,this.handler=i,this.trigger=__bind(this.trigger,this),EventHandler.instances.push(this),this.types=[],o=this.type,__indexOf.call(EventHandler.EVENTS,o)>=0?Utils.isTouchDevice()?(this.types.push(EventHandler.TOUCH_EVENTS[this.type]),this.type===EventHandler.TOUCH_EVENTS[1]&&this.types.push(EventHandler.TOUCH_EVENTS[4])):this.types.push(EventHandler.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type),this.bind()}function SettingsMediator(){SettingsMediator.__super__.constructor.call(this,this.NAME),this.namespace="akamai_amp",this.defaults={volume:1,captions:{visible:!1,fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"painton",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"}}}function ChangeSettingsCommand(){ChangeSettingsCommand.__super__.constructor.call(this)}function ConfigurationProxy(t){this.defaults=Config.defaults,ConfigurationProxy.__super__.constructor.call(this,t)}function AudioPlaybackProxy(){AudioPlaybackProxy.__super__.constructor.call(this)}function FPS(){}function ParamsProxy(t){ParamsProxy.__super__.constructor.call(this,t)}function DVRPlaybackProxy(){DVRPlaybackProxy.__super__.constructor.call(this)}function DataBindingContext(){DataBindingContext.__super__.constructor.call(this),null==this.contextName&&(this.contextName=this.constructor.NAME)}function PlayerProxy(t,e){this.defaultPlaybackCore=t,this.getPlaybackOrder=e,PlayerProxy.__super__.constructor.call(this),this.playbackCoreMap=[],null==this.getPlaybackOrder&&(this.getPlaybackOrder=function(t){if(/Edge|Android/.test(navigator.userAgent))return["audio","hls","dash","dvr","default"]})}function MediaProxy(t){var e;this.data={metadata:{}},this.transforms=[this.defaultMediaTransform()],(null!=(e=t.mediaTransforms)?e.length:void 0)>0&&(this.transforms=this.transforms.concat(t.mediaTransforms)),MediaProxy.__super__.constructor.call(this)}function SecurityProxy(){SecurityProxy.__super__.constructor.call(this,this.constructor.NAME,{}),this.setupHDN1(),Object.defineProperties(this,{authorized:{get:this.getAuthorized,enumerable:!0,configurable:!1}})}EventHandler.PRESS=0,EventHandler.RELEASE=1,EventHandler.MOVE=2,EventHandler.CLICK=3,EventHandler.CONTEXTMENU=4,EventHandler.HOVER=5,EventHandler.HOVEROUT=6,EventHandler.EVENTS=[EventHandler.PRESS,EventHandler.RELEASE,EventHandler.MOVE,EventHandler.CLICK,EventHandler.CONTEXTMENU,EventHandler.HOVER,EventHandler.HOVEROUT],EventHandler.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu","mouseover","mouseout"],EventHandler.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"],EventHandler.instances=[],EventHandler.create=function(t,e,i){return new EventHandler(t,e,i)},EventHandler.bind=function(t,e){var i,o,n,a,r;for(i=n=0,a=(r=EventHandler.instances).length;n<a;i=++n)(o=r[i]).target===t&&(null!=e&&o.type!==e||o.bind())},EventHandler.unbind=function(t,e){var i,o,n,a,r;for(i=n=0,a=(r=EventHandler.instances).length;n<a;i=++n)(o=r[i]).target===t&&(null!=e&&o.type!==e||o.unbind())},EventHandler.clear=function(t,e){var i,o,n,a,r;for(i=n=0,a=(r=EventHandler.instances).length;n<a;i=++n)(null!=(o=r[i])?o.target:void 0)===t&&(null!=e&&o.type!==e||(o.clear(),EventHandler.instances.splice(i,1)))},EventHandler.prototype.types=null,EventHandler.prototype.bind=function(){var t,e,i,o;for(e=0,i=(o=this.types).length;e<i;e++)t=o[e],null!=this.target.addEventListener?this.target.addEventListener(t,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+t,this.trigger)},EventHandler.prototype.unbind=function(){var t,e,i,o;for(e=0,i=(o=this.types).length;e<i;e++)t=o[e],null!=this.target.removeEventListener?this.target.removeEventListener(t,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+t,this.trigger)},EventHandler.prototype.clear=function(){this.unbind(),this.target=null,this.handler=null,this.type=null,this.types=null},EventHandler.prototype.trigger=function(t){this.handler(t)},__extends(SettingsMediator,puremvc.Mediator),SettingsMediator.NAME="SettingsMediator",SettingsMediator.prototype.onRegister=function(){var t,e,i;null!=(t=this.facade.retrieveProxy(ModuleProxy.NAME).getSettings()||{}).namespace&&(this.namespace=t.namespace),this.settings=Utils.override(t.defaults,this.defaults);try{null!=(e=localStorage.getItem(this.namespace))&&(i=JSON.parse(e))}catch(t){}this.save(i)},SettingsMediator.prototype.listNotificationInterests=function(){return[Notifications.READY,Notifications.VOLUME_CHANGE]},SettingsMediator.prototype.handleNotification=function(t){var e,i,o;switch(i=t.getName(),e=t.getBody(),i){case Notifications.READY:null!=(o=this.settings.volume)&&this.sendNotification(Notifications.CHANGE_VOLUME,o);break;case Notifications.VOLUME_CHANGE:if(this.settings.volume===e)return;this.change({volume:e})}},SettingsMediator.prototype.change=function(t){var e,i,o,n;if(!(null==t||"object"!=typeof t||t instanceof Array)&&null!=(i=Utils.diff(this.settings,t))){if(null!=(e=i.captions)){if("none"===(e.edgeColor||"")&&(e.edgeColor="rgba(0,0,0,0)"),null!=(o=e.edgeType)){switch(o.toLowerCase()){case"none":o="text-shadow: 0px 0px 0px";break;case"depressed":o="text-shadow: 0px 1px 0px";break;case"left drop shadow":o="text-shadow: -3px 3px 2px";break;case"raised":o="text-shadow: 0px 1px 1px";break;case"right drop shadow":o="text-shadow: 3px 3px 2px";break;case"uniform":o="text-shadow: 0px 0px 4px"}e.edgeType=o}null!=e.fontSize&&(e.size=e.fontSize,delete e.fontSize),null!=(n=e.fontFamily)&&(null==this.fontFamily&&(this.fontFamily={"Monospaced Serif":"Courier New, Courier, Nimbus Mono L, Cutive Mono, monospace","Proportional Serif":"Times New Roman, Times, Georgia, Cambria, PT Serif Caption, serif","Monospaced Sans-Serif":"Deja Vu Sans Mono, Lucida Console, Monaco, Consolas, PT Mono, monospace","Proportional Sans-Serif":"Roboto, Arial Unicode Ms, Arial, Helvetica, Verdana, PT Sans Caption, sans-serif",Casual:"Comic Sans MS, Impact, Handlee, fantasy",Cursive:"Monotype Corsiva, URW Chancery L, Apple Chancery, Dancing Script, cursive","Small Capitals":"Arial Unicode Ms, Arial, Helvetica, Verdana, Marcellus SC, sans-serif; font-variant: small-caps"}),"object"==typeof n?this.fontFamily=Utils.override(this.fontFamily,n):"string"==typeof n&&-1!==Object.keys(this.fontFamily).indexOf(n)&&(e.fontFamily=this.fontFamily[n]))}this.save(i),this.sendNotification(Notifications.SETTINGS_CHANGE,i)}},SettingsMediator.prototype.getSettings=function(){return Object.freeze(Object.assign({defaults:Object.assign({},this.defaults),change:this.change.bind(this)},this.settings))},SettingsMediator.prototype.save=function(t){this.settings=Utils.override(this.settings,t);try{localStorage.setItem(this.namespace,JSON.stringify(this.settings))}catch(t){}},__extends(ChangeSettingsCommand,PlayerCommand),ChangeSettingsCommand.prototype.execute=function(t){var e;null!=(e=this.facade.retrieveMediator(SettingsMediator.NAME))&&e.change(t.getBody())},__extends(ConfigurationProxy,ModuleProxy),ConfigurationProxy.NAME=ModuleProxy.NAME,ConfigurationProxy.prototype.getContextName=function(){return"paths"},ConfigurationProxy.prototype.getContextData=function(){return this.getPaths()},ConfigurationProxy.prototype.onRegister=function(){this.facade.retrieveProxy(DataBindingProxy.NAME).registerContext(this)},ConfigurationProxy.prototype.setData=function(t){return null!=t.rules&&Utils.mergeRules(t.rules),ConfigurationProxy.__super__.setData.call(this,t),t},ConfigurationProxy.prototype.getPlaysInline=function(){return this.data.playsinline},ConfigurationProxy.prototype.getMuted=function(){return this.data.muted},ConfigurationProxy.prototype.setMuted=function(t){return this.data.muted=t,t},ConfigurationProxy.prototype.getAutoplay=function(){return this.data.autoplay},ConfigurationProxy.prototype.setAutoplay=function(t){return this.data.autoplay=t,t},ConfigurationProxy.prototype.getLoop=function(){return this.data.loop},ConfigurationProxy.prototype.setLoop=function(t){return this.data.loop=t,t},ConfigurationProxy.prototype.getSettings=function(){return this.data.settings},ConfigurationProxy.prototype.setSettings=function(t){return this.data.settings=t,t},ConfigurationProxy.prototype.getDomain=function(){return this.data.domain},ConfigurationProxy.prototype.setDomain=function(t){return this.data.domain=t,t},ConfigurationProxy.prototype.getTarget=function(){return this.data.target},ConfigurationProxy.prototype.setTarget=function(t){return this.data.target=t,t},ConfigurationProxy.prototype.getName=function(){return this.data.name},ConfigurationProxy.prototype.setName=function(t){return this.data.name=t,t},ConfigurationProxy.prototype.getPaths=function(){return this.data.paths},ConfigurationProxy.prototype.setPaths=function(t){return this.data.paths=t,t},ConfigurationProxy.prototype.getVersion=function(){return this.data.version},ConfigurationProxy.prototype.getControls=function(){return this.data.controls},ConfigurationProxy.prototype.setControls=function(t){return this.data.controls=t,t},ConfigurationProxy.prototype.getFullscreen=function(){return this.data.fullscreen||{}},ConfigurationProxy.prototype.setFullscreen=function(t){return this.data.fullscreen=t,t},__extends(AudioPlaybackProxy,PlaybackCoreProxy),AudioPlaybackProxy.prototype.playbackCoreName="audio",AudioPlaybackProxy.prototype.onRegister=function(){var t;t=new MediaElementMediator("html5","audio"),this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,t)},AudioPlaybackProxy.prototype.onRemove=function(){this.facade.createMediaElement()},AudioPlaybackProxy.prototype.canPlayMedium=function(t){return"audio"===t},AudioPlaybackProxy.prototype.canPlayType=function(t){return/audio/.test(t)?"maybe":""},FPS.extractContentId=function(t,e){var i;return(i=document.createElement("a")).href=Utils.arrayToString(t),i.hostname},FPS.extractServerUrl=function(t,e){return e.serverURL||e.serverUrl},FPS.requestCertificate=function(t){var e;return e={url:t.cert,responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}},Utils.request(e).then(function(t){return new Uint8Array(t.response)})},FPS.concatInitDataIdAndCertificate=function(t,e,i){var o,n,a,r;return"string"==typeof e&&(e=Utils.stringToArray(e)),r=0,o=new ArrayBuffer(t.byteLength+4+e.byteLength+4+i.byteLength),n=new DataView(o),new Uint8Array(o,r,t.byteLength).set(t),r+=t.byteLength,n.setUint32(r,e.byteLength,!0),r+=4,(a=new Uint16Array(o,r,e.length)).set(e),r+=a.byteLength,n.setUint32(r,i.byteLength,!0),r+=4,new Uint8Array(o,r,i.byteLength).set(i),new Uint8Array(o,0,o.byteLength)},FPS.requestLicense=function(t,e,i,o){var n,a,r,s;if(a={url:i,method:"POST",responseType:"text",headers:{"Content-type":"application/x-www-form-urlencoded"},data:"spc="+Utils.base64EncodeUint8Array(t)+"&assetId="+encodeURIComponent(e)},null!=o.httpRequestHeaders)for(n in s=o.httpRequestHeaders)r=s[n],a.headers[n]=r;return"boolean"==typeof o.withCredentials&&(a.withCredentials=o.withCredentials),Utils.request(a).then(function(t){var e;return"<ckc>"===(e=t.responseText.trim()).substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),Utils.base64DecodeUint8Array(e)}).catch(function(t){throw"The license request failed."})},__extends(ParamsProxy,DataBoundConfigurationProxy),ParamsProxy.NAME="ParamsProxy",ParamsProxy.prototype.defaults={},ParamsProxy.prototype.configurationName="params",ParamsProxy.prototype.setData=function(t){var e;for(e in this.data={},t)t[e],this.data[e]=t[e];return this.data},__extends(DVRPlaybackProxy,PlaybackCoreProxy),DVRPlaybackProxy.prototype.playbackCoreName="dvr",DVRPlaybackProxy.prototype.interval=null,DVRPlaybackProxy.prototype.ondurationchange=function(t){this.updateDuration()},DVRPlaybackProxy.prototype.ontimeupdate=function(t){this.updateCurrentTime()},DVRPlaybackProxy.prototype.onplay=function(t){this.stopTimer(),DVRPlaybackProxy.__super__.onplay.call(this,t)},DVRPlaybackProxy.prototype.onplaying=function(t){this.stopTimer(),DVRPlaybackProxy.__super__.onplaying.call(this,t)},DVRPlaybackProxy.prototype.onpause=function(t){this.startTimer(),DVRPlaybackProxy.__super__.onpause.call(this,t)},DVRPlaybackProxy.prototype.canPlayTemporalType=function(t){return"dvr"===t},DVRPlaybackProxy.prototype.getDuration=function(){return this.getMediaElement().duration===1/0&&this.updateDuration(),this.data.duration},DVRPlaybackProxy.prototype.getStartTime=function(){return this.getMediaElement().seekable.start(0)},DVRPlaybackProxy.prototype.getFragmentDuration=function(){return 10},DVRPlaybackProxy.prototype.getLiveTime=function(){return this.getDuration()-this.getFragmentDuration()},DVRPlaybackProxy.prototype.isLive=function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()},DVRPlaybackProxy.prototype.seek=function(t){var e=this;return DVRPlaybackProxy.__super__.seek.call(this,t+this.getStartTime()).then(function(t){e.sendNotification(Notifications.IS_LIVE,e.isLive())})},DVRPlaybackProxy.prototype.updateCurrentTime=function(){var t,e;0!==(e=this.getMediaElement().seekable).length&&(t=this.getMediaElement().currentTime,this.data.currentTime=t-e.start(0),this.sendNotification(Notifications.TIME_UPDATE,this.data.currentTime),this.mediaProxy.setIsLive(this.isLive()))},DVRPlaybackProxy.prototype.updateDuration=function(){var t;0!==(t=this.getMediaElement().seekable).length&&(this.data.duration=t.end(0)-t.start(0),this.sendNotification(Notifications.CHANGE_DURATION,this.data.duration))},DVRPlaybackProxy.prototype.startTimer=function(){this.interval=setInterval(this.updateCurrentTime.bind(this),1e3)},DVRPlaybackProxy.prototype.stopTimer=function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null,this.updateCurrentTime())},__extends(DataBindingContext,puremvc.Proxy),DataBindingContext.prototype.contextName=null,DataBindingContext.prototype.contextData=null,DataBindingContext.prototype.onRegister=function(){null!=this.getContextName()&&(this.facade.player||this.facade).retrieveProxy(DataBindingProxy.NAME).registerContext(this)},DataBindingContext.prototype.getContextName=function(){return this.contextName},DataBindingContext.prototype.getContextData=function(){return this.contextData},__extends(PlayerProxy,DataBindingContext),PlayerProxy.NAME="PlayerProxy",PlayerProxy.prototype.contextName="player",PlayerProxy.prototype.getPlaybackOrder=null,PlayerProxy.prototype.playbackCoreMap=null,PlayerProxy.prototype.defaultPlaybackCore=null,PlayerProxy.prototype.activePlaybackCore=null,PlayerProxy.prototype.onRegister=function(){PlayerProxy.__super__.onRegister.call(this),this.registerPlaybackCore(new DVRPlaybackProxy),this.registerPlaybackCore(this.defaultPlaybackCore),this.registerPlaybackCore(new AudioPlaybackProxy),this.activePlaybackCore=this.defaultPlaybackCore},PlayerProxy.prototype.ready=function(){var t;null!=(t="function"==typeof this.getPlaybackOrder?this.getPlaybackOrder(this.playbackCoreMap.map(function(t){return t.getPlaybackCoreName()})):void 0)&&(this.playbackCoreMap=this.playbackCoreMap.sort(function(e,i){return(e=t.indexOf(e.getPlaybackCoreName()))===(i=t.indexOf(i.getPlaybackCoreName()))?0:-1===e&&-1!==i?1:-1!==e&&-1===i?-1:e-i}))},PlayerProxy.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore},PlayerProxy.prototype.registerPlaybackCore=function(t){var e;e=t.getPlaybackCoreName(),null==t||this.playbackCoreMap.some(function(t){return t.getPlaybackCoreName()===e})||this.playbackCoreMap.push(t)},PlayerProxy.prototype.retrievePlaybackCore=function(t){var e,i,o,n;for(i=0,o=(n=this.playbackCoreMap).length;i<o;i++)if((e=n[i]).getPlaybackCoreName()===t)return e},PlayerProxy.prototype.removePlaybackCore=function(t){var e,i;return null==(e=this.retrievePlaybackCore(t))?null:(i=this.playbackCoreMap.indexOf(e),this.playbackCoreMap.splice(i,1),e)},PlayerProxy.prototype.setPlaybackCore=function(t){var e,i,o,n,a,r,s;for(a=0,r=(s=this.playbackCoreMap).length;a<r;a++)if(!0===(e=s[a]).canPlayMedium(t.medium)&&!0===e.canPlayTemporalType(t.temporalType)&&""!==e.canPlayType(t.type)){o=e;break}if(null==o)throw(i=new Error).code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,i;return(n=this.facade.retrieveProxy(PlaybackProxy.NAME))!==o&&("function"==typeof n.destroy&&n.destroy(),this.facade.removeProxy(PlaybackProxy.NAME),this.facade.registerProxy(o),o.setData(n.getData())),this.activePlaybackCore=o,t},PlayerProxy.prototype.canPlayType=function(t){var e,i,o,n;for(i=0,o=(n=this.playbackCoreMap).length;i<o;i++)if(""!==(e=n[i].canPlayType(t)))return e;return""},PlayerProxy.prototype.getContextData=function(){var t,e,i,o;return t=this.facade.retrieveProxy(ConfigurationProxy.NAME),o=this.facade.retrieveProxy(PlaybackProxy.NAME),i=this.facade.retrieveProxy(MediaProxy.NAME),{width:(e=this.facade.getViewComponent()).offsetWidth,height:e.offsetHeight,mode:"html5",autoplay:t.getAutoplay(),domain:t.getDomain(),name:t.getName(),currentTime:o.getCurrentTime(),duration:o.getDuration(),version:t.getVersion(),timecode:{duration:Utils.formatTimecode(i.getDuration()),currentTime:Utils.formatTimecode(o.getCurrentTime())}}},__extends(MediaProxy,DataBindingContext),MediaProxy.NAME="MediaProxy",MediaProxy.prototype.contextName="media",MediaProxy.prototype.data=null,MediaProxy.prototype.value=null,MediaProxy.prototype.started=!1,MediaProxy.prototype.authorized=!0,MediaProxy.prototype.transforms=null,MediaProxy.prototype.getContextData=function(){return this.data},MediaProxy.prototype.getData=function(){var t;return null==(t=Utils.clone(MediaProxy.__super__.getData.call(this))).authorization&&(t.authorization=Utils.clone(this.facade.security.data)),t},MediaProxy.prototype.setData=function(t){return this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(Notifications.MEDIA_SEQUENCE_ABORTED),this.started=!1,this.setAutoplay(t.autoplay),this.setType(t.type),this.setIsLive(t.isLive),this.setTemporalType(t.temporalType),null!=t.source&&this.setSource(t.source),null!=t.src&&this.setSrc(t.src),this.setTitle(t.title),this.setDuration(t.duration),this.setPoster(t.poster),this.setGUID(t.guid),this.setLink(t.link),this.setEmbed(t.embed),this.setWidth(t.width),this.setHeight(t.height),this.setCategory(t.category),this.setStartTime(t.startTime),this.setDescription(t.description),this.setStatus(t.status),this.setCategory(t.category),this.setMetadata(t.metadata),this.setAuthorization(t.authorization),this.setMedium(t.medium),this.setPubDate(t.pubDate),this.setTrack(t.track),this.setScenes(t.scenes),this.setKeys(t.keys),this.setCues(t.cues),this.setRestriction(t.restriction),this.data},MediaProxy.prototype.defaultMediaTransform=function(){var t=this;return{id:"default",transform:function(e){var i,o,n,a,r,s,l,c,d;if(null==e.src&&(null!=(c=e.source)?c.length:void 0)>0){if(null!=(n=t.facade.retrieveProxy(PlayerProxy.NAME)||t.facade)&&(o=Utils.selectSource(e.source,function(t){return n.canPlayType(t)})),null==(null!=o?o.src:void 0)||""===o.src)throw new Error("No valid source could be found");e.src=o.src,e.type=o.type}if(null==e.type&&(e.type=Utils.getMimeType(e.src)),null==e.medium&&(e.medium=/audio/.test(e.type)?"audio":"video"),null==e.temporalType&&(e.temporalType="vod"),e.isLive="live"===e.temporalType||"dvr"===e.temporalType,null!=e.scenes)for(i=s=0,l=(d=e.scenes).length;s<l;i=++s)(a=d[i]).start=isNaN(r=Utils.flattenTimecode(a.sceneStartTime))?0:r,a.end=isNaN(r=Utils.flattenTimecode(a.sceneEndTime))?0:r,a.title=a.sceneTitle||"",a.description=a.sceneDescription||"",a.position=i+1;return null==e.startTime&&(e.startTime=0),null==e.status&&(e.status={}),null==e.metadata&&(e.metadata={}),e.originalSrc=e.src,e}}},MediaProxy.prototype.transform=function(t){var e;return e=this.transforms.map(function(t){return"function"==typeof t.transform?t.transform:t}),Utils.chain(e,t)},MediaProxy.prototype.updateData=function(t){var e,i;for(e in t)i=t[e],e in this.data&&(this.data[e]=i)},MediaProxy.prototype.getGUID=function(){return this.data.guid},MediaProxy.prototype.setGUID=function(t){return this.data.guid=t},MediaProxy.prototype.getLink=function(){return this.data.link},MediaProxy.prototype.setLink=function(t){return this.data.link=t},MediaProxy.prototype.getStartTime=function(){return this.data.startTime},MediaProxy.prototype.setStartTime=function(t){return this.data.startTime=t},MediaProxy.prototype.getEmbed=function(){return this.data.embed},MediaProxy.prototype.setEmbed=function(t){return this.data.embed=t},MediaProxy.prototype.getAutoplay=function(){return this.data.autoplay},MediaProxy.prototype.setAutoplay=function(t){return this.data.autoplay=t},MediaProxy.prototype.getPubDate=function(){return this.data.pubDate},MediaProxy.prototype.setPubDate=function(t){return this.data.pubDate=t},MediaProxy.prototype.getCategory=function(){return this.data.category},MediaProxy.prototype.setCategory=function(t){return this.data.category=t},MediaProxy.prototype.getStatus=function(){return this.data.status},MediaProxy.prototype.setStatus=function(t){return null==t&&(t={}),this.data.status=t},MediaProxy.prototype.getSrc=function(){return this.facade.security.createURL(this.data.src)},MediaProxy.prototype.setSrc=function(t){return this.data.src=t},MediaProxy.prototype.getType=function(){return this.data.type},MediaProxy.prototype.setType=function(t){return this.data.type=t},MediaProxy.prototype.getMedium=function(){return this.data.medium},MediaProxy.prototype.setMedium=function(t){if(t!==this.data.medium)return this.data.medium=t,this.facade.retrieveProxy(ApplicationStateProxy.NAME).setMedium(t)},MediaProxy.prototype.getMetadata=function(){return this.data.metadata},MediaProxy.prototype.setMetadata=function(t){return this.data.metadata=t},MediaProxy.prototype.getSource=function(){return this.data.source},MediaProxy.prototype.setSource=function(t){return this.data.source=t},MediaProxy.prototype.getTrack=function(){return this.data.track},MediaProxy.prototype.setTrack=function(t){return this.data.track=t},MediaProxy.prototype.getTitle=function(){return this.data.title},MediaProxy.prototype.setTitle=function(t){return this.data.title=t},MediaProxy.prototype.getWidth=function(){return this.data.width},MediaProxy.prototype.setWidth=function(t){return this.data.width=t},MediaProxy.prototype.getHeight=function(){return this.data.height},MediaProxy.prototype.setHeight=function(t){return this.data.height=t},MediaProxy.prototype.getDescription=function(){return this.data.description},MediaProxy.prototype.setDescription=function(t){return this.data.description=t},MediaProxy.prototype.getCategory=function(){return this.data.category},MediaProxy.prototype.setCategory=function(t){return this.data.category=t},MediaProxy.prototype.getDuration=function(t){return this.data.duration},MediaProxy.prototype.setDuration=function(t){var e;if(0!==t&&"live"!==this.data.temporalType&&(e=navigator.userAgent,1!==t||!/Android/.test(e)||/Android.*Chrome/.test(e)))return t!==this.data.duration&&(this.data.duration=t,this.sendNotification(Notifications.DURATION_CHANGE,t)),t===1/0&&this.setTemporalType("live"),t},MediaProxy.prototype.getPoster=function(t){return this.data.poster},MediaProxy.prototype.setPoster=function(t){this.data.poster=t},MediaProxy.prototype.getIsLive=function(){return this.data.isLive},MediaProxy.prototype.setIsLive=function(t){if(t!==this.data.isLive)return this.data.isLive=t,this.sendNotification(Notifications.IS_LIVE,t),t},MediaProxy.prototype.getTemporalType=function(){return this.data.temporalType||"vod"},MediaProxy.prototype.setTemporalType=function(t){var e;t!==this.data.temporalType&&(e=this.data.temporalType,this.data.temporalType=t,this.sendNotification(Notifications.TEMPORAL_TYPE_CHANGE,{previous:e,value:t}))},MediaProxy.prototype.getScenes=function(){return this.data.scenes},MediaProxy.prototype.setScenes=function(t){return this.data.scenes=t},MediaProxy.prototype.getCues=function(){return this.data.cues},MediaProxy.prototype.setCues=function(t){if(null==t&&(t=[]),this.data.cues!==t)return this.data.cues=t,this.sendNotification(Notifications.CUES_CHANGE,t),t},MediaProxy.prototype.getScene=function(t){var e,i,o,n,a;if(null!=this.data.scenes)for(e=o=0,n=(a=this.data.scenes).length;o<n;e=++o)if((i=a[e]).start<=t&&t<i.end)return i},MediaProxy.prototype.getKeys=function(){return this.data.keys},MediaProxy.prototype.setKeys=function(t){this.data.keys=t},MediaProxy.prototype.getAuthorization=function(){return this.data.authorization},MediaProxy.prototype.setAuthorization=function(t){this.data.authorization=t},MediaProxy.prototype.getTransforms=function(){return this.transforms},MediaProxy.prototype.getRestriction=function(){return this.data.restriction},MediaProxy.prototype.setRestriction=function(t){null==t&&(t=[]),this.data.restriction=t},__extends(SecurityProxy,puremvc.Proxy),SecurityProxy.NAME="SecurityProxy",SecurityProxy.prototype.authorized=!0,SecurityProxy.prototype.timeout=null,SecurityProxy.prototype.setupHDN1=function(){var t=this;return window.retrieveToken=function(e,i){var o;try{t.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",e,i),null!=(o=t.getToken())?t.facade.getMediaElement().tokenRetrievalSuccess("&primaryToken="+o):t.sendNotification(SecurityNotifications.AUTHORIZE)}catch(e){t.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",e)}return!0}},SecurityProxy.prototype.setMedia=function(t){var e;this.setSession(null),e="blocked"!==t.status.state&&0===t.restriction.length,this.setAuthorized(e),this.setAuthorization(t.authorization)},SecurityProxy.prototype.authorize=function(t){this.setAuthorization(t),this.sendNotification(SecurityNotifications.AUTHORIZED,t)},SecurityProxy.prototype.getAuthorization=function(){return this.data},SecurityProxy.prototype.setAuthorization=function(t){return null!=(null!=t?t.token:void 0)&&this.setAuthorized(!0),this.data=t||{},null!=this.data.expiration&&this.setExpiration(this.data.expiration),t},SecurityProxy.prototype.getKey=function(){return this.data.key},SecurityProxy.prototype.setKey=function(t){return this.data.key=t,t},SecurityProxy.prototype.getToken=function(){return this.data.token},SecurityProxy.prototype.setToken=function(t){return this.data.token=t,t},SecurityProxy.prototype.getExpiration=function(){return this.data.expiration},SecurityProxy.prototype.setExpiration=function(t){return this.data.expiration=t,this.data.expiration>Date.now()&&this.startTimeout(),t},SecurityProxy.prototype.startTimeout=function(){var t=this;Utils.getUTC().then(function(e){var i;return i=function(){t.sendNotification(SecurityNotifications.AUTHORIZATION_EXPIRED),t.sendNotification(SecurityNotifications.AUTHORIZE,{media:t.facade.getMedia()})},t.timeout=setTimeout(i,t.getExpiration()-e)})},SecurityProxy.prototype.stopTimeout=function(){clearTimeout(this.timeout)},SecurityProxy.prototype.getSecret=function(){var t;return null==this.data.token?null:(t="",null!=this.data.token&&(t=""+this.data.token),null!=this.data.key&&(t=this.data.key+"="+t),t)},SecurityProxy.prototype.createURL=function(t){var e;return null!=(e=this.getSecret())&&(t+=/\?/.test(t)?"&":"?",t+=e),t},SecurityProxy.prototype.getAuthorized=function(){return this._authorized},SecurityProxy.prototype.setAuthorized=function(t){return this.stopTimeout(),this._authorized=t,t},SecurityProxy.prototype.getSession=function(){return this.session},SecurityProxy.prototype.setSession=function(t){return this.session=t,t};var PlayState={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"};function DataBindingProxy(){DataBindingProxy.__super__.constructor.call(this,this.constructor.NAME,{}),this.data={},this.contextMap={},this.configurationMap={}}__extends(DataBindingProxy,puremvc.Proxy),DataBindingProxy.NAME="DataBindingProxy",DataBindingProxy.prototype.contextMap=null,DataBindingProxy.prototype.configurationMap=null,DataBindingProxy.prototype.paramsProxy=null,DataBindingProxy.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(ParamsProxy.NAME),this.update()},DataBindingProxy.prototype.registerContext=function(t){null!=t&&(this.contextMap[t.getContextName()]=t)},DataBindingProxy.prototype.retrieveContext=function(t){return this.contextMap[t]},DataBindingProxy.prototype.removeContext=function(t){var e;return e=this.contextMap[t],delete this.contextMap[t],e},DataBindingProxy.prototype.registerConfiguration=function(t){null!=t&&(this.configurationMap[t.getConfigurationName()]=t,t.compile(this.context,!0))},DataBindingProxy.prototype.retrieveConfiguration=function(t){return this.configurationMap[t]},DataBindingProxy.prototype.removeConfiguration=function(t){var e;return e=this.configurationMap[t],delete this.configurationMap[t],e},DataBindingProxy.prototype.update=function(t){var e,i,o,n,a,r;for(o in this.data.now=Date.now(),a=this.contextMap)e=a[o],-1!==(null!=t&&"function"==typeof t.indexOf?t.indexOf(o):void 0)&&(this.data[o]=e.getContextData());for(i in this.paramsProxy.compile(this.data),r=this.paramsProxy.value)n=r[i],this.data[i]=n;return this.data},DataBindingProxy.prototype.compile=function(t,e){var i,o,n,a,r;for(n in null==e&&(e=!1),this.update(t),o=Utils.clone(this.data),a=this.paramsProxy.getConfigurationName(),r=this.configurationMap)i=r[n],n!==a&&i.compile(o,e)};var RenderMode={FLASH:"flash",HTML:"html"},ActiveState={ACTIVE:"active",INACTIVE:"inactive"},PluginNotifications={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"};function ApplicationStateProxy(){ApplicationStateProxy.__super__.constructor.call(this),this.device=Utils.getDevice()}function ExternalMediaProxy(){ExternalMediaProxy.__super__.constructor.call(this)}function ExternalPlaybackProxy(){ExternalPlaybackProxy.__super__.constructor.call(this)}__extends(ApplicationStateProxy,puremvc.Proxy),ApplicationStateProxy.NAME="ApplicationStateProxy",ApplicationStateProxy.prototype.displayState=DisplayState.NORMAL,ApplicationStateProxy.prototype.playState=null,ApplicationStateProxy.prototype.renderMode=null,ApplicationStateProxy.prototype.activeState=null,ApplicationStateProxy.prototype.seeking=!1,ApplicationStateProxy.prototype.seekrequested=!1,ApplicationStateProxy.prototype.waiting=!1,ApplicationStateProxy.prototype.isUserActive=!1,ApplicationStateProxy.prototype.device=null,ApplicationStateProxy.prototype.volume=1,ApplicationStateProxy.prototype.playbackTarget="amp",ApplicationStateProxy.prototype.hasPostContent=!1,ApplicationStateProxy.prototype.locked=!1,ApplicationStateProxy.prototype.mediaElement=null,ApplicationStateProxy.prototype.hidden=!1,ApplicationStateProxy.prototype.pausedBeforeSeek=!1,ApplicationStateProxy.prototype.ended=!1,ApplicationStateProxy.prototype.buffering=!1,ApplicationStateProxy.prototype.getHasPostContent=function(){return this.hasPostContent},ApplicationStateProxy.prototype.setHasPostContent=function(t){this.hasPostContent=t},ApplicationStateProxy.prototype.getEnded=function(){return this.ended},ApplicationStateProxy.prototype.setEnded=function(t){this.ended=t,!0===this.ended&&!0===this.seeking&&(this.seeking=!1)},ApplicationStateProxy.prototype.getDisplayState=function(){return this.displayState},ApplicationStateProxy.prototype.setDisplayState=function(t){var e;t!==this.displayState&&(e=this.displayState,this.displayState=t,this.sendNotification(Notifications.DISPLAY_STATE_CHANGE,{previous:e,value:this.displayState}))},ApplicationStateProxy.prototype.getPlayState=function(){return this.playState},ApplicationStateProxy.prototype.setPlayState=function(t){var e;if(!0===this.getWaiting()&&this.setWaiting(!1),t!==this.playState)switch(e=this.playState,this.playState=t,this.sendNotification(Notifications.PLAY_STATE_CHANGE,{previous:e,value:this.playState}),t){case PlayState.PLAYING:this.sendNotification(Notifications.DISPATCH_EVENT,new Event("playing"));break;case PlayState.ENDED:this.pausedBeforeSeek=!1}},ApplicationStateProxy.prototype.getDevice=function(){return this.device},ApplicationStateProxy.prototype.getSeeking=function(){return this.seeking},ApplicationStateProxy.prototype.setSeeking=function(t){t!==this.seeking&&(this.seeking=t,!1===this.seeking&&this.playState===PlayState.PAUSED&&!0===this.getWaiting()&&this.setWaiting(!1))},ApplicationStateProxy.prototype.getSeekRequested=function(){return this.seekrequested},ApplicationStateProxy.prototype.setSeekRequested=function(t){t!==this.seekrequested&&(this.seekrequested=t)},ApplicationStateProxy.prototype.getWaiting=function(){return this.waiting},ApplicationStateProxy.prototype.setWaiting=function(t){var e,i,o=this;t!==this.waiting&&(this.waiting=t,i=!0===this.waiting?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE,this.sendNotification(i,PlayState.WAITING),!0===this.waiting&&(this.facade.getMediaElement(),e=function(t){o.facade.removeEventListener("playing",e),o.facade.removeEventListener("canplaythrough",e),o.facade.removeEventListener("ended",e),o.setWaiting(!1)},this.facade.addEventListener("playing",e),this.facade.addEventListener("canplaythrough",e),this.facade.addEventListener("ended",e)))},ApplicationStateProxy.prototype.getLocked=function(){return this.locked},ApplicationStateProxy.prototype.setLocked=function(t){this.locked=t},ApplicationStateProxy.prototype.getBuffering=function(){return this.buffering},ApplicationStateProxy.prototype.setBuffering=function(t){this.buffering=t},ApplicationStateProxy.prototype.getIsUserActive=function(){return this.isUserActive},ApplicationStateProxy.prototype.setIsUserActive=function(t){t!==this.isUserActive&&(this.isUserActive=t)},ApplicationStateProxy.prototype.getRenderMode=function(){return this.renderMode},ApplicationStateProxy.prototype.setRenderMode=function(t){t!==this.renderMode&&(this.renderMode=t)},ApplicationStateProxy.prototype.getMedium=function(){return this.medium},ApplicationStateProxy.prototype.setMedium=function(t){var e;t!==this.medium&&(e=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=t,this.sendNotification(Notifications.MEDIUM_CHANGE,{previous:e,value:"medium-"+this.medium}))},ApplicationStateProxy.prototype.getVolume=function(){return this.volume},ApplicationStateProxy.prototype.setVolume=function(t){if(t!==this.volume)return this.volume=t},ApplicationStateProxy.prototype.getPlaybackTarget=function(){return this.playbackTarget},ApplicationStateProxy.prototype.setPlaybackTarget=function(t){var e;t!==this.playbackTarget&&(e=this.playbackTarget,this.playbackTarget=t,this.sendNotification(Notifications.PLAYBACK_TARGET_CHANGE,{previous:e,value:this.playbackTarget}))},ApplicationStateProxy.prototype.getActiveState=function(){return this.activeState},ApplicationStateProxy.prototype.setActiveState=function(t){var e;t!==this.activeState&&(e=this.activeState,this.activeState=t,this.sendNotification(Notifications.ACTIVE_STATE_CHANGE,{previous:e,value:this.activeState}))},ApplicationStateProxy.prototype.getMediaElement=function(){return this.mediaElement},ApplicationStateProxy.prototype.setMediaElement=function(t){var e;t!==this.mediaElement&&(e=this.mediaElement,this.mediaElement=t,this.sendNotification(Notifications.MEDIA_ELEMENT_CHANGE,{previous:e,value:this.mediaElement}))},ApplicationStateProxy.prototype.getHidden=function(){return this.hidden},ApplicationStateProxy.prototype.setHidden=function(t){var e;t!==this.hidden&&(e=this.hidden,this.hidden=t,this.sendNotification(Notifications.HIDDEN_CHANGE,{previous:e,value:this.hidden}))},__extends(ExternalMediaProxy,MediaProxy),ExternalMediaProxy.NAME="MediaProxy",ExternalMediaProxy.prototype.setSource=function(t){if(!(null==t||t.length<1))return t=t.filter(function(t){return"external"===t.type}),ExternalMediaProxy.__super__.setSource.call(this,t)},__extends(ExternalPlaybackProxy,puremvc.Proxy),ExternalPlaybackProxy.NAME="PlaybackProxy",ExternalPlaybackProxy.prototype.src=null,ExternalPlaybackProxy.prototype.getPlaybackCoreName=function(){return"external"},ExternalPlaybackProxy.prototype.canPlayType=function(t){return"external"===t},ExternalPlaybackProxy.prototype.canPlayTemporalType=function(t){return!0},ExternalPlaybackProxy.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()},ExternalPlaybackProxy.prototype.play=function(){window.open(this.getSrc(),"_blank")},ExternalPlaybackProxy.prototype.load=function(){},ExternalPlaybackProxy.prototype.setVolume=function(){},ExternalPlaybackProxy.prototype.pause=function(){},ExternalPlaybackProxy.prototype.setEnabled=function(){},ExternalPlaybackProxy.prototype.getCurrentTime=function(){return 0},ExternalPlaybackProxy.prototype.setCurrentTime=function(t){},ExternalPlaybackProxy.prototype.getDuration=function(){return 0};var UserNotifications={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek",SEEKED:"userseeked",GO_LIVE:"usergolive"};function PluginProxy(t){PluginProxy.__super__.constructor.call(this,t)}__extends(PluginProxy,DataBoundConfigurationProxy),PluginProxy.NAME=ModuleProxy.NAME,PluginProxy.prototype.enabled=!0,PluginProxy.prototype.plugin=null,PluginProxy.prototype.appState=null,PluginProxy.prototype.getDefaults=function(){var t;return null==(t=PluginProxy.__super__.getDefaults.call(this)).debug&&(t.debug=null),t},PluginProxy.prototype.initializeNotifier=function(t){PluginProxy.__super__.initializeNotifier.call(this,t),this.appState=this.facade.player.appState},PluginProxy.prototype.getMediaElement=function(){return this.facade.player.getMediaElement()},PluginProxy.prototype.setEnabled=function(t){return this.enabled=t,t},PluginProxy.prototype.getEnabled=function(){return this.enabled},PluginProxy.prototype.getDebug=function(){return null!=this.value.debug?this.value.debug:!0===this.facade.player.getConfig().debug},PluginProxy.prototype.createPlugin=function(){},PluginProxy.prototype.initialize=function(){this.plugin=this.createPlugin()},PluginProxy.prototype.error=function(t){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",t)};var Namespace={PREFIX:"akamai-"};function Plugin(){Plugin.__super__.constructor.call(this)}function ChangePlayStateCommand(){ChangePlayStateCommand.__super__.constructor.call(this)}function ChangeMediaCommand(){ChangeMediaCommand.__super__.constructor.call(this)}function SetMediaCommand(){SetMediaCommand.__super__.constructor.call(this)}function MediaChangeCommand(){MediaChangeCommand.__super__.constructor.call(this)}function ChangeDurationCommand(){ChangeDurationCommand.__super__.constructor.call(this)}function ErrorCommand(){ErrorCommand.__super__.constructor.call(this)}function ReadyCommand(){ReadyCommand.__super__.constructor.call(this)}function UpdateDataBindingsCommand(){UpdateDataBindingsCommand.__super__.constructor.call(this)}function ChangeParamsCommand(){ChangeParamsCommand.__super__.constructor.call(this)}function OverlayLayerMediator(){OverlayLayerMediator.__super__.constructor.call(this)}function PluginAdapter(){this.plugins=[],this.registered=0,PluginAdapter.__super__.constructor.call(this,this.constructor.NAME,{})}function ClassList(t){this.element=t}function LocalizationProxy(t){var e,i;if(LocalizationProxy.__super__.constructor.call(this),this.data={language:navigator.language||navigator.browserLanguage,locales:Config.defaults.locales},null!=t&&(null!=t.language&&(this.data.language=t.language),null!=t.locales))for(i in t.locales)if(null!=this.data.locales[i])for(e in t.locales[i])this.data.locales[i][e]=t.locales[i][e];else this.data.locales[i]=t.locales[i]}function UI(){}function ExternalPlayCommand(){ExternalPlayCommand.__super__.constructor.call(this)}function ExternalPlayer(t,e,i){ExternalPlayer.__super__.constructor.call(this,t,e,i)}function Event(t,e){this.type=t,null!=e&&(this.detail=this.data=e)}function Logger(t){this.enabled=t,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){})}function Poller(t,e,i,o){this.url=t,this.interval=null!=e?e:1e4,this.type=null!=i?i:null,this.headers=null!=o?o:null,Poller.__super__.constructor.call(this)}function FeedVO(){this.item=[],this.metadata={}}function Resource(){this.metadata={}}__extends(Plugin,Module),Plugin.prototype.player=null,Plugin.prototype.proxy=null,Plugin.prototype.initialize=function(t,e){this.player=e,this.logger=this.player.logger,Plugin.__super__.initialize.call(this,t,e)},Plugin.prototype.isAvailable=function(){return!0},Plugin.prototype.loadModuleResources=function(){return this.isAvailable()?Plugin.__super__.loadModuleResources.call(this):Promise.resolve()},Plugin.prototype.resourcesLoaded=function(){"function"==typeof this.oninitialized&&this.oninitialized(this)},Plugin.prototype.onRegister=function(){var t;this.isAvailable()&&(this.createFramework(),null!=(t=this.retrieveProxy(PluginProxy.NAME))&&"function"==typeof t.initialize&&t.initialize()),this.performance.ready=Date.now(),this.sendNotification(PluginNotifications.PLUGIN_REGISTERED,this)},Plugin.prototype.logEvent=function(t){var e;!0!==/(timeupdate|timeremaining)/.test(t.type)&&(e=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=t.dispatcher&&(e+=" "+t.dispatcher),this.logger.log("["+e+" EVENT] "+t.type,t))},Plugin.prototype.listNotificationPublications=function(){var t,e;return[Notifications.ADD_LAYER,Notifications.REMOVE_LAYER,Notifications.ADD_OVERLAY,Notifications.REMOVE_OVERLAY,Notifications.ADD_APPLICATION_STATE,Notifications.REMOVE_APPLICATION_STATE,Notifications.IS_USER_ACTIVE,Notifications.PLAYBACK_CORE_CHANGE].concat(function(){var i;for(t in i=[],PluginNotifications)e=PluginNotifications[t],i.push(e);return i}())},__extends(ChangePlayStateCommand,PlayerCommand),ChangePlayStateCommand.prototype.execute=function(t){this.applicationState.setPlayState(t.getBody())},__extends(ChangeMediaCommand,PlayerCommand),ChangeMediaCommand.prototype.execute=function(t){var e;try{e=this.media.setData(t.getBody())}catch(t){return void this.sendNotification(Notifications.ERROR,t.message)}this.sendNotification(Notifications.UPDATE_DATA_BINDINGS),e=this.media.getData(),this.security.setMedia(e),this.security.getAuthorized()?this.sendNotification(SecurityNotifications.AUTHORIZED,this.security.getAuthorization()):this.sendNotification(SecurityNotifications.AUTHORIZE,{media:e})},__extends(SetMediaCommand,PlayerCommand),SetMediaCommand.prototype.execute=function(t){var e,i,o=this;e=t.getBody(),this.applicationState.setBuffering(!1),this.applicationState.setEnded(!1),this.playback.setEnabled(!1),this.playback.pause(),null!=(i=this.tracks)&&i.clear(),this.sendNotification(Notifications.HAS_POST_CONTENT,!1),this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY),this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),this.media.transform(e).then(function(t){return o.sendNotification(Notifications.CHANGE_MEDIA,t)}).catch(function(t){return o.sendNotification(Notifications.ERROR,t)})},__extends(MediaChangeCommand,PlayerEventCommand),MediaChangeCommand.prototype.execute=function(t){var e,i;e=t.getBody(),this.playerCore.setPlaybackCore(e),(i=this.playerCore.getActivePlaybackCore()||this.player.playback).reset(),i.setCurrentTime(e.startTime||0),MediaChangeCommand.__super__.execute.call(this,t)},__extends(ChangeDurationCommand,PlayerCommand),ChangeDurationCommand.prototype.execute=function(t){var e;e=t.getBody(),this.media.getDuration()!==e&&this.media.setDuration(e)},__extends(ErrorCommand,PlayerEventCommand),ErrorCommand.prototype.execute=function(t){var e,i;this.playback.destroy(),e=this.playback.getMediaElement(),EventHandler.clear(e),i=t.getBody(),this.logger.error("[AMP ERROR]",i),this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.ERROR),this.facade.error=i,ErrorCommand.__super__.execute.call(this,t)},__extends(ReadyCommand,PlayerEventCommand),ReadyCommand.prototype.execute=function(t){var e,i;null!=(e=null!=(i=this.facade.config)?i.volume:void 0)&&this.sendNotification(Notifications.CHANGE_VOLUME,e),this.playerCore.ready(),!0===this.facade.config.autoplay&&this.sendNotification(Notifications.ADD_APPLICATION_STATE,"autoplay"),this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL),this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY),this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),this.dispatchEventAfterCommand(t)},__extends(UpdateDataBindingsCommand,PlayerCommand),UpdateDataBindingsCommand.prototype.execute=function(t){var e;e=t.getBody()||{},this.bindings.compile(e.contexts,e.suppressErrors)},__extends(ChangeParamsCommand,PlayerCommand),ChangeParamsCommand.prototype.execute=function(t){this.params.setData(t.getBody()),this.sendNotification(Notifications.UPDATE_DATA_BINDINGS,{suppressErrors:!0})},__extends(OverlayLayerMediator,LayerMediator),OverlayLayerMediator.prototype.componentName="overlays",OverlayLayerMediator.NAME="OverlayLayerMediator",OverlayLayerMediator.prototype.createMediatorName=function(){return OverlayLayerMediator.NAME},OverlayLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.ADD_OVERLAY,Notifications.REMOVE_OVERLAY]},OverlayLayerMediator.prototype.handleNotification=function(t){var e,i;switch(e=t.getName(),i=t.getBody(),e){case Notifications.ADD_OVERLAY:this.viewComponent.appendChild(i);break;case Notifications.REMOVE_OVERLAY:this.viewComponent.removeChild(i)}},__extends(PluginAdapter,puremvc.Mediator),PluginAdapter.NAME="PluginAdapter",PluginAdapter.prototype.plugins=null,PluginAdapter.prototype.registered=null,PluginAdapter.prototype.onRegister=function(){return PluginAdapter.__super__.onRegister.call(this)},PluginAdapter.prototype.listNotificationInterests=function(){return[PluginNotifications.REGISTER_PLUGINS,PluginNotifications.PLUGIN_REGISTERED]},PluginAdapter.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h=this;switch(s=t.getName(),e=t.getBody(),s){case PluginNotifications.REGISTER_PLUGINS:for(r in d=this.facade.getPlayerType(),i=e,p=AMP.plugins)if(u=p[r],r in i&&null!=(n=i[r])&&!1!==n.enabled)if(null!=(o=u[d]))try{(l=new o).oninitialized=this.onplugininitialized.bind(this,r),l.onerror=this.onpluginerror.bind(this,r),a=l.initialize.bind(l,n,this.facade),this.plugins.push(a)}catch(t){this.logger.error("[AMP] Plugin could not be created: "+r+". "+t);continue}else this.facade.logger.debug("[AMP] Plugin could not be found: "+r);for(r in c=i.plugins||{})null!=(n=c[r])&&!1!==n.enabled&&(a=function(t,e,i,n,a){return h.facade.loadResources(e.resources).then(function(){return null==(o=AMP.plugins[i][d])&&a("[AMP] Plugin could not be found: "+i),o(t,e,i)}).then(n).catch(a)},this.plugins.push(a.bind(null,this.facade,n,r,this.onpluginregistered.bind(this,r),this.onpluginerror.bind(this,r))));this.plugins.forEach(function(t){return t()});break;case PluginNotifications.PLUGIN_REGISTERED:this.onpluginregistered(e.getModuleName(),e)}},PluginAdapter.prototype.initializedCheck=function(){this.registered===this.plugins.length&&this.sendNotification(PluginNotifications.PLUGINS_INITIALIZED,this.plugins)},PluginAdapter.prototype.onplugininitialized=function(t,e){e.oninitialized=null,e.onerror=null,this.facade.registerModule(e)},PluginAdapter.prototype.onpluginerror=function(t,e){this.registered++,this.facade.logger.error("[AMP] Plugin could not be registered: "+t),this.facade.logger.error(e),this.initializedCheck()},PluginAdapter.prototype.onpluginregistered=function(t,e){var i;this.registered++,this.facade.logger.debug("[AMP] Plugin registered: "+t),this.facade[t]=e,null!=(i=("function"==typeof e.getFeatureName?e.getFeatureName():void 0)||e.feature)&&(this.facade[i]=e),this.initializedCheck()},ClassList.prototype.element=null,ClassList.prototype.prefix=Namespace.PREFIX,ClassList.prototype.contains=function(t){return this.constructor.contains(t,this.element,this.prefix)},ClassList.prototype.add=function(t){this.constructor.add(t,this.element,this.prefix)},ClassList.prototype.remove=function(t){this.constructor.remove(t,this.element,this.prefix)},ClassList.prototype.toggle=function(t){return this.constructor.contains(t,this.element,this.prefix)},ClassList.contains=function(t,e,i){var o,n;return null==i&&(i=""),o=i+t,null!=(null!=(n=e.classList)?n.contains:void 0)?e.classList.contains(o):-1!==e.className.indexOf(o)},ClassList.add=function(t,e,i){var o,n;null==i&&(i=""),o=i+t,null!=(null!=(n=e.classList)?n.add:void 0)?e.classList.add(o):this.contains(t,e)||(""!==e.className?e.className+=" "+o:e.className=o)},ClassList.remove=function(t,e,i){var o,n,a;null==i&&(i=""),o=i+t,null!=(null!=(a=e.classList)?a.remove:void 0)?e.classList.remove(o):this.contains(t,e)&&(n=new RegExp(" ?"+o),e.className=e.className.replace(n,""))},ClassList.toggle=function(t,e,i){var o;null==i&&(i=""),null!=(null!=(o=e.classList)?o.toggle:void 0)?e.classList.toggle(this.prefix+t):this.contains(t,e)?this.remome(t,e):this.add(t,e)},__extends(LocalizationProxy,DataBindingContext),LocalizationProxy.NAME="LocalizationProxy",LocalizationProxy.prototype.contextName="l10n",LocalizationProxy.prototype.locale=null,LocalizationProxy.prototype.localeId=null,LocalizationProxy.prototype.onRegister=function(){LocalizationProxy.__super__.onRegister.call(this),this.setLocale(this.data.language)},LocalizationProxy.prototype.getContextData=function(){return this.locale},LocalizationProxy.prototype.getLanguage=function(){return this.data.language},LocalizationProxy.prototype.setLanguage=function(t){var e=this;return this.setLocale(t).then(function(){e.data.language=t,e.sendNotification(Notifications.LANGUAGE_CHANGE,t)}),t},LocalizationProxy.prototype.setLocale=function(t){var e=this;return new Promise(function(i,o){var n,a,r;return n=function(){e.localeId=r,e.locale=e.facade.l10n=e.data.locales[r],i()},r=t,null==(a=e.data.locales[r])&&(r=t.substring(0,2),a=e.data.locales[r]),"string"==typeof a?AMP.addResource({src:e.facade.evaluatePaths(a),type:Utils.mimeTypes.json}).then(function(t){return e.data.locales[r]=t.data,n()}):n()})},LocalizationProxy.prototype.getLocaleId=function(){return this.localeId},LocalizationProxy.prototype.getLocales=function(){return this.data.locales},LocalizationProxy.prototype.setLocales=function(t){return this.data.locales=t,t},LocalizationProxy.prototype.getString=function(t){try{return(this.locale||this.data.locales.en)[t]||""}catch(t){return""}},LocalizationProxy.prototype.getLanguageString=function(t){var e,i;return"string"!=typeof t||null==t||""===t?"":(e="MSG_"+t.toUpperCase(),""===(i=this.getString(e))&&(e="MSG_"+(t=t.split("-").shift()).toUpperCase(),i=this.getString(e)),i)},UI.create=function(t,e,i,o){var n,a,r,s,l;if(null==i&&(i="div"),"string"==typeof i&&(i=document.createElement(i)),n=new ClassList(i),null!=t)for("string"==typeof t&&(t=[t]),s=0,l=t.length;s<l;s++)a=t[s],n.add(a);return i._classList=n,null!=o&&(null!=i.innerText?i.innerText=o:i.textContent=o),null!=e&&(null!=e.getViewComponent&&(r=e.getViewComponent()),null!=r&&(e=r),e.appendChild(i)),i},UI.bindEvents=function(t,e,i){var o,n;for(o in null==i&&(i=["onRemove","onRegister"]),e)n=e[o],__indexOf.call(i,o)>=0||!/^on/.test(o)||null==(null!=n?n.bind:void 0)||(t[o]=n.bind(e))},UI.createUID=function(t){var e,i;return null==t&&(t=16),e=Date.now(),2,i=2*t-1,(Math.round(Math.random()*i+t).toString(16)+e.toString(16)).toUpperCase()},__extends(ExternalPlayCommand,PlayerEventCommand),ExternalPlayCommand.prototype.execute=function(t){this.sendNotification(Notifications.PLAY_REQUEST),this.playback.play(),ExternalPlayCommand.__super__.execute.call(this,t)},__extends(ExternalPlayer,Player),ExternalPlayer.prototype.playerType="external",ExternalPlayer.prototype.createModel=function(){var t;ExternalPlayer.__super__.createModel.call(this),this.registerProxy(new LocalizationProxy(this.config)),t=new ExternalPlaybackProxy,this.registerProxy(t),this.playerCore=new PlayerProxy(t),this.registerProxy(this.playerCore),this.bindings.initialize()},ExternalPlayer.prototype.createView=function(){var t,e=this;this.registerMediator(new PlayerMediator("external",this.getViewComponent())),this.registerMediator(new PluginAdapter),t=new OverlayLayerMediator,this.registerMediator(t),EventHandler.create(t.viewComponent,EventHandler.CLICK,function(){return e.sendNotification(Notifications.TOGGLE_ACTIVE)})},ExternalPlayer.prototype.createController=function(){ExternalPlayer.__super__.createController.call(this),this.registerCommand(Notifications.UPDATE_DATA_BINDINGS,UpdateDataBindingsCommand),this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ExternalPlayCommand),this.registerCommand(Notifications.PLAY,ExternalPlayCommand),this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand),this.registerCommand(Notifications.SET_MEDIA,SetMediaCommand),this.registerCommand(Notifications.CHANGE_MEDIA,ChangeMediaCommand),this.registerCommand(Notifications.MEDIA_CHANGE,MediaChangeCommand),this.registerCommand(Notifications.MEDIA_VALIDATED,MediaValidatedCommand),this.registerCommand(Notifications.ERROR,ErrorCommand),this.registerCommand(PluginNotifications.PLUGINS_INITIALIZED,PluginsInitializedCommand),this.registerCommand(Notifications.READY,ReadyCommand),this.registerCommand(Notifications.CHANGE_PARAMS,ChangeParamsCommand)},ExternalPlayer.prototype.createMediaElement=function(){return document.createElement("div")},ExternalPlayer.prototype.canPlayType=function(t){return"maybe"},ExternalPlayer.prototype.play=function(){this.sendNotification(Notifications.PLAY)},ExternalPlayer.prototype.setParams=function(t){return this.sendNotification(Notifications.CHANGE_PARAMS,t),t},ExternalPlayer.prototype.getParams=function(){return this.retrieveProxy(ParamsProxy.NAME).getData()},ExternalPlayer.prototype.setAutoplay=function(t){return!1},ExternalPlayer.prototype.getAutoplay=function(){return!1},ExternalPlayer.prototype.setLoop=function(t){return!1},ExternalPlayer.prototype.getLoop=function(){return!1},ExternalPlayer.prototype.setMuted=function(t){return!1},ExternalPlayer.prototype.getMuted=function(){return!1},ExternalPlayer.prototype.setMedia=function(t){return this.sendNotification(Notifications.SET_MEDIA,t),t},ExternalPlayer.prototype.getMedia=function(t){var e;return null!=(e=this.retrieveProxy(MediaProxy.NAME))?e.getData():void 0},ExternalPlayer.prototype.setCurrentTime=function(t){return 0},ExternalPlayer.prototype.getCurrentTime=function(t){return 0},ExternalPlayer.prototype.getDuration=function(t){return this.retrieveProxy(MediaProxy.NAME).getDuration()},ExternalPlayer.prototype.setSrc=function(t){return this.sendNotification(Notifications.SET_MEDIA,{src:t}),t},ExternalPlayer.prototype.getSrc=function(t){return this.retrieveProxy(MediaProxy.NAME).getSrc()},ExternalPlayer.prototype.setSource=function(t){return this.sendNotification(Notifications.SET_MEDIA,{source:t}),t},ExternalPlayer.prototype.getSource=function(){return this.retrieveProxy(MediaProxy.NAME).getSource()},ExternalPlayer.prototype.setVolume=function(t){return t},ExternalPlayer.prototype.getVolume=function(t){return 1},ExternalPlayer.prototype.getSeeking=function(){return!1},ExternalPlayer.prototype.getPaused=function(){return!1},ExternalPlayer.prototype.getEnded=function(){return!1},Event.prototype.type=null,Event.prototype.target=null,Event.prototype.detail=null,Logger.prototype.log=function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(t){}},Logger.prototype.trace=function(){try{console.trace.apply(console,arguments)}catch(t){}},Logger.prototype.debug=function(){try{console.log.apply(console,arguments)}catch(t){this.log.apply(this,arguments)}},Logger.prototype.info=function(){try{console.info.apply(console,arguments)}catch(t){}},Logger.prototype.warn=function(){try{console.warn.apply(console,arguments)}catch(t){}},Logger.prototype.error=function(){try{console.error.apply(console,arguments)}catch(t){this.log.apply(this,arguments)}},Logger.prototype.fatal=function(){try{console.fatal.apply(console,arguments)}catch(t){}},__extends(Poller,EventDispatcher),Poller.prototype.timeout=null,Poller.prototype.interval=null,Poller.prototype.url=null,Poller.prototype.lastModified=null,Poller.prototype.contentLenght=null,Poller.prototype.data=null,Poller.prototype.text=null,Poller.prototype.type=null,Poller.prototype.headers=null,Poller.prototype.useHeadRequest=!0,Poller.prototype.xhr=null,Poller.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()},Poller.prototype.poll=function(){var t,e=this;t=Utils.getXHR(),this.useHeadRequest?(t.onload=function(i){var o,n;304!==t.status?(n=t.getResponseHeader("Last-Modified"),o=t.getResponseHeader("Content-Length"),null==n&&null==o||null!=n&&n!==e.lastModified||null!=o&&o!==e.contentLength?(e.lastModified=n,e.contentLength=o,e.updateData()):e.invoke()):e.invoke()},t.onerror=function(t){e.error(t)},t.open("HEAD",Utils.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&t.setRequestHeader("If-Modified-Since",this.lastModified),t.send()):this.updateData()},Poller.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)},Poller.prototype.updateData=function(){var t,e=this;return(t=Utils.getXHR()).open("GET",Utils.cacheBust(this.url),!0),t.onload=function(i){var o;o=t.responseText,e.setText(o),e.invoke()},t.onerror=function(t){e.error(t)},this.applyHeaders(),t.send()},Poller.prototype.setText=function(t){var e;if(t!==this.text){if(this.text=t,e=this.text,this.type===Utils.mimeTypes.json)try{e=this.xhr.response}catch(t){e=this.text}this.setData(e)}return t},Poller.prototype.setData=function(t){return t!==this.data&&(this.data=t,this.dispatchEvent(new Event("datachange",this.data))),t},Poller.prototype.error=function(t){Logger.error(event),this.stop()},Poller.prototype.invoke=function(){var t=this;this.stop(),this.timeout=setTimeout(function(){t.poll()},this.interval)},Poller.prototype.stop=function(){clearTimeout(this.timeout)},FeedVO.prototype.title=null,FeedVO.prototype.link=null,FeedVO.prototype.description=null,FeedVO.prototype.category=null,FeedVO.prototype.pubDate=null,FeedVO.prototype.language=null,FeedVO.prototype.ttl=null,FeedVO.prototype.item=null,FeedVO.prototype.metadata=null,Resource.prototype.src=null,Resource.prototype.debug=null,Resource.prototype.type=null,Resource.prototype.metadata=null;var PlaybackMode={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none",HTML_AUTO:"html-auto"};function MediaVO(){return MediaVO.__super__.constructor.apply(this,arguments)}function IdleUtil(t,e){this.element=t,this.timeout=e,IdleUtil.__super__.constructor.call(this),this.resetHandler=this.reset.bind(this)}function MRSSHelper(){}function Cookies(){}function XHR(){XHR.__super__.constructor.call(this)}function Timer(t,e){var i=this;this.delay=t,this.repeatCount=null!=e?e:0,Timer.__super__.constructor.call(this),this._running=!1,this._currentCount=0,this._timeout=null,this._startTime=null,this._currentTime=0,this.tick=this.tick.bind(this),this.next=setTimeout.bind(null,this.tick,this.delay),Object.defineProperties(this,{currentCount:{get:function(){return i._currentCount},enumerable:!0,configurable:!1},running:{get:function(){return i._running},enumerable:!0,configurable:!1},time:{get:function(){return i._currentTime+(Date.now()-i._startTime)},enumerable:!0,configurable:!1}})}function Utils(){}function AMPConfig(){AMPConfig.__super__.constructor.call(this,this,!1)}function CaptionCue(t,e,i){this.startTime=t,this.endTime=e,this.id=i}__extends(MediaVO,Resource),MediaVO.prototype.source=null,MediaVO.prototype.title=null,MediaVO.prototype.description=null,MediaVO.prototype.link=null,MediaVO.prototype.guid=null,MediaVO.prototype.pubDate=null,MediaVO.prototype.poster=null,MediaVO.prototype.thumbnail=null,MediaVO.prototype.embed=null,MediaVO.prototype.category=null,MediaVO.prototype.type=null,MediaVO.prototype.medium=null,MediaVO.prototype.duration=null,MediaVO.prototype.track=null,MediaVO.prototype.metadata=null,MediaVO.prototype.scenes=null,MediaVO.prototype.startTime=null,__extends(IdleUtil,EventDispatcher),IdleUtil.prototype.events=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],IdleUtil.prototype.resetHandler=null,IdleUtil.prototype.element=null,IdleUtil.prototype.timeout=null,IdleUtil.prototype.active=!0,IdleUtil.prototype.timeoutId=null,IdleUtil.prototype.applyListeners=function(t){var e,i,o,n;for(null==t&&(t="add"),i=0,o=(n=this.events).length;i<o;i++)e=n[i],this.element[t+"EventListener"](e,this.resetHandler)},IdleUtil.prototype.start=function(t){null!=t&&(this.timeout=t),this.stop(),this.applyListeners("add"),this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)},IdleUtil.prototype.stop=function(){this.applyListeners("remove"),clearTimeout(this.timeoutId)},IdleUtil.prototype.reset=function(){this.setActive(!0),this.start()},IdleUtil.prototype.setActive=function(t){if(t!==this.active)return this.active=t,this.dispatchEvent(new Event("activechange",{active:this.active})),t},IdleUtil.prototype.getActive=function(){return this.active},MRSSHelper.prototype.getFeed=function(t){return Utils.getFeed(t)},MRSSHelper.prototype.getMediaNode=function(t,e,i){var o,n,a,r;return null==i&&(i=!0),a="media-"+e,null!=(n=(o=t["media-group"]||t)["media-content"])&&null!=n[a]?r=n[a]:null!=o[a]?r=o[a]:null!=t[a]?r=t[a]:null!=t[e]&&i&&(r=t[e]),r},MRSSHelper.prototype.createEmbed=function(t){var e,i,o,n,a,r;try{if(null==(e=this.getMediaNode(t,"embed")))return i;for((i={}).url=e["@attributes"].url,i.width=e["@attributes"].width,i.height=e["@attributes"].height,i.params={},e["media-param"]instanceof Array||(e["media-param"]=[e["media-param"]]),r=e["media-param"],n=0,a=r.length;n<a;n++)o=r[n],i.params[o["@attributes"].name]=o["#text"]}catch(t){Logger.error("[AMP Feed Parse Error] embed parse error: "+t.message,t)}return i},MRSSHelper.prototype.createFeed=function(t){var e,i,o,n,a,r,s,l,c;try{if(e=t.channel,i=new FeedVO,null!=e){for(i.title=e.title,i.description=e.description,i.language=e.language,i.category=e.category,i.pubDate=new Date(Date.parse(e.pubDate)),i.ttl=e.ttl,l=0,c=(n=e.item instanceof Array?e.item:[e.item]).length;l<c;l++)o=n[l],r=this.createMedia(o),i.item.push(r);for(a in e)s=e[a],a in i||(i.metadata[a]=s)}}catch(t){Logger.error("[AMP Feed Parse Error] feed parse error: "+t.message,t)}return i},MRSSHelper.prototype.createMedia=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P,_,A,E,N;try{if(s=new MediaVO,(r=this.getMediaNode(t,"content"))instanceof Array)for(s.source=[],h=0,f=r.length;h<f;h++)d={src:(o=r[h])["@attributes"].url,type:o["@attributes"].type},null!=(i=o["media-category"])&&"http://mrss.akamai.com/user_agent_hint"===(e=i["@attributes"]).schema&&null!=(a=e.label||i["#text"])&&""!==a&&(null==d.rules&&(d.rules=[]),d.rules.push(a)),s.source.push(d),s.medium=o["@attributes"].medium,s.duration=parseFloat(o["@attributes"].duration);else s.type=r["@attributes"].type,s.src=r["@attributes"].url,s.medium=r["@attributes"].medium,s.duration=parseFloat(r["@attributes"].duration);if(s.guid=t.guid,s.title=this.getMediaNode(t,"title"),s.link=t.link,s.description=this.getMediaNode(t,"description"),s.pubDate=new Date(Date.parse(t.pubDate)),s.thumbnail=s.poster=null!=(A=this.getMediaNode(t,"thumbnail"))&&null!=(E=A["@attributes"])?E.url:void 0,s.embed=this.createEmbed(t),s.scenes=null!=(N=this.getMediaNode(t,"scenes"))?N["media-scene"]:void 0,null!=(l=this.getMediaNode(t,"status",!1))&&(s.status={state:l["@attributes"].state,reason:l["@attributes"].reason}),null!=(l=this.getMediaNode(t,"restriction",!1)))for(l instanceof Array||(l=[l]),s.restriction=[],y=0,C=l.length;y<C;y++)c=l[y],s.restriction.push({relationship:c["@attributes"].relationship,type:c["@attributes"].type,value:c["#text"].split(" ")});if(s.category=t.category,s.category instanceof Array||(s.category=[s.category]),null!=(l=this.getMediaNode(t,"category",!1)))for(m=0,P=l.length;m<P;m++)null!=(i=l[m])["#text"]&&""!==i["#text"]&&s.category.push(i["#text"]);if(null!=s.category&&s.category.sort(function(t,e){return(t=t.toLowerCase())>(e=e.toLowerCase())?1:t<e?-1:0}),null!=(l=this.getMediaNode(t,"subTitle")))for(null==s.track&&(s.track=[]),l instanceof Array||(l=[l]),g=0,_=l.length;g<_;g++)null!=(u=l[g])["@attributes"]&&s.track.push({src:u["@attributes"].href,type:"live-oncaptioninfo"===u["@attributes"].type?"text/cea-708":u["@attributes"].type,kind:"captions",srclang:"en-us"===u["@attributes"].lang?"en":u["@attributes"].lang||"en"});for(n in"undefined"!=typeof amp&&"html"===amp.getPlayerType()&&null==s.track&&(null==s.track&&(s.track=[]),s.track.push({src:"https://foxnewsplayer-a.akamaihd.net/player/test/7.90.9/amp.premier/no_captions.xml",type:"application/ttml+xml",kind:"captioning",srclang:"en"})),(i=t.category)instanceof Array||(i=[i]),s.isLive="live"===t.temporalType||null!=i&&-1!==i.join(",").indexOf("live_stream"),s.temporalType=s.isLive?"live":t.temporalType||"vod",t)p=t[n],n in s?"description"===n&&(s.metadata[n]=p):s.metadata[n]=p}catch(t){Logger.error("[AMP Feed Parse Error] media parse error: "+t.message,t)}return s},Cookies.setCookie=function(t,e,i,o,n){var a;return e=escape(e),null!=i&&((a=new Date).setDate(a.getDate()+i),e+="; expires="+a.toUTCString()),null!=n&&(e+="; domain="+n),null!=o&&(e+="; path="+o),document.cookie=t+"="+e},Cookies.getCookie=function(t){var e,i,o,n,a,r,s;for(r=0,s=(i=document.cookie.split(";")).length;r<s;r++)if(o=(e=i[r]).indexOf("="),n=e.substr(0,o).replace(/^\s+|\s+$/g,""),a=unescape(e.substr(o+1)),n===t)return a},Cookies.deleteCookie=function(t){return this.setCookie(t,"",-1)},__extends(XHR,EventDispatcher),XHR.prototype.xhr=null,XHR.prototype.headers=null,XHR.prototype.response=null,XHR.prototype.responseXML=null,XHR.prototype.responseText=null,XHR.prototype.responseType=null,XHR.prototype.withCredentials=!1,XHR.prototype.readyState=0,XHR.prototype.status=null,XHR.prototype.open=function(t,e){var i,o,n=this;try{o=new XMLHttpRequest}catch(t){o=new window.ActiveXObject("Microsoft.XMLHTTP")}if(XHR.isCORS(e))if(Object.prototype.hasOwnProperty.call(o,"withCredentials"))try{o.withCredentials=this.withCredentials}catch(t){Logger.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",t)}else"undefined"!=typeof XDomainRequest&&(i=!0,o=new XDomainRequest);if(null!=o){i&&(o.onprogress=function(){},o.ontimeout=function(){},o.onerror=function(){},o.onload=function(t){"function"==typeof o.onreadystatechange&&(o.readyState=4,o.status=200,o.contentType.match(/\/xml/)&&(o.responseXML=new ActiveXObject("Microsoft.XMLDOM"),o.responseXML.async=!1,o.responseXML.loadXML(o.responseText)),o.onreadystatechange.call(o,t,!1))}),o.onreadystatechange=function(t){var e,i;if(n.readyState=o.readyState,n.dispatchEvent(new Event("readystatechange",o)),4===o.readyState)if(n.status=o.status,199<(e=n.status)&&e<400||0===n.status){if(null==o.responseText&&(o.responseText=o.text),n.responseText=o.responseText,null!=o.responseXML&&(null!=(i=o.responseXML.childNodes)?i.length:void 0)>0)n.response=n.responseXML=o.responseXML,n.responseType="document";else try{n.response=JSON.parse(o.responseText),n.responseType="json"}catch(t){n.response=o.responseText,n.responseType="text"}n.dispatchEvent(new Event("load",n))}else 0!==n.status&&n.dispatchEvent(new Event("error",n))};try{void 0!==o.onerror&&(o.onerror=function(t){n.dispatchEvent(new Event("error",n))})}catch(t){}o.open(t,e)}this.xhr=o},XHR.prototype.send=function(t){var e,i,o,n=this;if(null!=this.headers)for(e in o=this.headers)i=o[e],null!=e&&null!=i&&this.xhr.setRequestHeader(e,i);setTimeout(function(){n.xhr.send(t)},0)},XHR.prototype.setRequestHeader=function(t,e){null!=t&&null!=e&&(null==this.headers&&(this.headers={}),this.headers[t]=e)},XHR.prototype.setRequestHeaders=function(t){return this.headers=t,t},XHR.prototype.getResponseHeader=function(t){var e;return null!=(e=this.xhr)&&"function"==typeof e.getResponseHeader?e.getResponseHeader(t):void 0},XHR.prototype.getAllResponseHeaders=function(){var t;return null!=(t=this.xhr)&&"function"==typeof t.getAllResponseHeaders?t.getAllResponseHeaders():void 0},XHR.isCORS=function(t){var e,i,o,n;return(i=document.createElement("a")).href=t,e=""!==i.hostname?i.hostname:location.hostname,o="0"!==i.port?i.port:location.port,n=":"!==i.protocol?i.protocol:location.protocol,location.protocol!==n||location.hostname!==e||location.port!==o&&!(""===location.port&&"80"===o)},__extends(Timer,EventDispatcher),Timer.prototype.reset=function(){this.stop(),this._currentCount=0,this._currentTime=0,this._startTime=null},Timer.prototype.start=function(){var t;!0!==this._running&&(t=this.delay-(this._currentTime-this.delay*this._currentCount),this._running=!0,this._timeout=setTimeout(this.tick,t))},Timer.prototype.stop=function(){!1!==this._running&&(clearTimeout(this._timeout),this._currentTime+=Date.now()-this._startTime,this._timeout=null,this._running=!1)},Timer.prototype.tick=function(){var t;clearTimeout(this._timeout),t=0!==this.repeatCount&&this._currentCount>=this.repeatCount,this._currentCount++,this._currentTime+=this.delay,this._startTime=Date.now(),!1===t&&(this._timeout=this.next()),this.dispatchEvent(new Event("timer",this)),!0===t&&(this.stop(),this.dispatchEvent(new Event("complete",this)))},Utils.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC",Utils.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"},Utils.flashTypes=[Utils.mimeTypes.mp4,Utils.mimeTypes.flv,Utils.mimeTypes.f4m,Utils.mimeTypes.smil,Utils.mimeTypes.smilxml],Utils.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}},Utils.getPlaybackMode=function(t){var e,i,o;for(e in null==t&&(t=(null!=(o=QueryString["amp-mode"])?o.toLowerCase():void 0)||PlaybackMode.HTML_AUTO),i=!1,PlaybackMode)if(PlaybackMode[e]===t){i=!0;break}return i||(t=PlaybackMode.AUTO),t===PlaybackMode.HTML_AUTO&&(t=this.isHTMLFirst()?PlaybackMode.HTML:PlaybackMode.AUTO),t!==PlaybackMode.AUTO?(t!==PlaybackMode.FLASH||this.hasFlash()&&void 0!==FlashPlayer||(t=this.supportsHTML5Video()?PlaybackMode.HTML:PlaybackMode.NONE),t):(this.hasFlash()||(t=this.supportsHTML5Video()?PlaybackMode.HTML:PlaybackMode.NONE),t===PlaybackMode.AUTO&&(t=this.isHTML5()?PlaybackMode.HTML:PlaybackMode.FLASH),t)},Utils.getIEVersion=function(){var t,e,i;return e=-1,i=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"===navigator.appName?t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/[0-9\.]+$/.test(i)&&(t=/Edge\/([0-9\.]+)/),null!=(null!=t?t.exec(i):void 0)&&(e=parseFloat(RegExp.$1)),e},Utils.getFFVersion=function(){var t,e;return t=-1,e=navigator.userAgent,/Firefox\/([0-9\.]+)$/.exec(e)&&(t=parseFloat(RegExp.$1)),t},Utils.getSafariVersion=function(){var t,e;return t=-1,e=navigator.userAgent,/Safari\/[0-9\.]+$/.test(e)&&null!=/Version\/([0-9]+\.[0-9]+) Safari/.exec(e)&&(t=parseFloat(RegExp.$1)),t},Utils.isChrome=function(){return/Chrom(e|ium)/.test(navigator.userAgent)},Utils.getChromeVersion=function(){var t,e;return t=-1,e=navigator.userAgent,/Chrome( Mobile)?\/([0-9\.]+)/.test(e)&&(t=parseFloat(e.match(/Chrome( Mobile)?\/([0-9\.]+)/)[2].split(".").slice(0,2).join("."))),t},Utils.isHTMLFirst=function(){return null!=window.MediaSource},Utils.mergeRules=function(t){var e,i,o;for(e in o=[],t)i=t[e],o.push(Utils.rules[e]=i);return o},Utils.checkRules=function(t){var e,i,o,n;if(null!=t&&t.length>0)for(o=0,n=t.length;o<n;o++)if(e=t[o],(i=Utils.rules[e])&&new RegExp(i.regexp).test(navigator.userAgent))return!0;return!1},Utils.selectSource=function(t,e){var i,o,n,a,r;for(o=0,a=t.length;o<a;o++)if(i=t[o],Utils.checkRules(i.rules))return i;for(n=0,r=t.length;n<r;n++)if(""!==e((i=t[n]).type||Utils.getMimeType(i.src)))return i;return null},Utils.getSourceByType=function(t,e){var i,o,n,a;for(o=null!=t.source?t.source.slice():[],null==t.type&&(t.type=Utils.getMimeType(t.src)),o.unshift(t),n=0,a=o.length;n<a;n++)if((i=o[n]).type===e)return i;return null},Utils.getMimeType=function(t){return this.mimeTypes[Utils.getFileExtension(t)]},Utils.selectTrack=function(t,e){var i,o,n,a;for(n=0,a=t.length;n<a;n++)if((i=t[n]).kind===e){o=i;break}return o},Utils.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)},Utils.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)},Utils.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)},Utils.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)},Utils.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)},Utils.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)},Utils.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)},Utils.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType},Utils.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()},Utils.isIOS=function(){var t;return(t=/iP(hone|od|ad)/i).test(navigator.platform)||t.test(navigator.userAgent)},Utils.getIOSversion=function(){var t;if(this.isIOS())return t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]},Utils.hasFlash=function(){var t;try{t=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){t=void 0!==navigator.mimeTypes["application/x-shockwave-flash"]}return t},Utils.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()||this.isIPad()},Utils.getDevice=function(){var t;return t="desktop",this.isIPhone()?t="iphone":this.isIPad()?t="ipad":/Android/.test(navigator.userAgent)?t="android":this.isKindleFireHD()?t="kindlefirehd":this.isKindleFire()&&(t="kindlefire"),t},Utils.xmlToJson=function(t){var e,i,o,n,a,r,s,l,c,d,u,p;if(r={},9===t.nodeType&&(t=t.firstChild),1===t.nodeType){if(t.attributes.length>0)for(r["@attributes"]={},n=s=0,c=(u=t.attributes).length;s<c;n=++s)e=u[n],r["@attributes"][e.nodeName]=e.nodeValue}else 3!==t.nodeType&&4!==t.nodeType||(r=t.nodeValue);if(t.hasChildNodes())for(n=l=0,d=(p=t.childNodes).length;l<d;n=++l)(3!==(i=p[n]).nodeType||/\S/.test(i.nodeValue))&&(a=i.nodeName.replace(/:/,"-"),null==(o=this.xmlToJson(i))["@attributes"]&&null!=o["#text"]&&(o=o["#text"]),null==r[a]?r[a]=o:(r[a]instanceof Array||(r[a]=[r[a]]),r[a].push(o)));return r},Utils.getXHR=function(){return new XHR},Utils.get=function(t,e,i){var o;return null==e&&(e={}),null==i&&(i=null),o=Utils.getXHR(),null!=e&&(null!=e.withCredentials&&(o.withCredentials=e.withCredentials),null!=e.onload&&(o.onload=e.onload),null!=e.onerror&&(o.onerror=e.onerror)),o.open("GET",t),null!=i&&o.setRequestHeaders(i),o.send(),o},Utils.getUTC=function(){return this.request("//time.akamai.com").then(function(t){return 1e3*parseInt(t.responseText)})},Utils.send=function(t,e,i,o){var n;return null==i&&(i={}),null==o&&(o={"Content-Type":"String"}),n=Utils.getXHR(),null!=i.onload&&(n.onload=i.onload),null!=i.onerror&&(n.onerror=i.onerror),n.open("POST",t),null!=o&&n.setRequestHeaders(o),n.send(e),n},Utils.request=function(t){return null==t&&(t={}),new Promise(function(e,i){var o,n,a,r;if("string"==typeof t&&(t={url:t}),null==t.method&&(t.method="GET"),(a=new XMLHttpRequest).open(t.method,t.url),a.onload=function(){return e(a)},a.onerror=function(t){return i(t)},a.withCredentials=t.withCredentials,null!=t.responseType)try{a.responseType=t.responseType}catch(t){}if(null!=t.headers)for(o in r=t.headers)n=r[o],null!=o&&null!=n&&a.setRequestHeader(o,n);return a.send(t.data||t.body)})},Utils.requestText=function(t){return null==t&&(t={}),this.request(t).then(function(t){return t.responseText})},Utils.requestJson=function(t){return null==t&&(t={}),this.requestText(t).then(function(t){return JSON.parse(t)})},Utils.loadScript=function(t,e){return new Promise(function(i,o){var n,a;n=e||document.getElementsByTagName("head")[0],(a=document.createElement("script")).type="text/javascript",a.addEventListener?(a.onload=function(){i(a)},a.onerror=function(t){o(t)}):a.readyState&&(a.onreadystatechange=function(t){"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onreadystatechange=null,i(a))}),a.src=t,n.appendChild(a)})},Utils.loadStyleSheet=function(t){var e,i;return e=document.getElementsByTagName("head")[0],(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.href=t,e.appendChild(i)},Utils.read=function(t,e,i,o){var n,a;null==e&&(e={}),null==i&&(i=""),null==o&&(o=[]);try{return n=(a=this.get(t,e,o)).responseText||a.text,i===Utils.mimeTypes.json?JSON.parse(n):i===Utils.mimeTypes.xml&&null!=a.responseXML?a.responseXML:n}catch(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("Read Error: ",t),null}},Utils.getFileExtension=function(t){return null==t&&(t=""),t.replace(/\?.*/,"").replace(/\#.*/,"").split(".").pop()},Utils.getResponseHeader=function(t,e,i){var o;return null==i&&(i={}),o=Utils.getXHR(),null!=i.onerror&&(o.onerror=i.onerror),o.open("HEAD",t,!1),o.send(),o.getResponseHeader(e)},Utils.getResponseHeaders=function(t,e,i){var o,n,a,r,s;if(null==i&&(i={}),a=Utils.getXHR(),null!=i.onerror&&(a.onerror=i.onerror),a.open("HEAD",t,!1),a.send(),n={},null==e)return a.getAllResponseHeaders();for(r=0,s=e.length;r<s;r++)n[o=e[r]]=a.getResponseHeader(o);return n},Utils.isTouch=null,Utils.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(t){this.isTouch=!1}return this.isTouch},Utils.clamp=function(t,e,i){return t<e&&(t=e),t>i&&(t=i),t},Utils.beacon=function(t,e){var i;return null==e&&(e="beaconId"),null==(i=document.getElementById(e))&&((i=document.createElement("img")).setAttribute("id",e),i.setAttribute("height",0),i.setAttribute("width",0),document.body.appendChild(i),i.style.display="none"),i.setAttribute("src",t),i},Utils.getElementOffset=function(t,e){var i,o,n,a,r,s;for(null==e&&(e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),o=0,r=0,s=t.offsetWidth,i=t.offsetHeight;t&&t!==e;)"BODY"===t.tagName?(n=t.scrollLeft||document.documentElement.scrollLeft,a=t.scrollTop||document.documentElement.scrollTop,o+=t.offsetLeft-n+t.clientLeft,r+=t.offsetTop-a+t.clientTop):(o+=t.offsetLeft-t.scrollLeft+t.clientLeft,r+=t.offsetTop-t.scrollTop+t.clientTop),t=t.offsetParent;return{left:o,top:r,width:s,height:i}},Utils.override=function(t,e,i){var o,n;if(null==i&&(i=!0),null==t)return e;if(null==e)return t;for(o in!0===i&&(t=Utils.clone(t),e=Utils.clone(e)),e)"object"==typeof(n=e[o])&&null!==n?(null==t[o]&&(t[o]=n instanceof Array?[]:{}),t[o]=Utils.override(t[o],n,!1)):t[o]=n;return t},Utils.diff=function(t,e){var i,o,n,a,r;if(null==e)return null;if(null==t&&null!=e)return e;for(n in i={},e)if(r=e[n],(a=t[n])!==r)if(null==a)i[n]=r;else switch(typeof r){case"string":case"number":case"boolean":case"function":i[n]=r;break;case"object":r instanceof Array?a.length!==r.length&&(i[n]=r):null!=(o=this.diff(a,r))&&(i[n]=o)}return 0===Object.keys(i).length?null:i},Utils.clone=function(t,e){var i,o,n,a,r,s,l,c;if(null==e&&(e=!0),null==t)return t;if("object"!=typeof t)i=t;else for(a in i=t instanceof Array?[]:{},t)if("object"==typeof(s=t[a])&&null!==s&&!0===e)if(s instanceof Array)for(i[a]=[],l=0,c=s.length;l<c;l++)o=s[l],i[a].push(this.clone(o));else for(n in i[a]={},s)r=s[n],i[a][n]=this.clone(r);else i[a]=s;return i},Utils.formatTimecode=function(t,e){var i;return t=parseInt(t),isNaN(t)?"00:00":(i=Utils.formatZeroFill(t%60),t=parseInt(t/60),i=Utils.formatZeroFill(t%60)+":"+i,(t=parseInt(t/60))>0&&(i=Utils.formatZeroFill(t)+":"+i),e>=3600&&5===i.length&&(i="00:"+i),i)},Utils.formatZeroFill=function(t){var e;return e=t.toString(),t<10&&(e="0"+e),e},Utils.flattenTimecode=function(t,e){var i,o,n,a;if(null==e&&(e=30),null==t||""===t)return NaN;for(i=0,4===(n=t.split(":")).length?i=parseInt(n.pop())/e:3===n.length&&(n[2]=n[2].replace(",","."),-1!==n[2].indexOf(".")&&(o=n[2].split(".")),(null!=o?o.length:void 0)>1&&(n[2]=o[0],i=parseInt(o[1])/1e3)),a=parseInt(n.pop());n.length>0;)a+=Math.pow(60,n.length)*parseInt(n.shift());return a+i},Utils.cacheBust=function(t,e,i){return null==e&&(e="cacheBust"),null==i&&(i=Date.now()),t+(-1===t.indexOf("?")?"?":"&")+e+"="+i},Utils.formatStyleName=function(t){return t.replace(/([A-Z])/,"-$1").toLowerCase()},Utils.trim=function(t){return t.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")},Utils.getFeed=function(t){return this.request(t).then(function(t){return"document"===t.responseType||/^</.test(t.responseText)?Utils.xmlToJson(t.responseXML):JSON.parse(t.responseText)})},Utils.getSource=function(t,e,i){var o,n;n=Utils.getPlaybackMode(),o=function(t){var i,o,a;(null!=(t=(new MRSSHelper).createFeed(t))&&null!=(a=t.item)?a.length:void 0)>0&&(i=function(t){return"flash"===n&&-1!==Utils.flashTypes.indexOf(t)||"html"===n&&-1===Utils.flashTypes.indexOf(t)?"maybe":""},o=Utils.selectSource(t.item[0].source,i)),"function"==typeof e&&e(o)},Utils.getFeed(t).then(o).catch(i)},Utils.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(t){}},Utils.clientX=0,Utils.clientY=0,Utils.pageX=0,Utils.pageY=0,Utils.mouseTracker=function(t){Utils.clientX=t.clientX,Utils.clientY=t.clientY,Utils.pageX=t.pageX,Utils.pageY=t.pageY},Utils.isMouseOverElement=function(t){var e;if(e=!1,null==t)return e;try{e=t.contains(document.elementFromPoint(Utils.clientX,Utils.clientY))}catch(t){e=!1}return e},Utils.trackMouse(),Utils.getActualSize=function(t,e){var i,o,n;return null==e&&(e=!0),n=t.offsetWidth,i=t.offsetHeight,!0===e&&(o=getComputedStyle(t),n+=parseInt(o.marginLeft)+parseInt(o.marginRight),i+=parseInt(o.marginTop)+parseInt(o.marginBottom)),{width:n,height:i}},Utils.isVolumeSettable=function(){var t,e;return e=navigator.userAgent.toLowerCase(),null==(t=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(e))||!("android"!==t[0]||!/Firefox/.test(e))},Utils.createFlashObject=function(t,e){var i,o,n,a,r,s,l,c,d;if(null!=t){if(r={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},Utils.override(r,t.params,!1),null!=t.vars){for(a in l=[],c=t.vars)s=c[a],l.push(a+"="+s);r.flashvars=l.join("&")}for(a in i={id:o=(null!=(d=t.attributes)?d.id:void 0)||this.createUID(),name:o,width:"100%",height:"100%",type:"application/x-shockwave-flash"},Utils.override(i,t.attributes,!1),-1!==this.getIEVersion()&&"direct"===r.wmode&&(r.wmode="transparent"),n="<object ",i)n+=a+'="'+(s=i[a])+'" ';for(a in n+=">\n",r)n+='<param name="'+a+'" value="'+(s=r[a])+'" />\n';n+="</object>",e.innerHTML=n}},Utils.createUID=function(t){var e,i;return null==t&&(t=16),e=Date.now(),2,i=2*t-1,(Math.round(Math.random()*i+t).toString(16)+e.toString(16)).toUpperCase()},Utils.chain=function(t,e){var i,o,n,a;for(i=Promise.resolve(e),n=0,a=t.length;n<a;n++)o=t[n],i=i.then(o);return i},Utils.arrayBufferToString=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))},Utils.parseJWT=function(t){var e;return e=t.split("."),{header:JSON.parse(atob(e[0])),payload:JSON.parse(atob(e[1])),signature:e[2]}},Utils.getFullScreenApi=function(t,e){var i;return i={},null!=t.webkitRequestFullScreen?(i.enter=t.webkitRequestFullScreen.bind(t),i.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement",i.error="webkitfullscreenerror"):null!=t.requestFullscreen?(i.enter=t.requestFullscreen.bind(t),i.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),i.event="onfullscreenchange",i.element="fullscreenElement",i.error="fullscreenerror"):null!=t.mozRequestFullScreen?(i.enter=t.mozRequestFullScreen.bind(t),i.exit=document.mozCancelFullScreen.bind(document),i.event="onmozfullscreenchange",i.element="mozFullscreenElement",i.error="mozfullscreenerror"):null!=t.msRequestFullscreen?(i.enter=t.msRequestFullscreen.bind(t),i.exit=document.msExitFullscreen.bind(document),i.event="MSFullscreenChange",i.element="msFullscreenElement",i.error="MSFullscreenError"):null!=e.webkitEnterFullscreen&&(i.enter=e.webkitEnterFullscreen.bind(e),i.exit=e.webkitExitFullscreen.bind(e),i.event=null,i.error=null),i},Utils.stringToArray=function(t){var e,i,o,n,a;for(i=new ArrayBuffer(2*t.length),e=new Uint16Array(i),o=n=0,a=t.length-1;0<=a?n<=a:n>=a;o=0<=a?++n:--n)e[o]=t.charCodeAt(o);return e},Utils.arrayToString=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},Utils.base64DecodeUint8Array=function(t){var e,i,o,n,a,r;for(n=(o=window.atob(t)).length,e=new Uint8Array(new ArrayBuffer(n)),i=a=0,r=n-1;0<=r?a<=r:a>=r;i=0<=r?++a:--a)e[i]=o.charCodeAt(i);return e},Utils.base64EncodeUint8Array=function(t){for(var e,i,o,n,a,r,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",d=0;d<t.length;)n=(e=t[d++])>>2,a=(3&e)<<4|(i=d<t.length?t[d++]:Number.NaN)>>4,r=(15&i)<<2|(o=d<t.length?t[d++]:Number.NaN)>>6,s=63&o,isNaN(i)?r=s=64:isNaN(o)&&(s=64),c+=l.charAt(n)+l.charAt(a)+l.charAt(r)+l.charAt(s);return c},Utils.getKeySystem=function(){var t;return t=navigator.userAgent,/Edge/.test(t)||/Trident/.test(t)?"com.microsoft.playready":/Chrome/.test(t)||/Firefox/.test(t)?"com.widevine.alpha":"com.apple.fps.1_0"},Utils.isAutoplaySupported=function(){var t;return t=!0,this.isIOS()&&(-1!==this.getSafariVersion()?t=this.getIOSversion()[0]>=10:this.isChrome()&&(t=this.getChromeVersion()>=53)),this.isChrome()&&this.isAndroid()&&(t=this.getChromeVersion()>=53),t},Utils.fieldIsUnique=function(t,e,i){var o,n,a,r,s;for(n=!0,o=r=0,s=t.length;r<s;o=++r)if(null!=(a=t[o])&&null!==a[e]&&a[e].toString().toLowerCase()===i.toString().toLowerCase()){n=!1;break}return n},Utils.toCamelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},Utils.toHyphenated=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t[0].toLowerCase()})},Utils.createElement=function(t,e,i,o){var n,a,r,s;if(null==o&&(o="div"),"string"==typeof o&&(o=document.createElement(o)),n=o.classList,null!=t)for("string"==typeof t&&(t=[t]),r=0,s=t.length;r<s;r++)a=t[r],n.add(a);return null!=i&&(o.textContent=i),null!=e&&e.appendChild(o),o},__extends(AMPConfig,EventDispatcher),AMPConfig.UNINITIALIZED=0,AMPConfig.LOADING=1,AMPConfig.LOADED=2,AMPConfig.parseModule=function(t){var e,i,o,n,a;for(o={},0,(e=t.childNodes).length,0,i=null,null,n=0,a=e.length;n<a;n++)1===(null!=(i=e[n])?i.nodeType:void 0)&&(o[i.nodeName]=this.parseItem(i));return o},AMPConfig.parseItem=function(t){var e,i,o,n,a,r;if(o=(""+t.getAttribute("type")).toLowerCase(),n=t.textContent||t.text||t.innerText,"object"!==o&&"array"!==o&&/#\{.*\}/.test(n))return n;switch(o){case"object":n=this.parseModule(t);break;case"array":for(n=[],a=0,r=(i=t.childNodes).length;a<r;a++)1===(e=i[a]).nodeType&&n.push(this.parseItem(e));break;case"boolean":n="true"===n.toLowerCase();break;case"number":n=parseFloat(n)}return n},AMPConfig.prototype.url=null,AMPConfig.prototype.data=null,AMPConfig.prototype.xml=null,AMPConfig.prototype.readyState=AMPConfig.UNINITIALIZED,AMPConfig.prototype.loaded=!1,AMPConfig.prototype.flash={PlaybackMetricsPlugin:{src:"#{paths.resources}plugins/PlaybackMetricsPlugin.swf",blocking:!1,host:"akamai",main:"PlaybackMetricsPlugin"},SubclipMonitorPlugin:{src:"#{paths.resources}plugins/SubclipMonitorPlugin.swf",blocking:!1,host:"akamai",main:"SubclipMonitorPlugin"},NetSessionClientPlugin:{src:"#{paths.resources}plugins/NetSessionClientPlugin.swf",blocking:!1,host:"akamai",main:"NetSessionClientPlugin"}},AMPConfig.prototype.loadURL=function(t,e){var i=this;null==e&&(e=!1),this.url=t,this.setReadyState(AMPConfig.LOADING),Utils.get(t,{withCredentials:e,onload:function(t){var e,o,n;"document"===(n=t.detail).responseType?(i.xml=n.responseXML,o=7!==i.xml.firstChild.nodeType?i.xml.firstChild:i.xml.childNodes[1],e=AMPConfig.parseModule(o)):"string"==typeof(e=n.response)&&(e=JSON.parse(e)),i.loadData(e)},onerror:function(t){i.dispatchEvent(new Event("error",t)),Logger.error(t)}})},AMPConfig.prototype.loadData=function(t){Config.defaults=t,this.setReadyState(AMPConfig.LOADED)},AMPConfig.prototype.load=function(t,e){switch(null==e&&(e=!1),typeof t){case"object":this.loadData(t);break;case"string":this.loadURL(t,e);break;default:throw new Error("[AMP ERROR] Invalid default configuration resource")}},AMPConfig.prototype.setReadyState=function(t){this.readyState=t,this.dispatchEvent(new Event("readystatechange",t)),t!==AMPConfig.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new Event("load",this.data)))},CaptionCue.prototype.id=null,CaptionCue.prototype.startTime=null,CaptionCue.prototype.endTime=null,CaptionCue.prototype.text=null,CaptionCue.prototype.html=null,CaptionCue.prototype.align=null;var FeatureNotifications={REGISTER_FEATURE:"registerfeature"};function SRTParser(){}function WebVTTParser(){}function SMPTETTParser(){}function LiveCaptionProxy(){var t,e=this;this.captions=[],this.head=document.getElementsByTagName("head")[0],(t=window.com||{}).akamai=t.akamai||{},t.akamai.amp=t.akamai.amp||{},t.akamai.amp.plugins=t.akamai.amp.plugins||{},t.akamai.amp.plugins.subply=t.akamai.amp.plugins.subply||{},t.akamai.amp.plugins.subply.response=function(t){e.parse(t),e.poll()},null==window.com&&(window.com=t),LiveCaptionProxy.__super__.constructor.call(this,this.constructor.NAME)}function AMP(){}function PluginCommand(){PluginCommand.__super__.constructor.call(this)}function CaptioningChangeMediaCommand(){CaptioningChangeMediaCommand.__super__.constructor.call(this)}function PluginEventCommand(){PluginEventCommand.__super__.constructor.call(this)}function CaptioningEnabledCommand(){CaptioningEnabledCommand.__super__.constructor.call(this)}SRTParser.prototype.parse=function(t,e){var i,o,n,a,r,s,l,c,d,u;for(d=0,u=(i=(e=e.replace(/\r/g,"")).split("\n\n")).length;d<u;d++){r=i[d].split("\n");try{a=r[0],c=r[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1),s=Utils.flattenTimecode(c[0]),n=Utils.flattenTimecode(c[1]),l=r.slice(2)}catch(t){Logger.instance.warn("SRT Parsing Warning")}(o=new CaptionCue(s,n,"cue_"+a)).html="<p>"+l.join("<br />")+"</p>",o.text=l.join("\n"),t.cues.push(o)}return t},WebVTTParser.prototype.parse=function(t,e){var i,o,n,a,r,s,l,c,d,u,p,h;for(o=(e=e.replace(/\r/g,"")).split("\n\n"),r=0,/^WEBVTT/.test(o[0])&&o.shift(),p=0,h=o.length;p<h;p++)if(""!==(i=o[p])){s=i.trim().split("\n");try{r=/^[0-9]+$/.test(s[0])?s.shift():++r,l=(u=s[0].match(/([0-9:\.]+)\s*-->\s*([0-9:\.]+)([^\n]*)/).slice(1))[2],c=Utils.flattenTimecode(u[0]),a=Utils.flattenTimecode(u[1]),d=s.slice(1),(n=new CaptionCue(c,a,"cue_"+r)).html="<p>"+d.join("<br />")+"</p>",n.text=d.join("\n"),null!=l&&l.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g,function(t,e,i){return n[e]=i,""}),t.cues.push(n)}catch(t){Logger.instance.error("WebVTT Parse Error")}}return t},SMPTETTParser.prototype.parse=function(t,e){var i,o,n;return"string"==typeof e&&(e=XMLUtils.parse(e)),Array.prototype.slice.call(e.querySelectorAll("styling style")).forEach(function(e,i,o){var n,a;a="",n=e.getAttribute("id")||e.getAttribute("xml:id"),Array.prototype.slice.call(e.attributes).forEach(function(t,e,i){if("tts"===t.prefix)return a+=Utils.formatStyleName(t.localName)+":"+t.nodeValue+";"}),t.styles[n]=a}),Array.prototype.slice.call(e.querySelectorAll("body [style]")).forEach(function(e,i,o){var n;n=e.getAttribute("style"),e.setAttribute("style",t.styles[n])}),o=(n=e.querySelector("tt")).getAttribute("lang")||n.getAttribute("xml:lang"),void 0!==t.language&&null!==t.language||(t.language=o),(i=Array.prototype.slice.call(e.querySelectorAll("body p[begin]"))).forEach(function(e,o,n){var a,r,s,l,c;l=e.getAttribute("begin"),e.removeAttribute("begin"),null!=e.getAttribute("end")?(s=e.getAttribute("end"),e.removeAttribute("end")):null!=i[o+1]&&(s=i[o+1].getAttribute("begin")),r=new CaptionCue(Utils.flattenTimecode(l),Utils.flattenTimecode(s),"cue_"+o),null!=(a=e.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"))&&(r.align="center"===a?"middle":a,e.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),c=(c=XMLUtils.serialize(e)).replace(/\s*xmlns="[^"]*"/,""),r.html=c,c=(c=(c=(c=(c=c.replace(/^<p[^>]*>/,"")).replace(/<\/p>$/,"")).replace(/<br\/>/,"\n")).replace(/<span style="([^"]*)"/,"<c.$1")).replace(/<\/span>/,"</c>"),r.text=c,t.cues.push(r)}),t},__extends(LiveCaptionProxy,puremvc.Proxy),LiveCaptionProxy.NAME="LiveCaptionProxy",LiveCaptionProxy.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},LiveCaptionProxy.prototype.caption=null,LiveCaptionProxy.prototype.head=null,LiveCaptionProxy.prototype.script=null,LiveCaptionProxy.prototype.timeout=null,LiveCaptionProxy.prototype.getURL=function(){return this.data.url},LiveCaptionProxy.prototype.setURL=function(t){return this.data.url=t,t},LiveCaptionProxy.prototype.start=function(){this.send()},LiveCaptionProxy.prototype.poll=function(){var t=this;setTimeout(function(){t.send()},this.data.interval||1e3)},LiveCaptionProxy.prototype.send=function(){var t=this;null!=this.script&&this.head.removeChild(this.script),this.script=Utils.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now()).then(function(e){return t.script=e}).catch(function(e){return t.facade.logger.error("[AMP CAPTIONING ERROR]",e)})},LiveCaptionProxy.prototype.stop=function(){clearTimeout(timeout)},LiveCaptionProxy.prototype.parse=function(t){var e,i,o,n;if(t.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=t.Ticks)){for(this.caption=new CaptionCue(Utils.flattenTimecode(t.From),Utils.flattenTimecode(t.To),t.Ticks),this.caption.text=t.Text,e="",i=0,o=(n=t.Text.split("\n")).length;i<o;i++)""!==e&&(e+="<br />"),e+="<span>"+n[i]+"</span>";return this.caption.html="<p>"+e+"</p>",this.sendNotification(CaptioningNotifications.CUE_CHANGE,[this.caption]),this.caption}},AMP.create=function(t,e,i){var o,n,a,r;if(n=Date.now(),"string"==typeof t?null==(o=document.getElementById(t))&&(o=document.querySelector(t)):o=t,null==o)throw new Error("[AMP ERROR] Invalid container. Could not find DOM element: "+t);return e=e instanceof Config?e:Config.create(e),Logger.instance=new Logger(e.debug),r=this.getVersion(),null==o.dataset&&(o.dataset={}),o.dataset["amp.version"]=r,Logger.instance.log("[AMP] "+r),(a=this.createPlayer(e,o)).initTime=n,o.amp=a,a.request=this.request.bind(this),a.require=this.require.bind(this),a.loadResources=a.loadModuleResources.bind(a),a.onready=i,a.initialize(e),a},AMP.createPlayer=function(t,e){var i;return null!=(i=this.players[t.mode])&&(i=new i(e)),i},AMP.getVersion=function(){return this.VERSION},AMP.VERSION="FOX News Player v7.90.9",AMP.defaults=new AMPConfig,AMP.plugins=[],AMP.players={},AMP.loadDefaults=function(t,e,i,o){null==o&&(o=!1),null!=e&&this.defaults.addEventListener("load",e),null!=i&&this.defaults.addEventListener("error",i),this.defaults.load(t,o)},AMP.getPlaybackMode=function(){return Utils.getPlaybackMode()},AMP.registerPlayer=function(t,e){this.players[t]=e},AMP.registerPlugin=function(t,e,i){var o,n,a,r,s;for(null==(n=this.plugins)[t]&&(n[t]={}),"function"==typeof e&&(e=(s=[i,e])[0],i=s[1]),"string"==typeof e&&(e=[e]),null==e&&(e=["html","flash"]),a=0,r=e.length;a<r;a++)o=e[a],this.plugins[t][o]=i},AMP.resourceManager=null,AMP.getResourceManager=function(){return null==this.resourceManager&&(this.resourceManager=new ResourceManager),this.resourceManager},AMP.addResource=function(t){return this.getResourceManager().add(t)},AMP.addResources=function(t){return this.getResourceManager().addResources(t)},AMP.request=function(t){return Utils.request(t)},AMP.requestJson=function(t){return Utils.requestJson(t)},AMP.require=function(t){return this.resourceManager.require(t)},AMP.getResource=function(t){return this.getResourceManager().item(t)},AMP.removeResource=function(t){return this.getResourceManager().remove(t)},AMP.evaluateBindings=function(t,e){return DataBinding.evaluateBindings(t,e)},AMP.registerPlayer("html",HTMLPlayer),AMP.registerPlayer("flash",FlashPlayer),AMP.registerPlayer("none",InstallPlayer),AMP.registerPlayer("external",ExternalPlayer),__extends(PluginCommand,PlayerCommand),PluginCommand.prototype.plugin=null,PluginCommand.prototype.proxy=null,PluginCommand.prototype.initializeNotifier=function(t){PluginCommand.__super__.initializeNotifier.call(this,t),this.proxy=this.facade.retrieveProxy(ModuleProxy.NAME),this.plugin=this.facade},__extends(CaptioningChangeMediaCommand,PluginCommand),CaptioningChangeMediaCommand.prototype.execute=function(t){var e,i;e=t.getBody(),i=t.getBody().track,this.proxy.setTracks(i),null!=i?(this.proxy.selectRenderer(e),this.sendNotification(CaptioningNotifications.ENABLED,!0)):this.sendNotification(CaptioningNotifications.ENABLED,!1)},__extends(PluginEventCommand,PluginCommand),PluginEventCommand.prototype.dispatchEvent=function(t,e){var i,o,n;"string"!=typeof t&&(null==(e=t.getBody())&&(e={}),t=t.getName()),null!=(o="function"==typeof(n=this.plugin).getFeatureName?n.getFeatureName():void 0)&&"auth"!==o&&(t=t.replace(new RegExp("^("+o+")"),"")),o=this.plugin.getModuleName(),i=new Event(t=t.replace(new RegExp("^("+o+")"),""),e),this.sendNotification(Notifications.DISPATCH_EVENT,i)},PluginEventCommand.prototype.dispatchEventAfterCommand=function(t,e){setTimeout(this.dispatchEvent.bind(this,t,e),0)},PluginEventCommand.prototype.execute=function(t){this.dispatchEvent(t)},__extends(CaptioningEnabledCommand,PluginEventCommand),CaptioningEnabledCommand.prototype.execute=function(t){this.proxy.setEnabled(t.getBody()),CaptioningEnabledCommand.__super__.execute.call(this,t)};var UserSettingsNotifications={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"};function CaptioningVisibilityChangeCommand(){CaptioningVisibilityChangeCommand.__super__.constructor.call(this)}function CaptioningTimeUpdateCommand(){CaptioningTimeUpdateCommand.__super__.constructor.call(this)}function CaptioningStartedCommand(){CaptioningStartedCommand.__super__.constructor.call(this)}function PluginWrapper(t,e){this.player=t,this.config=e,PluginWrapper.__super__.constructor.call(this),this.dispatcher=new EventDispatcher(this),this.createDefaults()}function CaptionTrack(t,e){var i,o=this;CaptionTrack.__super__.constructor.call(this,{kind:t.kind,label:t.label||this.srclang||this.kind,language:t.srclang}),this.src=t.src,this.type=t.type,this.cues=t.cues||[],this.styles=t.styles||{},this.activeCues=[],this.isLive=/live-subply/.test(this.type),null==this.src||""===this.src||this.isLive?setTimeout(e,1):i=Utils.get(this.src,{onload:function(){try{CaptionParsers[o.type].parse(o,i.response)}catch(t){return void Logger.instance.error("Could not parse caption track: "+o.src)}"function"==typeof e&&e()},onerror:function(){Logger.instance.error("Could not load caption track: "+o.src)}})}function OverlayMediator(){OverlayMediator.__super__.constructor.call(this,null,null,null,null)}function CaptioningProxy(t){this.activeCaptions=[],this.providers={},this.tracks=[],this.rendererMap=[],this.track={},CaptioningProxy.__super__.constructor.call(this,t)}function PluginComponentMediator(t,e,i,o){PluginComponentMediator.__super__.constructor.call(this,t,e,i,o)}function CaptioningNativeMediator(t){CaptioningNativeMediator.__super__.constructor.call(this,t)}function CaptioningHTMLMediator(t){CaptioningHTMLMediator.__super__.constructor.call(this,null,null,t,null)}__extends(CaptioningVisibilityChangeCommand,PluginEventCommand),CaptioningVisibilityChangeCommand.prototype.execute=function(t){var e;(e=!t.getBody())!==this.proxy.getHidden()&&(this.proxy.setHidden(e),CaptioningVisibilityChangeCommand.__super__.execute.call(this,t))},__extends(CaptioningTimeUpdateCommand,PluginCommand),CaptioningTimeUpdateCommand.prototype.execute=function(t){var e,i,o,n,a,r,s,l,c;if(r=t.getBody(),null!=(s=this.proxy.getTrack())){for(e=s.activeCues,i=!1,l=0,c=(n=s.cues).length;l<c;l++)r>=(o=n[l]).startTime&&r<o.endTime?__indexOf.call(e,o)>=0||(e.push(o),i=!0):-1!==(a=e.indexOf(o))&&(e.splice(a,1),i=!0);!0===i&&this.sendNotification(CaptioningNotifications.CUE_CHANGE,e)}},__extends(CaptioningStartedCommand,puremvc.SimpleCommand),CaptioningStartedCommand.prototype.execute=function(t){var e,i,o;null==(i=(e=this.facade.retrieveProxy(CaptioningProxy.NAME)).getTrack())&&(null!=(o=e.getTracks())?o.length:void 0)>0&&(i=e.autoSelectTrack()),!0===(null!=i?i.isLive:void 0)&&(this.facade.removeCommand(Notifications.TIME_UPDATE),null==(e=this.facade.retrieveProxy(LiveCaptionProxy.NAME))&&(e=new LiveCaptionProxy,this.facade.registerProxy(e)),e.setURL(i.src),e.start())},CaptionParsers={"application/ttml+xml":new SMPTETTParser,"application/x-subrip":new SRTParser,"text/vtt":new WebVTTParser,undefined:new SMPTETTParser},__extends(PluginWrapper,puremvc.Mediator),PluginWrapper.NAME="PluginWrapper",PluginWrapper.prototype.player=null,PluginWrapper.prototype.config=null,PluginWrapper.prototype.dispatcher=null,PluginWrapper.prototype.flashPlugins=null,PluginWrapper.prototype.createFlashVars=null,PluginWrapper.prototype.createXML=null,PluginWrapper.prototype.createDefaults=function(){this.player.createDefaults.call(this)},PluginWrapper.prototype.addEventListener=function(t,e){this.dispatcher.addEventListener(t,e)},PluginWrapper.prototype.logEvent=function(t){},PluginWrapper.prototype.dispatchEvent=function(t){"timeupdate"!==t.type&&"timeremaining"!==t.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+t.type,t),t.player=this.player,this.dispatcher.dispatchEvent(t)},PluginWrapper.prototype.removeEventListener=function(t,e){this.dispatcher.removeEventListener(t,e)},PluginWrapper.prototype.createElement=function(t,e,i){var o;return(o=t.createElement("element")).setAttribute("id",e),null==i&&(i=this.getControls(t).controls),null!=i&&i.appendChild(o),o},PluginWrapper.prototype.createProperty=function(t,e,i,o){var n,a,r;if((n=t.createElement("property")).setAttribute("key",e),null!=o&&o.appendChild(n),null!=i)if("object"!=typeof i||i instanceof Array)a=XMLUtils.createTextContent(t,i.toString()),n.appendChild(a);else for(e in i)r=i[e],this.createProperty(t,e,r,n);return n},PluginWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.CREATE_XML]},PluginWrapper.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case FlashNotifications.CREATE_FLASH_VARS:"function"==typeof this.createFlashVars&&this.createFlashVars(e.flashvars);break;case FlashNotifications.CREATE_XML:"function"==typeof this.createXML&&this.createXML(e.xml)}},PluginWrapper.prototype.destroy=function(){},__extends(CaptionTrack,Track),CaptionTrack.prototype.src=null,CaptionTrack.prototype.cues=null,CaptionTrack.prototype.activeCues=null,CaptionTrack.prototype.type=null,CaptionTrack.prototype.styles=null,CaptionTrack.prototype.isLive=!1,__extends(OverlayMediator,ComponentMediator),OverlayMediator.prototype.componentType="overlay",OverlayMediator.prototype.onRegister=function(){OverlayMediator.__super__.onRegister.call(this),this.registerOverlay()},OverlayMediator.prototype.onRemove=function(){OverlayMediator.__super__.onRemove.call(this),this.removeOverlay()},OverlayMediator.prototype.registerOverlay=function(){this.sendNotification(Notifications.ADD_OVERLAY,this.viewComponent)},OverlayMediator.prototype.removeOverlay=function(){this.sendNotification(Notifications.REMOVE_OVERLAY,this.viewComponent)},__extends(CaptioningProxy,PluginProxy),CaptioningProxy.NAME=ModuleProxy.NAME,CaptioningProxy.TEXT_TRACK_RENDERER="caption-text",CaptioningProxy.prototype.defaults={useNative:!1,crossorigin:null},CaptioningProxy.prototype.enabled=!1,CaptioningProxy.prototype.hidden=!0,CaptioningProxy.prototype.tracks=null,CaptioningProxy.prototype.track=null,CaptioningProxy.prototype.activeCaptions=null,CaptioningProxy.prototype.captions=null,CaptioningProxy.prototype.loaded=!0,CaptioningProxy.prototype.rendererMap=null,CaptioningProxy.prototype.getUseNative=function(){return this.getValue("useNative")},CaptioningProxy.prototype.getCrossOrigin=function(){return this.getValue("crossorigin")},CaptioningProxy.prototype.getTracks=function(){return this.tracks},CaptioningProxy.prototype.setTracks=function(t){var e,i,o,n,a,r,s=this;if(this.tracks=[],this.track=null,null!=t){for(e=t.length,i=0,n=function(){++i===e&&(s.sendNotification(CaptioningNotifications.TRACKS_LOADED,s.tracks),s.autoSelectTrack())},a=0,r=t.length;a<r;a++)o=new CaptionTrack(t[a],n),this.tracks.push(o);return t}},CaptioningProxy.prototype.registerRenderer=function(t){null!=t&&(t.proxy=this,this.rendererMap.push(t))},CaptioningProxy.prototype.retrieveRenderer=function(t){var e,i,o,n;for(i=0,o=(n=this.rendererMap).length;i<o;i++)if((e=n[i]).getRendererName()===t)return e},CaptioningProxy.prototype.removeRenderer=function(t){var e,i;return(i=this.retrieveRenderer(t)).proxy=null,null==i?null:(e=this.rendererMap.indexOf(i),this.rendererMap.splice(e,1),i)},CaptioningProxy.prototype.getRenderer=function(){return this.renderer},CaptioningProxy.prototype.setRenderer=function(t){return t===this.renderer?t:(null!=this.renderer&&this.facade.removeMediator(CaptioningProxy.TEXT_TRACK_RENDERER),this.renderer=t,null!=this.renderer&&this.facade.registerMediator(this.renderer),t)},CaptioningProxy.prototype.selectRenderer=function(t){var e,i,o,n,a,r,s,l,c;if(i=null,null!=(n=t.track)){for(a=0,s=n.length;a<s;a++){for(o=n[a],r=0,l=(c=this.rendererMap).length;r<l;r++)if(!0===(e=c[r]).canUseResource(o)){i=e;break}if(null!=i)break}return this.setRenderer(i),i}},CaptioningProxy.prototype.getTrack=function(){return this.track},CaptioningProxy.prototype.setTrack=function(t){return this.track=t,this.captions=this.track.cues,this.activeCaptions=[],this.sendNotification(Notifications.CHANGE_SETTINGS,{captions:{track:this.track.flatten()}}),this.sendNotification(CaptioningNotifications.TRACK_SELECTED,this.track),t},CaptioningProxy.prototype.selectTrackByIndex=function(t){var e;return 0<=t&&t<this.tracks.length&&(e=this.tracks[t],this.setTrack(e)),e},CaptioningProxy.prototype.selectTrackByLanguage=function(t){var e,i,o,n,a;for(o=0,n=(a=this.tracks).length;o<n;o++)if((e=a[o]).language===t){i=e;break}return null!=i&&this.setTrack(i),i},CaptioningProxy.prototype.getHidden=function(){return this.hidden},CaptioningProxy.prototype.setHidden=function(t){return this.hidden=t,t},CaptioningProxy.prototype.getEnabled=function(){return this.enabled},CaptioningProxy.prototype.setEnabled=function(t){return this.enabled=t,t},CaptioningProxy.prototype.autoSelectTrack=function(){var t,e,i;return null!=(t=null!=(i=this.facade.player.retrieveProxy(LocalizationProxy.NAME))?i.getLanguage():void 0)&&(t=t.split("-").shift(),e=this.selectTrackByLanguage(t)),null==e&&(e=this.tracks[0],this.setTrack(e)),e},__extends(PluginComponentMediator,ComponentMediator),PluginComponentMediator.prototype.initializeNotifier=function(t){PluginComponentMediator.__super__.initializeNotifier.call(this,t),this.plugin=this.facade.retrieveProxy(ModuleProxy.NAME),this.media=this.facade.player.retrieveProxy(MediaProxy.NAME)},__extends(CaptioningNativeMediator,LocalizedMediator),CaptioningNativeMediator.prototype.video=null,CaptioningNativeMediator.prototype.index=-1,CaptioningNativeMediator.prototype.plugin=null,CaptioningNativeMediator.prototype.parallelement=null,CaptioningNativeMediator.prototype.paralleltimer=null,CaptioningNativeMediator.prototype.paddingvalue=6,CaptioningNativeMediator.prototype.cueChangeListener=null,CaptioningNativeMediator.prototype.lineheight=34,CaptioningNativeMediator.prototype.playerDefaultHeight=648,CaptioningNativeMediator.NAME=CaptioningProxy.TEXT_TRACK_RENDERER,CaptioningNativeMediator.prototype.getRendererName=function(){return"native"},CaptioningNativeMediator.prototype.canUseResource=function(t){var e,i;return null!=t&&(null!=document.createElement("video").textTracks&&(i=[Utils.mimeTypes.vtt,Utils.mimeTypes.cea608,Utils.mimeTypes.cea708],(e=t.type)===i[1]||e===i[2]||!!(/iphone|ipad/.test(Utils.getDevice())||this.proxy.getUseNative())&&-1!==i.indexOf(t.type)))},CaptioningNativeMediator.prototype.onRegister=function(){this.plugin=this.facade.retrieveProxy(CaptioningProxy.NAME),this.cueChangeListener=this.cueChange.bind(this),Utils.getSafariVersion()<0&&this.facade.player.getMediaElement().textTracks.addEventListener("addtrack",this.updateTrack.bind(this)),this.facade.player.getMediaElement().textTracks.addEventListener("cuechange",this.cueChangeListener),null==this.plugin||null==this.plugin.config||this.plugin.config.hasOwnProperty("useparallelrendering")||(this.plugin.config.useparallelrendering=!1)},CaptioningNativeMediator.prototype.onRemove=function(){null!==this.viewcomponent&&null!==this.parallelelment&&(this.viewComponent.removeChild(this.parallelement),this.facade.player.getMediaElement().textTracks.removeEventListener("addtrack",this.updateTrack),this.facade.player.getMediaElement().textTracks.removeEventListener("cuechange",this.cueChangeListener))},CaptioningNativeMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.TRACK_SELECTED,CaptioningNotifications.TRACKS_LOADED,Notifications.LOADED_METADATA,Notifications.CAN_PLAY_THROUGH,AdNotifications.BREAK_START]},CaptioningNativeMediator.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l;switch(e=t.getBody(),t.getName()){case CaptioningNotifications.TRACKS_LOADED:this.tracks=e;break;case CaptioningNotifications.TRACK_SELECTED:this.facade.player.getMediaElement().textTracks.length&&(n=this.facade.player.getMediaElement().textTracks[this.index]),null!=n&&(n.mode="hidden"),this.index=this.plugin.getTracks().indexOf(e),this.lang=e.language,this.updateTrack();break;case CaptioningNotifications.VISIBILITY_CHANGE:case Notifications.CAN_PLAY_THROUGH:this.updateTrack();break;case AdNotifications.BREAK_START:this.clearCaption();break;case Notifications.LOADED_METADATA:if(null==this.tracks)return;for(a=this.facade.player.getMediaElement(),null!=(i=this.plugin.getCrossOrigin())&&a.setAttribute("crossorigin",i),r=0,s=(l=this.tracks).length;r<s;r++)(n=l[r]).type===Utils.mimeTypes.vtt&&((o=document.createElement("track")).src=n.src,null!=n.kind&&(o.kind=n.kind),null!=n.language&&(o.srclang=n.language),null!=n.label&&(o.label=n.label),o.default="default"in n,a.appendChild(o));this.tracks=null}},CaptioningNativeMediator.prototype.updateTrack=function(t){var e,i,o,n,a,r,s,l,c;for(e=this.plugin.config,o=a=0,r=(s=this.facade.player.getMediaElement().textTracks).length;a<r;o=++a)if(n=s[o],/subtitles|captions/.test(n.kind)&&(n.language===this.lang||!n.language.length)){if(null==n)return;this.index=o,this.getTracksByKind(n.kind).length>1&&(this.suppressDupeTracks(n.kind,[1]),1===o&&(n.mode=this.plugin.getHidden()?"hidden":"showing")),"subtitles"===n.kind?n.mode="hidden":!1===e.useparallelrendering&&(n.mode=this.plugin.getHidden()?"hidden":"showing")}if((!t||"metadata"!==(null!=(l=t.track)?l.kind:void 0))&&(this.plugin.getHidden()?null!=this.plugin&&this.plugin.config.useparallelrendering?null!=this.parallelement&&(this.parallelement.style.display="none"):this.clearCaption():null!=this.plugin&&this.plugin.config.useparallelrendering&&null!=this.parallelement&&(this.parallelement.style.display="inline"),null!=(c=this.plugin)?c.config.useparallelrendering:void 0)){if(i=null,this.parallelement||this.createParallelement(),t&&(i=t.track),i&&null!==i.language&&i.language!==this.lang)return;this.useParallelRendering(this.plugin.config.useparallelrendering,i)}},CaptioningNativeMediator.prototype.createParallelement=function(){if(!this.parallelement)return this.parallelement=document.createElement("div"),this.parallelement.className="akamai-caption-container",this.viewComponent.appendChild(this.parallelement),this.parallelement},CaptioningNativeMediator.prototype.useParallelRendering=function(t,e){var i,o;if(null!=(i=this.plugin)&&(i.config.useparallelrendering=t),!e&&(null!=(o=this.facade.player.getMediaElement().textTracks)?o.length:void 0)&&(e=this.facade.player.getMediaElement().textTracks[this.index]),e){if(!0!==t)return e.hasCueChangeListener=!1,e.removeEventListener("cuechange",this.cueChangeListener);if(!1===e.hasCueChangeListener||void 0===e.hasCueChangeListener)return e.hasCueChangeListener=!0,e.addEventListener("cuechange",this.cueChangeListener)}},CaptioningNativeMediator.prototype.cueChange=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y;if(l=!this.proxy.track||this.proxy.track.kind===t.target.kind,!this.plugin.getHidden()&&l){for(c=0,!1,this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null),this.parallelement&&(this.parallelement.innerHTML=""),i=[],s=0;s<t.target.activeCues.length;){if(new RegExp('^{".*}$').test(t.target.activeCues[s].text))return;this.parallelement.style.display="inline",i[s]=document.createElement("div"),i[s].className="akamai-caption-text",this.viewComponent.getElementsByClassName("akamai-caption-container")[0].appendChild(i[s]),e=document.createElement("p"),i[s].appendChild(e),(n=window.getComputedStyle(e).lineHeight.replace("px",""))&&(this.lineheight=n),h=void 0,h=-1!==navigator.userAgent.indexOf("Firefox")?t.target.activeCues[s].position-50+"%":t.target.activeCues[s].position+"%",y=void 0,d=(a=this.facade.player.getMediaElement().getBoundingClientRect().height)/this.playerDefaultHeight*100,y=null===(u=t.target.activeCues[s].snapToLines)||!0!==t.target.activeCues[s].snapToLines&&void 0!==u?a/100*t.target.activeCues[s].line*10:t.target.activeCues[s].line*(this.lineheight/100*d),s>0&&y&&(y+=(this.viewComponent.getElementsByClassName("akamai-caption-container")[0].childNodes[0].offsetHeight-this.lineheight/100*d)*s),y+="px",i[s].style.left=h,i[s].style.top=y,i[s].style.textAlign="left",i[s].style.position="absolute",i[s].style.bottom="auto",i[s].style.display="inline",i[s].style.padding=this.paddingvalue+"px",i[s].style.width="auto",i[s].style["min-height"]="0px",e.innerHTML=t.target.activeCues[s].text,e.style.margin="0px",e.style.display="block",e.style.lineHeight="normal",o=null;try{(p=document.createElement("span")).style.fontSize=JSON.parse(localStorage.getItem("akamai-captioningDefault")).size,i[s].appendChild(p),o=window.getComputedStyle(p).fontSize.replace("px",""),p=null}catch(t){}o&&(c=Math.max(c,(Number(y.replace("px",""))||0)+i[s].getBoundingClientRect().height)),s===t.target.activeCues.length-1&&(r=1e3*((t.target.activeCues[s].endTime?t.target.activeCues[s].endTime:0)-(t.target.activeCues[s].startTime?t.target.activeCues[s].startTime:0)))>500&&(this.paralleltimer=setTimeout(this.clearCaption.bind(this),r)),s++}if(c>a)for(c-=a,s=0;s<i.length;)i[s].style.top=Number(i[s].style.top.replace("px",""))-c+"px",s++}},CaptioningNativeMediator.prototype.clearCaption=function(){this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null),this.parallelement&&(this.parallelement.innerHTML="")},CaptioningNativeMediator.prototype.getTracksByKind=function(t){var e,i,o,n,a;for(e=[],n=0,a=(o=this.facade.player.getMediaElement().textTracks).length;n<a;n++)(i=o[n]).kind===t&&"en"===i.language&&e.push(i);return e},CaptioningNativeMediator.prototype.suppressDupeTracks=function(t,e){var i,o,n,a,r;for(i=n=0,a=(r=this.getTracksByKind(t)).length;n<a;i=++n)if((o=r[i]).kind===t&&"en"===o.language){if(null!=e&&new RegExp(i).test(e))continue;o.mode="hidden"}return i>0},__extends(CaptioningHTMLMediator,PluginComponentMediator),CaptioningHTMLMediator.prototype.componentName=CaptioningProxy.TEXT_TRACK_RENDERER,CaptioningHTMLMediator.prototype.captionText=null,CaptioningHTMLMediator.prototype.getRendererName=function(){return"html"},CaptioningHTMLMediator.prototype.onRemove=function(){if(null!==this.viewComponent)for(;this.viewComponent.firstChild;)this.viewComponent.removeChild(this.viewComponent.firstChild)},CaptioningHTMLMediator.prototype.canUseResource=function(t){return null!=t&&-1!==[Utils.mimeTypes.srt,Utils.mimeTypes.ttml,Utils.mimeTypes.vtt].indexOf(t.type)},CaptioningHTMLMediator.prototype.getCaptionDisplayHeight=function(){var t,e,i;for(t=0,e=i=this.viewComponent.childNodes.length;e&&(--e,3!==i||0!==e);)t+=Utils.getActualSize(this.viewComponent.childNodes[e]).height;return t+"px"},CaptioningHTMLMediator.prototype.scrollCaptions=function(t,e,i){var o,n,a=this;null==t&&(t=this.viewComponent.scrollHeight),null==e&&(e=this.viewComponent.scrollTop),null==i&&(i=20),n=(t-e)/i,(o=function(){var i;if(e<t)return a.viewComponent.scrollTop=e+=n,setTimeout(o,20);for(i=[];a.viewComponent.childNodes.length>2;)i.push(a.viewComponent.removeChild(a.viewComponent.firstChild));return i})()},CaptioningHTMLMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.CUE_CHANGE,Notifications.CHANGE_MEDIA]},CaptioningHTMLMediator.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f;switch(s=t.getName(),e=t.getBody(),s){case Notifications.CHANGE_MEDIA:this.viewComponent.innerHTML="";break;case CaptioningNotifications.CUE_CHANGE:for(i="",(l=this.facade.player.settings.captions||{}).scroll=l.scroll.toLowerCase().replace("-",""),d=0,h=e.length;d<h;d++){for(a=e[d],u=0,y=(g=this.viewComponent.children).length;u<y;u++)o=g[u],!new RegExp(a.html).test(o.outerHTML)||l.scroll;i+=a.html}switch("painton"===l.scroll?this.classList.add("captioning-typed"):this.classList.remove("captioning-typed"),l.scroll){case"popout":this.viewComponent.innerHTML=i;break;case"rollon":case"painton":for((c=document.createElement("div")).innerHTML=i,r=p=0,m=(f=c.childNodes).length;p<m;r=++p)n=f[r],this.viewComponent.children.length&&new RegExp(n.innerText).test(this.viewComponent.lastChild.innerText)||this.viewComponent.appendChild(n);this.viewComponent.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}}};var CaptioningNotifications={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"};function LocalizationConstants(){}function PluginMediator(){PluginMediator.__super__.constructor.call(this)}function CaptioningMediator(t){CaptioningMediator.__super__.constructor.call(this,t)}function CaptioningWrapper(t,e){CaptioningWrapper.__super__.constructor.call(this,t,e),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1}})}function Feature(){Feature.__super__.constructor.call(this)}function UpdateUserSettingCommand(){UpdateUserSettingCommand.__super__.constructor.call(this)}function UserSettingsProxy(t){this.settings={},UserSettingsProxy.__super__.constructor.call(this,t)}function UserSettingsReadyCommand(){UserSettingsReadyCommand.__super__.constructor.call(this)}function UserSettingsVolumeChangeCommand(){UserSettingsVolumeChangeCommand.__super__.constructor.call(this)}function CaptioningPlugin(){CaptioningPlugin.__super__.constructor.call(this),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1},settings:{get:this.getSettings,enumerable:!0,configurable:!1}})}function contextMenuMediator(){contextMenuMediator.__super__.constructor.call(this)}function IOSCursorMediator(){IOSCursorMediator.__super__.constructor.call(this,this.NAME)}function TitleBarMediator(){TitleBarMediator.__super__.constructor.call(this)}function ControlsProxy(t){ControlsProxy.__super__.constructor.call(this,t),this.keypress=this.keypress.bind(this)}function ControlsWrapper(t,e){ControlsWrapper.__super__.constructor.call(this,t,e)}function ControlsPlayCommand(){ControlsPlayCommand.__super__.constructor.call(this)}function ControlsPauseCommand(){ControlsPauseCommand.__super__.constructor.call(this)}function ControlsActiveStateChangeCommand(){ControlsActiveStateChangeCommand.__super__.constructor.call(this)}function ControlsAdBreakStartCommand(){ControlsAdBreakStartCommand.__super__.constructor.call(this)}function ControlsAdBreakEndCommand(){ControlsAdBreakEndCommand.__super__.constructor.call(this)}function ControlsMediaValidatedCommand(){ControlsMediaValidatedCommand.__super__.constructor.call(this)}function ControlsStartedCommand(){ControlsStartedCommand.__super__.constructor.call(this)}function ControlsStartCommand(){ControlsStartCommand.__super__.constructor.call(this)}function ControlsDisplayStateChangeCommand(){ControlsDisplayStateChangeCommand.__super__.constructor.call(this)}function ReplayOverlayMediator(){ReplayOverlayMediator.__super__.constructor.call(this)}function ErrorLayerMediator(){ErrorLayerMediator.__super__.constructor.call(this)}function LoadingOverlayMediator(){LoadingOverlayMediator.__super__.constructor.call(this)}function WaitingOverlayMediator(){WaitingOverlayMediator.__super__.constructor.call(this)}function PosterMediator(){PosterMediator.__super__.constructor.call(this)}function EndSlateMediator(){EndSlateMediator.__super__.constructor.call(this)}function ButtonMediator(t,e,i,o,n){this.labelText=t,this.onclick=null!=n?n:this.onclick,ButtonMediator.__super__.constructor.call(this,o,null,e,i)}function LogoMediator(t){LogoMediator.__super__.constructor.call(this,null,null,t)}function FullScreenMediator(t){FullScreenMediator.__super__.constructor.call(this,null,t)}function SliderMediator(t,e){this.direction=null!=e?e:this.direction,SliderMediator.__super__.constructor.call(this,null,null,t)}LocalizationConstants.MSG_LIVE="MSG_LIVE",LocalizationConstants.MSG_REPLAY="MSG_REPLAY",LocalizationConstants.MSG_BUFFERING="MSG_BUFFERING_TEXT",LocalizationConstants.MSG_CC="MSG_CC",LocalizationConstants.MSG_CC_TITLE="MSG_CC_TITLE",LocalizationConstants.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE",LocalizationConstants.MSG_CC_PRESETS="MSG_CC_PRESETS",LocalizationConstants.MSG_CC_FONT="MSG_CC_FONT",LocalizationConstants.MSG_CC_EDGE="MSG_CC_EDGE",LocalizationConstants.MSG_CC_SIZE="MSG_CC_SIZE",LocalizationConstants.MSG_CC_SCROLL="MSG_CC_SCROLL",LocalizationConstants.MSG_CC_COLOR="MSG_CC_COLOR",LocalizationConstants.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND",LocalizationConstants.MSG_CC_EDGE="MSG_CC_EDGE",LocalizationConstants.MSG_CC_WINDOW="MSG_CC_WINDOW",LocalizationConstants.MSG_CC_OPACITY="MSG_CC_OPACITY",LocalizationConstants.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED",LocalizationConstants.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED",LocalizationConstants.MSG_CC_RESET="MSG_CC_RESET",LocalizationConstants.MSG_CC_CANCEL="MSG_CC_CANCEL",LocalizationConstants.MSG_CC_APPLY="MSG_CC_APPLY",LocalizationConstants.MSG_CC_PREVIEW_TEXT="MSG_CC_PREVIEW_TEXT",LocalizationConstants.MSG_SECONDS="MSG_SECONDS",LocalizationConstants.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE",LocalizationConstants.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO",LocalizationConstants.MSG_NEXT_AD="MSG_NEXT_AD",LocalizationConstants.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR",LocalizationConstants.MSG_VIEW_ALL="MSG_VIEW_ALL",LocalizationConstants.MSG_VIDEO="MSG_VIDEO",__extends(PluginMediator,OverlayMediator),PluginMediator.prototype.initializeNotifier=function(t){PluginMediator.__super__.initializeNotifier.call(this,t),this.plugin=this.facade.retrieveProxy(ModuleProxy.NAME),this.media=this.facade.player.retrieveProxy(MediaProxy.NAME)},PluginMediator.prototype.onRegister=function(){PluginMediator.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent},__extends(CaptioningMediator,PluginMediator),CaptioningMediator.prototype.componentName="captioning",CaptioningMediator.prototype.onRegister=function(){CaptioningMediator.__super__.onRegister.call(this),this.captioningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captioningStyle.type="text/css",this.applyStyles()},CaptioningMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.ENABLED,CaptioningNotifications.TRACK_SELECTED,Notifications.SETTINGS_CHANGE]},CaptioningMediator.prototype.onRemove=function(){this.captioningStyle&&document.getElementsByTagName("head")[0].removeChild(this.captioningStyle)},CaptioningMediator.prototype.handleNotification=function(t){var e,i,o;switch(i=(e=t.getBody())?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE,t.getName()){case CaptioningNotifications.TRACK_SELECTED:o="cc-embedded",i="embedded"===e.type?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE;break;case CaptioningNotifications.VISIBILITY_CHANGE:o="cc-active";break;case CaptioningNotifications.ENABLED:i=e?Notifications.ADD_CONTROL_STATE:Notifications.REMOVE_CONTROL_STATE,o="cc-enabled",e||this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"cc-active");break;case Notifications.SETTINGS_CHANGE:null!=e.captions&&this.applyStyles()}this.sendNotification(i,o)},CaptioningMediator.prototype.applyStyles=function(){var t,e,i,o,n,a,r,s,l,c;null!=(s=this.facade.settings).visible&&(this.facade.hidden=!s.visible),n="font-family: "+s.fontFamily+" !important;",o=s.edgeType+" "+s.edgeColor+" !important;",a="font-size: "+s.size+" !important;",e="color: "+s.fontColor+" !important;",t="background-color: "+s.backgroundColor+" !important;",i="line-height:2.2em;",null!=(c=(l="background-color: "+s.windowColor+" !important;").match(/rgba\([^)]+\)/g))&&c instanceof Array&&c.length>0&&(i=0===Number(c[0].replace(/^.*, (.+)\)/,"$1"))?"":i),r=this.facade.player.viewComponent.id,this.captioningStyle.innerHTML="#"+r+" .akamai-caption-text { "+n+a+o+l+" } #"+r+" .akamai-caption-text p { "+e+t+" } video::-webkit-media-text-track-display { "+l+" } video::-webkit-media-text-track-display span { "+n+a+o+t+" } video::-webkit-media-text-track-display { "+l+" } video::cue { "+e+n+a+o+t+" } video::-webkit-media-text-track-container {"+i+"} video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}"},__extends(CaptioningWrapper,PluginWrapper),CaptioningWrapper.NAME="CaptioningWrapper",CaptioningWrapper.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}],CaptioningWrapper.prototype.flashView={elements:{captionDisplay:{attributes:{defaultMessage:"Sorry! No captions available for this stream",initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 0px; windowColor :0x000000; windowOpacity: 0; font: Monospaced Serif; fontColor: 0xffffff; fontOpacity: 1; fontBGColor: 0x000000; fontBGOpacity: 0; edgeType: none; edgeColor: 0x000000; edgeOpacity: 1; scroll: Pop-Out; fontSize: 12;"}},controls:{elements:{captionBtn:null}}}},CaptioningWrapper.prototype._hidden=!0,CaptioningWrapper.prototype.createXML=function(t){var e,i,o;if(null!=(i=null!=(o=this.config.flash)?o.subply:void 0))try{null!=i.timeMethod&&t.getElementsByTagName("player")[0].setAttribute("subply_time_method",i.timeMethod),null!=i.plugin&&(e=t.firstChild,null==(i=t.getElementsByTagName("subply")[0])&&(i=t.createElement("subply"),e.appendChild(i)),this.createProperty(t,"SUBPLY_URL",this.config.flash.subply.plugin,i))}catch(t){this.facade.logger.error("[AMP CAPTIONING ERROR]",t)}},CaptioningWrapper.prototype.createFlashVars=function(t){var e,i,o,n,a,r,s,l;if(null!=(null!=(s=(o=this.player.config).media)?s.track:void 0)){if(null!=(n=Utils.selectTrack(o.media.track,"captions")).src&&""!==n.src&&(t.caption_url=n.src),o.media.track.length>0){for(i=[],e=[],a=0,r=(l=o.media.track).length;a<r;a++)n=l[a],i.push(n.src),e.push(n.srclang);t.caption_url=i.join(","),t.caption_language=e.join(",")}t.caption_type=null!=n.type?encodeURIComponent(n.type):"application/ttml+xml"}null==t.caption_language&&(t.caption_language="en-us")},CaptioningWrapper.prototype.listNotificationInterests=function(){return CaptioningWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIA_CHANGE,FlashNotifications.CAPTIONING_REQUEST,FlashNotifications.CAPTION_LANG_CHANGE,FlashNotifications.INITIALIZED])},CaptioningWrapper.prototype.handleNotification=function(t){var e,i,o,n,a;switch(CaptioningWrapper.__super__.handleNotification.call(this,t),o=t.getName(),e=t.getBody(),o){case FlashNotifications.CAPTION_LANG_CHANGE:a="";break;case FlashNotifications.CAPTIONING_REQUEST:a="visibilitychange",e=e.enabled,this.hidden=!e;break;case Notifications.MEDIA_CHANGE:if(null!=(i=e).track){if(this._tracks=i.track.map(function(t){return Object.assign({language:t.srclang},t)}),null==(n=Utils.selectTrack(this._tracks,"captions")))return;null!=n.src&&""!==n.src&&(i.captioningUrl=n.src),null!=n.type&&(i.captioningType=n.type||"application/ttml+xml"),this._track=n}break;case FlashNotifications.INITIALIZED:this.hidden=!this.player.getMediaElement().getPlayerProperty("isCaptionVisible")}null!=a&&""!==a&&this.dispatchEvent(new Event(a,e))},CaptioningWrapper.prototype.getHidden=function(){return this._hidden},CaptioningWrapper.prototype.setHidden=function(t){return this._hidden=t,this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!t}),t},CaptioningWrapper.prototype.getVisible=function(){return!this._hidden},CaptioningWrapper.prototype.setVisible=function(t){return this.setHidden(!t),t},CaptioningWrapper.prototype.getTracks=function(){return this._tracks||[]},CaptioningWrapper.prototype.getTrack=function(){return this._track},CaptioningWrapper.prototype.selectTrackByIndex=function(t){},CaptioningWrapper.prototype.selectTrackByLanguage=function(t){this.facade.getMediaElement().setTrackByLanguage(t)},CaptioningWrapper.prototype.changeSettings=function(t){if(null!=(null!=t?t.fontFamily:void 0)&&"object"==typeof t.fontFamily)return this.facade.getMediaElement().setPlayerProperty("captionSettingsUI",t);null!=(null!=t?t.visible:void 0)&&(this.hidden=!t.visible),this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!this.hidden,style:this.parseObject(t)})},CaptioningWrapper.prototype.parseObject=function(t){var e,i,o,n;e={};try{for(o in t)switch(o){case"fontFamily":e.font=t[o];break;case"fontColor":case"backgroundColor":case"edgeColor":case"windowColor":i="fontColor"===o?"font":"backgroundColor"===o?"fontBG":"edgeColor"===o?"edge":"window",-1!==(null!=(n=t[o])?n.indexOf("rgba"):void 0)&&(e[i+"Color"]=this.parseRGBA(t[o]),e[i+"Opacity"]=t[o].replace(/^.*,(.+)\)/,"$1"));break;default:e[o]=t[o]}delete e.visible}catch(t){this.facade.logger.error("Captioning Settings Parse Error",t)}return e},CaptioningWrapper.prototype.parseRGBA=function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"0x"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},AMP.registerPlugin("captioning","flash",CaptioningWrapper),__extends(Feature,Plugin),Feature.NAME="Feature",Feature.prototype.featureName=null,Feature.prototype.getFeatureName=function(){return this.featureName},Feature.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification(FeatureNotifications.REGISTER_FEATURE,this)},Feature.prototype.onRegister=function(){this.registerFeature(),Feature.__super__.onRegister.call(this)},Feature.prototype.listNotificationPublications=function(){return Feature.__super__.listNotificationPublications.call(this).concat([FeatureNotifications.REGISTER_FEATURE])},__extends(UpdateUserSettingCommand,PluginCommand),UpdateUserSettingCommand.prototype.execute=function(t){this.proxy.update(t.getBody())},__extends(UserSettingsProxy,PluginProxy),UserSettingsProxy.NAME=ModuleProxy.NAME,UserSettingsProxy.prototype.defaults={namespace:Namespace.PREFIX+"media-player",settings:{volume:1,autoplay:!0,captioning:{hidden:!0}}},UserSettingsProxy.prototype.loaded=!0,UserSettingsProxy.prototype.settingsMap=null,UserSettingsProxy.prototype.settingsString=null,UserSettingsProxy.prototype.initialize=function(){this.load()},UserSettingsProxy.prototype.load=function(){var t,e;e=this.getConfigurationData().namespace;try{t=localStorage.getItem(e);try{this.settingsMap=JSON.parse(t)}catch(t){this.facade.logger.error("User Settings Error: Could not parse "+e,t)}}catch(t){this.facade.logger.error("User Settings Error: Could not retrieve value for "+e,t)}null==t&&(this.settingsMap=this.getDefaults().settings,this.save())},UserSettingsProxy.prototype.update=function(t){var e;null!=(e=this.calculateChanges(t))&&(this.applyChanges(e),this.save(),this.sendNotification(UserSettingsNotifications.SETTINGS_CHANGE,e))},UserSettingsProxy.prototype.calculateChanges=function(t,e){var i,o,n;for(o in null==e&&(e=this.settingsMap),i=null,t)n=t[o],e[o]!==n&&(null==i&&(i={}),"object"==typeof e[o]&&"object"==typeof n?i[o]=arguments.callee(n,e[o]):i[o]=n);return i},UserSettingsProxy.prototype.applyChanges=function(t,e){var i,o;for(i in null==e&&(e=this.settingsMap),t)"object"==typeof(o=t[i])&&"object"==typeof e[i]?arguments.callee(o,e[i]):e[i]=o},UserSettingsProxy.prototype.save=function(){var t;t=this.getConfigurationData().namespace;try{try{this.settingsString=JSON.stringify(this.settingsMap)}catch(e){this.facade.logger.error("User Settings Error: Could not serialize "+t,e)}try{localStorage.setItem(t,this.settingsString)}catch(t){this.facade.logger.error("LocalStorage Not Supported on this Browser",t)}}catch(e){this.facade.logger.error("User Settings Error: Could not save value "+t,e)}},UserSettingsProxy.prototype.retrieveUserSetting=function(t){return this.settingsMap[t]},__extends(UserSettingsReadyCommand,PluginCommand),UserSettingsReadyCommand.prototype.execute=function(t){var e;t.getBody(),null!=(e=this.proxy.retrieveUserSetting("volume"))&&this.sendNotification(Notifications.CHANGE_VOLUME,e),null!=(e=this.proxy.retrieveUserSetting("autoplay"))&&(this.config.setAutoplay(e),!1===e&&this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"autoplay"))},__extends(UserSettingsVolumeChangeCommand,PluginCommand),UserSettingsVolumeChangeCommand.prototype.execute=function(t){this.proxy.update({volume:t.getBody()})},__extends(CaptioningPlugin,Feature),CaptioningPlugin.prototype.featureName="captioning",CaptioningPlugin.prototype.moduleName="captioning",CaptioningPlugin.prototype.mediatorname="",CaptioningPlugin.prototype.createController=function(){CaptioningPlugin.__super__.createController.call(this),this.registerCommand(Notifications.CHANGE_MEDIA,CaptioningChangeMediaCommand),this.registerCommand(Notifications.STARTED,CaptioningStartedCommand),this.registerCommand(Notifications.TIME_UPDATE,CaptioningTimeUpdateCommand),this.registerCommand(CaptioningNotifications.VISIBILITY_CHANGE,CaptioningVisibilityChangeCommand),this.registerCommand(CaptioningNotifications.ENABLED,CaptioningEnabledCommand),this.registerCommand(CaptioningNotifications.TRACK_SELECTED,PluginEventCommand),this.registerCommand(CaptioningNotifications.TRACKS_LOADED,PluginEventCommand),this.registerCommand(CaptioningNotifications.CUE_CHANGE,PluginEventCommand)},CaptioningPlugin.prototype.createModel=function(){this.proxy=new CaptioningProxy(this.config),this.registerProxy(this.proxy)},CaptioningPlugin.prototype.createView=function(){var t,e;t=new CaptioningMediator,this.registerMediator(t),this.mediatorname=t.getMediatorName(),e=t.viewComponent,this.proxy.registerRenderer(new CaptioningNativeMediator(e)),this.proxy.registerRenderer(new CaptioningHTMLMediator(e))},CaptioningPlugin.prototype.destroy=function(){for(var t,e;this.proxy.rendererMap.length>=1;)t=(e=this.proxy.rendererMap[0]).getMediatorName(),this.removeMediator(t),this.proxy.removeRenderer(e.getRendererName());this.removeMediator(this.mediatorname)},CaptioningPlugin.prototype.listNotificationInterests=function(){return[Notifications.LOADED_METADATA,Notifications.CAN_PLAY_THROUGH,Notifications.CHANGE_MEDIA,Notifications.STARTED,Notifications.TIME_UPDATE,Notifications.SETTINGS_CHANGE,CaptioningNotifications.TRACK_SELECTED]},CaptioningPlugin.prototype.listNotificationPublications=function(){return CaptioningPlugin.__super__.listNotificationPublications.call(this).concat([CaptioningNotifications.CUE_CHANGE,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.CHANGE_SETTINGS,CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.SETTINGS_CHANGE])},CaptioningPlugin.prototype.getEnabled=function(){return this.proxy.getEnabled()},CaptioningPlugin.prototype.setEnabled=function(t){return this.sendNotification(CaptioningNotifications.ENABLED,t),t},CaptioningPlugin.prototype.getHidden=function(){return this.proxy.getHidden()},CaptioningPlugin.prototype.setHidden=function(t){return this.setVisible(!t),t},CaptioningPlugin.prototype.getVisible=function(){return!this.proxy.getHidden()},CaptioningPlugin.prototype.setVisible=function(t){return this.sendNotification(Notifications.CHANGE_SETTINGS,{captions:{visible:t}}),this.sendNotification(CaptioningNotifications.VISIBILITY_CHANGE,t),t},CaptioningPlugin.prototype.getTracks=function(){return this.proxy.getTracks()},CaptioningPlugin.prototype.getTrack=function(){return this.proxy.getTrack()},CaptioningPlugin.prototype.setTrack=function(t){return this.proxy.setTrack(t),t},CaptioningPlugin.prototype.selectTrackByIndex=function(t){return this.proxy.selectTrackByIndex(t)},CaptioningPlugin.prototype.selectTrackByLanguage=function(t){return this.proxy.selectTrackByLanguage(t)},CaptioningPlugin.prototype.changeSettings=function(t){return this.sendNotification(Notifications.CHANGE_SETTINGS,{captions:t}),this.sendNotification(CaptioningNotifications.SETTINGS_CHANGE,t),t},CaptioningPlugin.prototype.getSettings=function(){return this.player.settings.captions},CaptioningPlugin.prototype.useParallelRendering=function(t){var e;return(e=this.proxy.getRenderer())&&e.useParallelRendering(t),t},AMP.registerPlugin("captioning","html",CaptioningPlugin),__extends(contextMenuMediator,OverlayMediator),contextMenuMediator.prototype.componentName="context-menu",contextMenuMediator.prototype.contextMenu=null,contextMenuMediator.prototype.onRegister=function(){var t=this;contextMenuMediator.__super__.onRegister.call(this),EventHandler.create(this.facade.player.viewComponent,EventHandler.CONTEXTMENU,function(e){return e.preventDefault(),t.contextMenuHandler(e),!1})},contextMenuMediator.prototype.contextMenuHandler=function(t){var e,i,o=this;this.contextMenu&&this.removeContextMenu(),this.contextMenu=UI.create("context-menu",document.body,"ul"),UI.create("context-item",this.contextMenu,"li",this.facade.player.getVersion()),"undefined"!=typeof akamaiGetViewerId&&null!==akamaiGetViewerId&&(e=akamaiGetViewerId(),i=UI.create("context-item",this.contextMenu,"li",""+(this.localizationManager.getString("MSG_VIEWER_ID")||"Viewer ID: ")),UI.create("selectable",i,"span",""+(null!=e?e:"N/A"))),this.contextMenu.style.top=t.pageY+"px",this.contextMenu.style.left=t.pageX+"px",EventHandler.create(document.body,EventHandler.CLICK,function(t){return!/selectable/.test(t.target.className)&&(o.removeContextMenu(t),!1)})},contextMenuMediator.prototype.removeContextMenu=function(t){try{EventHandler.clear(document.body,EventHandler.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(t){}},__extends(IOSCursorMediator,OverlayMediator),IOSCursorMediator.NAME="IOSCursorMediator",IOSCursorMediator.prototype.componentName="ioscursor",IOSCursorMediator.prototype.container=null,IOSCursorMediator.prototype.onRegister=function(){IOSCursorMediator.__super__.onRegister.call(this),this.container=this.create("ioscursor-container")},IOSCursorMediator.prototype.listNotificationInterests=function(){return[Notifications.READY]},IOSCursorMediator.prototype.handleNotification=function(t){var e=this;switch(t.getName()){case Notifications.READY:Utils.isIOS()?Utils.isIOS()&&EventHandler.create(this.container,EventHandler.CLICK,function(){return e.sendNotification(Notifications.TOGGLE_ACTIVE)}):ClassList.add("hidden",this.container,Namespace.PREFIX)}},__extends(TitleBarMediator,OverlayMediator),TitleBarMediator.prototype.componentName="title-bar",TitleBarMediator.prototype.title=null,TitleBarMediator.prototype.description=null,TitleBarMediator.prototype.onRegister=function(){TitleBarMediator.__super__.onRegister.call(this),this.title=this.create("title-text"),this.description=this.create("description-text")},TitleBarMediator.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA]},TitleBarMediator.prototype.handleNotification=function(t){var e,i;switch(t.getName()){case Notifications.CHANGE_MEDIA:e=t.getBody(),null==(i=this.facade.player.evaluateBindings(e.title))||""===i||"undefined"===i?this.classList.add("hidden"):(this.title.innerHTML=i,this.description.innerHTML=e.description?e.description:"",this.classList.remove("hidden"))}},__extends(ControlsProxy,ModuleProxy),ControlsProxy.NAME=ModuleProxy.NAME,ControlsProxy.prototype.defaults={mode:"auto",autoHide:3,admode:null},ControlsProxy.prototype.timeout=null,ControlsProxy.prototype.appState=null,ControlsProxy.prototype.controls=null,ControlsProxy.prototype.interactiveElement=null,ControlsProxy.prototype.idleUtil=null,ControlsProxy.prototype.initializeNotifier=function(t){ControlsProxy.__super__.initializeNotifier.call(this,t),this.appState=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME),this.controls=this.facade.retrieveMediator(ApplicationStateProxy.NAME)},ControlsProxy.prototype.onRegister=function(){var t=this;ControlsProxy.__super__.onRegister.call(this),null!=this.config.mode&&this.changeMode(this.config.mode),this.interactiveElement=this.facade.player.getContainer(),"desktop"===Utils.getDevice()?(this.facade.registerMediator(new IOSCursorMediator),EventHandler.create(this.interactiveElement,"mouseenter",function(){t.stop(),t.appState.activeState!==ActiveState.ACTIVE&&t.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)}),EventHandler.create(this.interactiveElement,"mouseleave",function(){t.start()}),this.idleUtil=new IdleUtil(this.facade.player.getViewComponent(),1e3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(e){var i;i=!0!==e.detail.active?ActiveState.INACTIVE:ActiveState.ACTIVE,t.sendNotification(Notifications.CHANGE_ACTIVE_STATE,i)}),this.idleUtil.start(),EventHandler.create(this.facade.player.getMediaElement(),"click",function(){t.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE)})):(Utils.isIOS()&&this.facade.registerMediator(new IOSCursorMediator),EventHandler.create(this.interactiveElement,EventHandler.CLICK,function(){t.sendNotification(Notifications.TOGGLE_ACTIVE)}))},ControlsProxy.prototype.setMode=function(t){return this.data.mode===t?t:(this.changeMode(t),t)},ControlsProxy.prototype.changeMode=function(t){"auto"===this.data.mode&&this.stop(),this.facade.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode),this.data.mode=t,this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"controls-"+this.data.mode)},ControlsProxy.prototype.getMode=function(){return this.data.mode},ControlsProxy.prototype.setAutoHide=function(t){return this.data.autoHide=t,t},ControlsProxy.prototype.getAutoHide=function(){return this.data.autoHide},ControlsProxy.prototype.adBreakStart=function(){null!=this.data.admode&&(this.config.mode=this.getMode(),this.setMode(this.data.admode))},ControlsProxy.prototype.adBreakEnd=function(){null!=this.data.admode&&this.setMode(this.config.mode)},ControlsProxy.prototype.start=function(){this.stop(),"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1e3*this.data.autoHide))},ControlsProxy.prototype.keypress=function(t){switch(t.keyCode||t.which||t.charCode){case 27:break;case 32:this.facade.player.getEnded()||(this.facade.player.getPaused()?this.facade.player.play():this.facade.player.pause())}},ControlsProxy.prototype.stop=function(){clearTimeout(this.timeout),this.timeout=null},ControlsProxy.prototype.hide=function(){"auto"===this.data.mode&&(!0!==this.appState.getIsUserActive()&&!Utils.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===DisplayState.FULL_SCREEN?this.facade.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.INACTIVE):this.start())},__extends(ControlsWrapper,PluginWrapper),ControlsWrapper.NAME="ControlsWrapper",ControlsWrapper.prototype.mode="auto",ControlsWrapper.prototype.autoHide=5,ControlsWrapper.prototype.flashView={elements:{controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:null,playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}},ControlsWrapper.prototype.listNotificationInterests=function(){return ControlsWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIUM_CHANGE])},ControlsWrapper.prototype.handleNotification=function(t){var e,i,o;switch(ControlsWrapper.__super__.handleNotification.call(this,t),o=t.getName(),e=t.getBody(),o){case Notifications.MEDIUM_CHANGE:i=/audio/.test(e)?"persistent":this.mode,this.setMode(i)}},ControlsWrapper.prototype.createFlashVars=function(t){return null!=this.config.mode&&(this.mode=t.controls_mode=this.config.mode),null!=this.config.admode&&this.config.admode!==this.config.mode&&(t.ads_auto_fit=!0),t.show_play_button_overlay=null==this.config.playoverlay||this.config.playoverlay,t},ControlsWrapper.prototype.createXML=function(t){var e,i,o;if(null!=(e=null!=(i=this.player.flashView)&&null!=(o=i.elements)?o.controls:void 0))return null!=e.attributes.autoHideDelay?this.autoHide=e.attributes.autoHideDelay:null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,e.attributes.autoHideDelay=this.config.autoHide),t},ControlsWrapper.prototype.getMode=function(){return this.mode},ControlsWrapper.prototype.setMode=function(t){if(t!==this.mode){try{this.mode=t,this.player.mediaElement.setPlayerProperty("controlsMode",t)}catch(t){this.facade.logger.error("[AMP CONTROLS ERROR]",t)}return t}},ControlsWrapper.prototype.getAutoHide=function(){return this.autoHide},__extends(ControlsPlayCommand,puremvc.SimpleCommand),ControlsPlayCommand.prototype.execute=function(t){this.facade.retrieveProxy(ControlsProxy.NAME).start()},__extends(ControlsPauseCommand,puremvc.SimpleCommand),ControlsPauseCommand.prototype.execute=function(t){this.facade.retrieveProxy(ControlsProxy.NAME).stop()},__extends(ControlsActiveStateChangeCommand,puremvc.SimpleCommand),ControlsActiveStateChangeCommand.prototype.execute=function(t){var e,i;i=this.facade.retrieveProxy(ControlsProxy.NAME),e=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME),t.getBody().value===ActiveState.ACTIVE&&e.getPlayState()!==PlayState.READY&&"desktop"!==Utils.getDevice()&&i.start()},__extends(ControlsAdBreakStartCommand,PluginCommand),ControlsAdBreakStartCommand.prototype.execute=function(t){!0===this.plugin.config.native?this.player.getMediaElement().controls=!1:this.proxy.adBreakStart()},__extends(ControlsAdBreakEndCommand,PluginCommand),ControlsAdBreakEndCommand.prototype.execute=function(t){!0===this.plugin.config.native?this.player.getMediaElement().controls=!0:this.proxy.adBreakEnd()},__extends(ControlsMediaValidatedCommand,puremvc.SimpleCommand),ControlsMediaValidatedCommand.prototype.execute=function(t){var e,i,o;o=(i=t.getBody()).poster,e=this.facade.player.getMediaElement(),null!=o&&""!==o&&(e.poster=o),e.src=i.src,!0!==this.facade.player.getAutoplay()&&this.facade.applyClickHandler()},__extends(ControlsStartedCommand,puremvc.SimpleCommand),ControlsStartedCommand.prototype.execute=function(t){this.facade.applyClickHandler(!1)},__extends(ControlsStartCommand,puremvc.SimpleCommand),ControlsStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(ControlsProxy.NAME).start()},__extends(ControlsDisplayStateChangeCommand,puremvc.SimpleCommand),ControlsDisplayStateChangeCommand.prototype.execute=function(t){var e,i;i=t.getBody().value,e=this.facade.retrieveProxy(ControlsProxy.NAME),i===DisplayState.FULL_SCREEN?window.addEventListener("keypress",e.keypress):i===DisplayState.NORMAL&&window.removeEventListener("keypress",e.keypress)},__extends(ReplayOverlayMediator,OverlayMediator),ReplayOverlayMediator.prototype.componentName="replay",ReplayOverlayMediator.prototype.replay=null,ReplayOverlayMediator.prototype.icon=null,ReplayOverlayMediator.prototype.label=null,ReplayOverlayMediator.prototype.onRegister=function(){ReplayOverlayMediator.__super__.onRegister.call(this),this.replay=this.create("replay-button"),this.replay.onclick=this.onclick.bind(this),this.icon=this.create("replay-icon",this.replay),this.label=this.createText("replay-label",this.localizationManager.getString(LocalizationConstants.MSG_REPLAY),this.replay)},ReplayOverlayMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),this.sendNotification(Notifications.REPLAY),!1},__extends(ErrorLayerMediator,LayerMediator),ErrorLayerMediator.prototype.message=null,ErrorLayerMediator.prototype.componentName="error",ErrorLayerMediator.prototype.onRegister=function(){ErrorLayerMediator.__super__.onRegister.call(this),this.message=this.create("error-message")},ErrorLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.ERROR]},ErrorLayerMediator.prototype.handleNotification=function(t){var e,i;switch(t.getName()){case Notifications.ERROR:switch(e=t.getBody(),i=/^(Error: )/.test(e.toString())?"":"Error: ",e.code){case MediaError.MEDIA_ERR_ABORTED:i+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:i+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:i+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i+="Source not supported.";break;default:i+=e}this.message.textContent=i}},__extends(LoadingOverlayMediator,OverlayMediator),LoadingOverlayMediator.prototype.componentName="loading",__extends(WaitingOverlayMediator,OverlayMediator),WaitingOverlayMediator.prototype.componentName="waiting",WaitingOverlayMediator.prototype.bar=null,WaitingOverlayMediator.prototype.text=null,WaitingOverlayMediator.prototype.onRegister=function(){WaitingOverlayMediator.__super__.onRegister.call(this),this.bar=this.create("waiting-bar"),this.text=this.createText("waiting-text",this.localizationManager.getString(LocalizationConstants.MSG_BUFFERING))},__extends(PosterMediator,OverlayMediator),PosterMediator.prototype.componentName="poster",PosterMediator.prototype.poster=null,PosterMediator.prototype.clickHandler=null,PosterMediator.prototype.onRegister=function(){PosterMediator.__super__.onRegister.call(this),this.poster=this.create("poster-content"),this.poster.onclick=this.onclick.bind(this)},PosterMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),t.preventDefault(),this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE,!0),!1},PosterMediator.prototype.listNotificationInterests=function(){return[Notifications.SET_MEDIA]},PosterMediator.prototype.handleNotification=function(t){var e,i;switch(t.getName()){case Notifications.SET_MEDIA:e=null!=(i=t.getBody().poster)&&""!==i?'<img src="'+i+'" class="'+this.cssPrefix+'poster-image" />':"",this.poster.innerHTML=e}},__extends(EndSlateMediator,OverlayMediator),EndSlateMediator.prototype.componentName="end-slate",EndSlateMediator.prototype.onRegister=function(){null!=this.facade.config.endslate&&EndSlateMediator.__super__.onRegister.call(this)},EndSlateMediator.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]},EndSlateMediator.prototype.handleNotification=function(t){var e,i,o,n,a;switch(t.getName()){case Notifications.MEDIA_CHANGE:o=t.getBody(),e=this.facade.config.endslate,a=this.getViewComponent(),i="",null!=e&&null!=(n=!0===e.usePoster?o.poster:e.url)&&""!==n&&(i='<img src="'+n+'" class="end-slate-image" />'),null!=a&&(a.innerHTML=i)}},__extends(ButtonMediator,ComponentMediator),ButtonMediator.prototype.componentType="button",ButtonMediator.prototype.icon=null,ButtonMediator.prototype.label=null,ButtonMediator.prototype.onclick=null,ButtonMediator.prototype.labelText=null,ButtonMediator.prototype.onRegister=function(){ButtonMediator.__super__.onRegister.call(this),this.icon=this.create("icon"),this.createLabel(this.labelText)},ButtonMediator.prototype.createLabel=function(t){null!=t&&(this.label=this.createText("label",t))},ButtonMediator.prototype.setLabel=function(t){return null==this.label?this.createLabel(t):this.label.textContent=t,t},ButtonMediator.prototype.getLabel=function(){var t;return null!=(t=this.label)?t.textContent:void 0},__extends(LogoMediator,ComponentMediator),LogoMediator.prototype.componentName="logo",LogoMediator.prototype.url=null,LogoMediator.prototype.onRegister=function(){LogoMediator.__super__.onRegister.call(this),this.sendNotification(Notifications.ADD_CONTROL_STATE,this.componentName+"-enabled")},LogoMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),this.sendNotification(Notifications.DISPATCH_EVENT,new Event("controlsLogoClicked")),!1},__extends(FullScreenMediator,ButtonMediator),FullScreenMediator.prototype.componentName="full-screen",FullScreenMediator.prototype.onRegister=function(){FullScreenMediator.__super__.onRegister.call(this),this.sendNotification(Notifications.ADD_CONTROL_STATE,this.componentName+"-enabled")},FullScreenMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),this.sendNotification(Notifications.TOGGLE_FULL_SCREEN),!1},FullScreenMediator.prototype.listNotificationInterests=function(){return[Notifications.DISABLE_FULL_SCREEN,Notifications.ENABLE_FULL_SCREEN]},FullScreenMediator.prototype.handleNotification=function(t){var e;switch(e=t.getName(),t.getBody(),e){case Notifications.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case Notifications.ENABLE_FULL_SCREEN:this.setDisabled(!1)}},__extends(SliderMediator,ComponentMediator),SliderMediator.prototype.componentType="slider",SliderMediator.prototype.trackView=null,SliderMediator.prototype.handleView=null,SliderMediator.prototype.valueView=null,SliderMediator.prototype.startCapView=null,SliderMediator.prototype.endCapView=null,SliderMediator.prototype.clickView=null,SliderMediator.prototype.min=0,SliderMediator.prototype.max=1,SliderMediator.prototype.value=0,SliderMediator.prototype.draggable=!1,SliderMediator.prototype.dragging=!1,SliderMediator.prototype.draggingInterval=null,SliderMediator.prototype.draggingDelay=250,SliderMediator.prototype.direction="vertical",SliderMediator.prototype.pressHandler=null,SliderMediator.prototype.releaseHandler=null,SliderMediator.prototype.moveHandler=null,SliderMediator.prototype.clickHandler=null,SliderMediator.prototype.onRegister=function(){SliderMediator.__super__.onRegister.call(this),this.startCapView=this.create("start-cap"),this.endCapView=this.create("end-cap"),this.trackView=this.create("track"),this.valueView=this.create("value",this.trackView),this.clickView=this.create("click",this.trackView),this.handleView=this.create("handle",this.trackView),this.pressHandler=EventHandler.create(this.handleView,EventHandler.PRESS,this.handlePressHandler.bind(this)),this.releaseHandler=EventHandler.create(window,EventHandler.RELEASE,this.handleReleaseHandler.bind(this)),this.releaseHandler.unbind(),this.moveHandler=EventHandler.create(window,EventHandler.MOVE,this.updateHandler.bind(this,this.draggable)),this.moveHandler.unbind(),this.clickHandler=EventHandler.create(this.clickView,EventHandler.CLICK,this.updateHandler.bind(this,!0))},SliderMediator.prototype.setDirection=function(t){return this.direction=t,t},SliderMediator.prototype.getDirection=function(){return this.direction},SliderMediator.prototype.setValue=function(t){return this.updateValue(t),this.valueChanged(),t},SliderMediator.prototype.getValue=function(){return this.value},SliderMediator.prototype.setDragging=function(t){if(t!==this.dragging)return this.dragging=t,this.sendNotification(Notifications.IS_USER_ACTIVE,this.dragging),!0===this.dragging?this.draggingInterval=setInterval(this.valueChanged.bind(this),this.draggingDelay):(clearInterval(this.draggingInterval),this.valueChanged()),this.dragging},SliderMediator.prototype.getDragging=function(){return this.dragging},SliderMediator.prototype.setDraggable=function(t){if(t!==this.draggable)return this.draggable=t,t},SliderMediator.prototype.getDraggable=function(){return this.draggable},SliderMediator.prototype.updateValue=function(t,e){var i;null==e&&(e=!1),t===this.value&&!1===e||(this.value=Utils.clamp(t,this.min,this.max),"vertical"===this.direction?(t="height",i="bottom"):(t="width",i="left"),this.valueView.style[t]=this.handleView.style[i]=100*this.value+"%")},SliderMediator.prototype.calculateValue=function(t){var e,i,o;return i={x:t.pageX-(window.scrollX||window.pageXOffset)||t.targetTouches[0].pageX-window.scrollX,y:t.pageY-(window.scrollY||window.pageYOffset)||t.targetTouches[0].pageY-window.scrollY},e=Utils.getElementOffset(this.viewComponent),o="vertical"===this.getDirection()?1-(i.y-e.top)/e.height:(i.x-e.left)/e.width,Utils.clamp(o,0,1)},SliderMediator.prototype.blockEvent=function(t){null!=t&&(t.stopImmediatePropagation(),t.preventDefault())},SliderMediator.prototype.handlePressHandler=function(t){return this.moveHandler.bind(),this.releaseHandler.bind(),this.clickHandler.unbind(),this.setDragging(!0),this.blockEvent(t),!1},SliderMediator.prototype.handleReleaseHandler=function(t){return this.moveHandler.unbind(),this.releaseHandler.unbind(),this.clickHandler.bind(),this.setDragging(!1),this.blockEvent(t),!1},SliderMediator.prototype.updateHandler=function(t,e){var i;return this.blockEvent(e),i=/click/.test(e.type)&&this.classList.contains("scrubbing")?this.getValue():this.calculateValue(e),!0===t?this.setValue(i):this.updateValue(i),!1},SliderMediator.prototype.valueChanged=function(){};var PanelNotifications={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"};function TimeDisplayMediator(t){TimeDisplayMediator.__super__.constructor.call(this,null,null,t)}function GoLiveMediator(t){GoLiveMediator.__super__.constructor.call(this,null,t)}function AdMediator(){AdMediator.__super__.constructor.call(this)}function PanelControlMediator(t){PanelControlMediator.__super__.constructor.call(this,null,null,null,t,onclick)}function PanelMediator(t){PanelMediator.__super__.constructor.call(this,t,null,null,null)}function CaptionsMediator(t){CaptionsMediator.__super__.constructor.call(this,t)}function CaptionsSettingsMediator(t){this.list={font:null,language:null,edge:null,size:null,scroll:null},this.picker={color:null,background:null,edge:null,window:null},this.toggle={ON:null,OFF:null,disabled:!1},this.captioningObject={default:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"painton",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null},CaptionsSettingsMediator.__super__.constructor.call(this,null,null,t,null)}function PlayOverlayMediator(){PlayOverlayMediator.__super__.constructor.call(this)}function VolumePanelControlMediator(t){VolumePanelControlMediator.__super__.constructor.call(this,t)}function VolumeMediator(t,e){VolumeMediator.__super__.constructor.call(this,t,e)}function ControlPanelMediator(){ControlPanelMediator.__super__.constructor.call(this),this.controls={}}function VolumePanelMediator(){VolumePanelMediator.__super__.constructor.call(this)}function PanelsMediator(t){this.panels=[],this.closeHandler=this.mouseupHandler.bind(this),PanelsMediator.__super__.constructor.call(this,null,null,t)}function ProgressMediator(t){ProgressMediator.__super__.constructor.call(this,t,"horizontal")}function PlayPauseMediator(t){PlayPauseMediator.__super__.constructor.call(this,null,t)}__extends(TimeDisplayMediator,ComponentMediator),TimeDisplayMediator.prototype.componentName="time-display",TimeDisplayMediator.prototype.duration=null,TimeDisplayMediator.prototype.currentTimeDisplay=null,TimeDisplayMediator.prototype.separatorDisplay=null,TimeDisplayMediator.prototype.durationDisplay=null,TimeDisplayMediator.prototype.liveDisplay=null,TimeDisplayMediator.prototype.onRegister=function(){TimeDisplayMediator.__super__.onRegister.call(this),this.liveDisplay=this.createText("live-display",this.localizationManager.getString(LocalizationConstants.MSG_LIVE)),this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span"),this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(LocalizationConstants.MSG_TIME_SEPARATOR),this,"span"),this.durationDisplay=this.createText("duration-display","00:00",this,"span")},TimeDisplayMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAY,Notifications.DURATION_CHANGE,Notifications.ENDED,Notifications.DISPLAY_TIME]},TimeDisplayMediator.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case Notifications.PLAY:this.updateDuration();break;case Notifications.DURATION_CHANGE:this.updateCurrentTime(),this.updateDuration(e);break;case Notifications.ENDED:this.updateCurrentTime(this.duration),this.updateDuration();break;case Notifications.DISPLAY_TIME:this.updateCurrentTime(e.currentTime,e.duration),this.updateDuration(e.duration)}},TimeDisplayMediator.prototype.updateCurrentTime=function(t,e){null!=t&&(this.currentTime=t),null!=e&&(this.duration=e),this.currentTimeDisplay.textContent=Utils.formatTimecode(this.currentTime,this.duration)},TimeDisplayMediator.prototype.updateDuration=function(t){null!=t&&(this.duration=t),this.durationDisplay.textContent=Utils.formatTimecode(this.duration)},__extends(GoLiveMediator,ButtonMediator),GoLiveMediator.prototype.componentName="go-live",GoLiveMediator.prototype.onRegister=function(){GoLiveMediator.__super__.onRegister.call(this),this.createLabel(this.localizationManager.getString("MSG_LIVE"))},GoLiveMediator.prototype.listNotificationInterests=function(){return[Notifications.IS_LIVE]},GoLiveMediator.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case Notifications.IS_LIVE:this.setLabel(!0===e?this.localizationManager.getString("MSG_LIVE"):this.localizationManager.getString("MSG_GO_LIVE"))}},GoLiveMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),t.preventDefault(),this.sendNotification(UserNotifications.GO_LIVE),!1},__extends(AdMediator,OverlayMediator),AdMediator.prototype.duration=null,AdMediator.prototype.currentTime=null,AdMediator.prototype.container=null,AdMediator.prototype.banner=null,AdMediator.prototype.text=null,AdMediator.prototype.adText=null,AdMediator.prototype.bg=null,AdMediator.prototype.totalAds=null,AdMediator.prototype.adPosition=null,AdMediator.prototype.adContainerRequired=!0,AdMediator.prototype.componentName="ads",AdMediator.prototype.onRegister=function(){AdMediator.__super__.onRegister.call(this),this.adContainerRequired&&(this.container=this.create("ad-container")),this.banner=this.create("ad-banner"),this.bg=this.create("ad-text-bg",this.banner),this.adText=this.create("ad-text-title",this.banner),this.text=this.create("ad-text",this.banner),this.adContainerRequired&&(this.viewComponent.container=this.container),this.sendNotification(AdNotifications.AD_CONTAINER_CREATED,this.viewComponent)},AdMediator.prototype.listNotificationInterests=function(){return[AdNotifications.BREAK_START,AdNotifications.BREAK_END,AdNotifications.AD_TIME_REMAINING,AdNotifications.AD_STARTED]},AdMediator.prototype.handleNotification=function(t){var e,i,o;switch(t.getName()){case AdNotifications.BREAK_END:this.text.textContent="",this.adText.textContent="";break;case AdNotifications.AD_TIME_REMAINING:o=Math.round(t.getBody()),i=null!=this.totalAds&&this.totalAds>0&&null!=this.adPosition&&this.adPosition!==this.totalAds?o>0?""+this.localizationManager.getString(LocalizationConstants.MSG_NEXT_AD)+o+" "+this.localizationManager.getString(LocalizationConstants.MSG_SECONDS):"":o>0?""+this.localizationManager.getString(LocalizationConstants.MSG_NEXT_VIDEO)+o+" "+this.localizationManager.getString(LocalizationConstants.MSG_SECONDS):"",this.text.textContent=i;break;case AdNotifications.AD_STARTED:e=t.getBody(),this.totalAds=e.totalAds,this.adPosition=e.position,i="Ad "+e.position+" of "+e.totalAds,null!=e.position&&null!=e.totalAds&&e.totalAds>=1&&(this.adText.textContent=i)}},__extends(PanelControlMediator,ButtonMediator),PanelControlMediator.prototype.panel=null,PanelControlMediator.prototype.timeout=null,PanelControlMediator.prototype.closePanelDelayed=null,PanelControlMediator.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this),"desktop"===Utils.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel,PanelControlMediator.__super__.onRegister.call(this),this.sendNotification(Notifications.ADD_CONTROL_STATE,this.componentName+"-enabled"),this.sendNotification(Notifications.ADD_CONTROL,this.viewComponent)},PanelControlMediator.prototype.openPanel=function(){clearTimeout(this.timeout),this.sendNotification(PanelNotifications.OPEN_PANEL,this.panel),this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)},PanelControlMediator.prototype.closePanel=function(){Utils.isMouseOverElement(this.panel.viewComponent)||Utils.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(ApplicationStateProxy.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(PanelNotifications.CLOSE_PANEL,this.panel))},PanelControlMediator.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)},PanelControlMediator.prototype.togglePanel=function(t){t.stopImmediatePropagation(),this.sendNotification(PanelNotifications.TOGGLE_PANEL,this.panel)},PanelControlMediator.prototype.clickPanel=function(){},__extends(PanelMediator,ComponentMediator),PanelMediator.prototype.componentType="panel",PanelMediator.prototype.control=null,PanelMediator.prototype.onRegister=function(){PanelMediator.__super__.onRegister.call(this),this.sendNotification(PanelNotifications.ADD_PANEL,this)},__extends(CaptionsMediator,PluginMediator),CaptionsMediator.prototype.componentName="captioning",CaptionsMediator.prototype.captionButton=null,CaptionsMediator.prototype.onRegister=function(){var t;this.captioning=this.facade.player.captioning,t=new ButtonMediator(this.localizationManager.getString(LocalizationConstants.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this)),this.facade.registerMediator(t),this.captionButton=t.getViewComponent(),this.sendNotification(Notifications.ADD_CONTROL,this.captionButton),CaptionsMediator.__super__.onRegister.call(this)},CaptionsMediator.prototype.onclick=function(t){var e;return t.stopImmediatePropagation(),"embedded"===(null!=(e=this.captioning.getTrack())?e.type:void 0)?this.captioning.setHidden(!this.captioning.getHidden()):t.currentTarget===this.captionButton&&this.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,this.captioning.getHidden()),!1},__extends(CaptionsSettingsMediator,PluginComponentMediator),CaptionsSettingsMediator.prototype.componentName="captioning-settings",CaptionsSettingsMediator.prototype.settingsUiVisible=!1,CaptionsSettingsMediator.prototype.captionningStyle=null,CaptionsSettingsMediator.prototype.swatchColorCurr=null,CaptionsSettingsMediator.prototype.swatchOpacityCurr=null,CaptionsSettingsMediator.prototype.colorPicker=null,CaptionsSettingsMediator.prototype.colorPickerOpacity=null,CaptionsSettingsMediator.prototype.advancedSettingContainer=null,CaptionsSettingsMediator.prototype.scroll={type:"painton",typeSpeed:5,lines:2,scrollTimer:[],speed:10,painton:null,popout:null,rollup:null},CaptionsSettingsMediator.prototype.onRegister=function(){var t,e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C=this;for(CaptionsSettingsMediator.__super__.onRegister.call(this),this.captioning=this.facade.player.captioning,y=this.create("captioning-titlebar"),this.create("captioning-title",y,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_TITLE)),this.toggle.OFF=this.create("captioning-toggle-btn",y,"div","OFF"),this.toggle.ON=this.create("captioning-toggle-btn",y,"div","ON"),EventHandler.create(this.toggle.ON,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.toggle.disabled||C.toggleButtonHandler(!0),!1}),this.toggle.disabled||ClassList.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),EventHandler.create(this.toggle.OFF,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.toggle.disabled||C.toggleButtonHandler(!1),!1}),i=this.create("captioning-row"),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_LANGUAGE)),this.list.language=this.create("captioning-dropdown",i,"select"),this.languageListPopulate(),EventHandler.create(this.list.language,"change",function(t){var e;return t.stopImmediatePropagation(),e="None"!==t.target.selectedValue,C.captioining.setHidden(!e),e&&C.captioning.setTrack(C.captioning.selectTrackByIndex(t.target.selectedIndex)),!1}),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_PRESETS)),s=this.create(["captioning-preset","captioning-preset1"],i,null,"Aa"),l=this.create(["captioning-preset","captioning-preset2"],i,null,"Aa"),c=this.create(["captioning-preset","captioning-preset3"],i,null,"Aa"),d=this.create(["captioning-preset","captioning-preset4"],i,null,"Aa"),EventHandler.create(s,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.captioningObject.selected=C.cloneObject(C.captioningObject.preset1),C.applyCaptioningStyle(),!1}),EventHandler.create(l,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.captioningObject.selected=C.cloneObject(C.captioningObject.preset2),C.applyCaptioningStyle(),!1}),EventHandler.create(c,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.captioningObject.selected=C.cloneObject(C.captioningObject.preset3),C.applyCaptioningStyle(),!1}),EventHandler.create(d,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.captioningObject.selected=C.cloneObject(C.captioningObject.preset4),C.applyCaptioningStyle(),!1}),this.advancedSettingContainer=this.create("captioning-advanced-container"),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_FONT)),this.list.font=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",this.create(null,this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",this.create(null,this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy",this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps",EventHandler.create(this.list.font,"change",function(t){return t.stopImmediatePropagation(),C.captioningObject.selected.fontFamily=t.target.value,C.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.font),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_EDGE)),this.list.edge=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.edge,"option","None").value="text-shadow: 0px 0px 0px",this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px",this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px",this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px",this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px",this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px",EventHandler.create(this.list.edge,"change",function(t){return t.stopImmediatePropagation(),C.captioningObject.selected.edgeType=t.target.value,C.applyCaptioningStyle(!1),!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_SIZE)),this.list.size=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.size,"option","Extra Small").value="x-small",this.create(null,this.list.size,"option","Small").value="small",this.create(null,this.list.size,"option","Medium").value="medium",this.create(null,this.list.size,"option","Large").value="large",this.create(null,this.list.size,"option","Extra Large").value="x-large",this.list.size.selectedIndex=1,EventHandler.create(this.list.size,"change",function(t){return t.stopImmediatePropagation(),C.captioningObject.selected.size=t.target.value,C.applyCaptioningStyle(!1),!1}),this.create("captioning-label",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_SCROLL)),this.list.scroll=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.scroll,"option","Paint-On").value="painton",this.create(null,this.list.scroll,"option","Pop-On").value="popout",this.create(null,this.list.scroll,"option","Roll-On").value="rollon",EventHandler.create(this.list.scroll,"change",function(t){return t.stopImmediatePropagation(),C.captioningObject.selected.scroll=C.scroll.type=t.target.value,!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label-small",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_COLOR)),this.picker.color=this.create("captioning-color-picker",i),this.picker.color.style.backgroundColor=this.captioningObject.default.fontColor,EventHandler.create(this.picker.color,EventHandler.CLICK,function(t){var e,i;return t.stopImmediatePropagation(),C.colorPickerHandler(),C.colorPicker.style.display="block"===C.colorPicker.style.display?"none":"block","block"===C.colorPicker.style.display&&(null!=(i=C.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),C.colorPicker.style.left="152px",C.colorPicker.name="fontColor",C.captioningObject.instance=C.picker.color,-1!==C.picker.color.style.backgroundColor.indexOf("rgba")&&(e=C.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),C.colorPickerOpacity.value=null!=e?e:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_BACKGROUND)),this.picker.background=this.create("captioning-color-picker",i),this.picker.background.style.backgroundColor=this.captioningObject.default.backgroundColor,EventHandler.create(this.picker.background,EventHandler.CLICK,function(t){var e,i;return t.stopImmediatePropagation(),C.colorPickerHandler(),C.colorPicker.style.display="block"===C.colorPicker.style.display?"none":"block","block"===C.colorPicker.style.display&&(null!=(i=C.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),C.colorPicker.style.left="264px",C.colorPicker.name="backgroundColor",C.captioningObject.instance=C.picker.background,-1!==C.picker.background.style.backgroundColor.indexOf("rgba")&&(e=C.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),C.colorPickerOpacity.value=null!=e?e:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_EDGE)),this.picker.edge=this.create("captioning-color-picker",i),this.picker.edge.style.backgroundColor=this.captioningObject.default.edgeColor,EventHandler.create(this.picker.edge,EventHandler.CLICK,function(t){var e,i;return t.stopImmediatePropagation(),C.colorPickerHandler(),C.colorPicker.style.display="block"===C.colorPicker.style.display?"none":"block","block"===C.colorPicker.style.display&&(null!=(i=C.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),C.colorPicker.style.left="212px",C.colorPicker.name="edgeColor",C.captioningObject.instance=C.picker.edge,-1!==C.picker.edge.style.backgroundColor.indexOf("rgba")&&(e=C.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),C.colorPickerOpacity.value=null!=e?e:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_WINDOW)),this.picker.window=this.create("captioning-color-picker",i),this.picker.window.style.backgroundColor=this.captioningObject.default.windowColor,EventHandler.create(this.picker.window,EventHandler.CLICK,function(t){var e,i;return t.stopImmediatePropagation(),C.colorPickerHandler(),C.colorPicker.style.display="block"===C.colorPicker.style.display?"none":"block","block"===C.colorPicker.style.display&&(null!=(i=C.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),C.colorPicker.style.left="300px",C.colorPicker.name="windowColor",C.captioningObject.instance=C.picker.window,-1!==C.picker.window.style.backgroundColor.indexOf("rgba")&&(e=C.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),C.colorPickerOpacity.value=null!=e?e:1),!1}),u=this.create(["caption-text","caption-text-preview"]),this.create(null,u,"p",this.localizationManager.getString(LocalizationConstants.MSG_CC_PREVIEW_TEXT)),i=this.create("captioning-footer-container"),t=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_APPLY)),e=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_CANCEL)),p=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_RESET)),this.captioning.getViewComponent().clientWidth>=0&&(m=this.create("captioning-advanced-button",i,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_SHOW_ADVANCED)),EventHandler.create(m,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),"block"===C.advancedSettingContainer.style.display?(t.target.innerHTML=C.localizationManager.getString(LocalizationConstants.MSG_CC_SHOW_ADVANCED),C.advancedSettingContainer.style.display="none",C.colorPicker.style.display="none"):(t.target.innerHTML=C.localizationManager.getString(LocalizationConstants.MSG_CC_HIDE_ADVANCED),C.advancedSettingContainer.style.display="block"),!1})),EventHandler.create(t,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,C.settingsUiVisible),C.applyCaptioningStyle(!1,!0),C.sendNotification(CaptioningNotifications.SETTINGS_CHANGE,C.captioningObject.selected),!1}),EventHandler.create(e,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,C.settingsUiVisible),!1}),EventHandler.create(p,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),C.colorPicker.style.display="none",C.applyCaptioningStyle(!0),!1}),this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captionningStyle.type="text/css",a=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"],this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement),h=this.create("colorpicker-swatch",!1,null,"&nbsp;"),g=0,f=a.length;g<f;g++)n=a[g],h.style.backgroundColor=n,o=h.cloneNode(),EventHandler.create(o,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),null!==C.swatchColorCurr&&(C.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"),C.swatchColorCurr=t.target,C.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)",C.captioningObject.instance.style.backgroundColor=C.captioningObject.selected[C.colorPicker.name]=C.toRGBA(t.target.style.backgroundColor),C.applyCaptioningStyle(!1),!1}),this.colorPicker.appendChild(o);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_OPACITY)),this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input"),this.colorPickerOpacity.type="range",this.colorPickerOpacity.min=0,this.colorPickerOpacity.max=1,this.colorPickerOpacity.step=.1,this.colorPickerOpacity.value=1,EventHandler.create(this.colorPickerOpacity,"change",function(t){return t.stopImmediatePropagation(),C.captioningObject.instance.style.backgroundColor=C.captioningObject.selected[C.colorPicker.name]=C.toRGBA(C.captioningObject.instance.style.backgroundColor),C.applyCaptioningStyle(!1),!1}),this.swatchOpacityCurr=this.colorPickerOpacity;try{null!=localStorage.getItem(Namespace.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Namespace.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1,!this.captioning.getHidden())):((r=!(null!=this.captioning.config.style||"undefined"!==this.captioning.config.style))||(this.captioningObject.selected=this.cloneObject(this.captioning.config.style)),this.applyCaptioningStyle(r))}catch(t){}this.setSettings(Object.keys(this.captioningObject.selected).length>0?this.captioningObject.selected:this.captioningObject.default),this.toggleButtonHandler(!this.captioning.getHidden(),!1)},CaptionsSettingsMediator.prototype.toRGBA=function(t){var e;return"rgba("+(e=t.replace(/^rgba?\(|\s+|\)$/g,"").split(","))[0]+","+e[1]+","+e[2]+","+this.swatchOpacityCurr.value+")"},CaptionsSettingsMediator.prototype.onScrollListChange=function(t){var e;null!=t&&(this.captioningObject.selected.scroll=this.scroll.type=t),this.setSettings({scroll:this.scroll.type});try{null!=(null!=(e=this.captioning.proxy.renderer)?e.viewComponent:void 0)&&("painton"===this.scroll.type?ClassList.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):ClassList.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent))}catch(t){this.facade.logger.error("AMP Captioning Error",t)}},CaptionsSettingsMediator.prototype.languageListPopulate=function(){var t,e,i,o,n,a;if(null!=(i=this.captioning.getTracks())){for(this.list.language.innerHTML="",o=0,n=i.length;o<n;o++)t=(e=i[o]).language,null!=(t=this.facade.player.retrieveProxy(LocalizationProxy.NAME).getLanguageString(t))&&""!==t&&(this.create(null,this.list.language,"option",t).value=e.language);this.toggle.disabled=0===this.list.language.childElementCount,this.toggle.disabled&&this.create(null,this.list.language,"option","None"),this.list.language.value=null!=(a=this.captioning.getTrack())?a.language:void 0}},CaptionsSettingsMediator.prototype.colorPickerHandler=function(t){var e=this;if(null==t&&(t=!1),t)return EventHandler.unbind(document,EventHandler.CLICK);EventHandler.create(document,EventHandler.CLICK,function(t){return t.stopImmediatePropagation(),e.colorPickerHandler(!0),"akamai-colorpicker-palette"!==t.target.className&&"akamai-opacity-label"!==t.target.className&&"akamai-colorpicker-slider"!==t.target.className&&"none"!==e.colorPicker.style.display&&(e.colorPicker.style.display="none"),!1})},CaptionsSettingsMediator.prototype.cloneObject=function(t){var e,i;for(i in e={},t)e[i]=t[i];return e},CaptionsSettingsMediator.prototype.applyCaptioningStyle=function(t,e,i){var o,n,a,r,s,l,c,d,u;if(null==t&&(t=!1),null==e&&(e=!1),null==i&&(i=!1),t?(this.captioningObject.selected=this.cloneObject(this.captioningObject.default),this.list.font.value=this.captioningObject.default.fontFamily,this.list.edge.value=null!=this.captioningObject.default.edgeType?this.captioningObject.default.edgeType:"text-shadow: 0px 0px 0px",this.list.size.value=this.captioningObject.default.size,this.list.scroll.value=this.captioningObject.default.scroll,this.picker.color.style.backgroundColor=this.captioningObject.default.fontColor,this.picker.background.style.backgroundColor=this.captioningObject.default.backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject.default.edgeColor,this.picker.window.style.backgroundColor=this.captioningObject.default.windowColor):(null==this.captioningObject.selected.fontFamily||i||(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"text-shadow: 0px 0px 0px",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll?this.list.scroll.value=this.captioningObject.selected.scroll:this.captioningObject.selected.scroll=this.list.scroll.value,this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor)),s="font-family: "+(t?this.captioningObject.default.fontFamily:i?this.captioningObject.selected.fontFamily:this.list.font.value)+" !important;",r=(t?this.captioningObject.default.edgeType+this.captioningObject.default.edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;",l="font-size: "+(t?this.captioningObject.default.size:this.list.size.value)+" !important;",n="color: "+(t?this.captioningObject.default.fontColor:this.picker.color.style.backgroundColor)+" !important;",o="background-color: "+(t?this.captioningObject.default.backgroundColor:this.picker.background.style.backgroundColor)+" !important;",a="line-height:2.2em;",null!=(u=(d="background-color: "+(t?this.captioningObject.default.windowColor:this.picker.window.style.backgroundColor)+" !important;").match(/rgba\([^)]+\)/g))&&u instanceof Array&&u.length>0&&(a=0===Number(u[0].replace(/^.*, (.+)\)/,"$1"))?"":a),e){this.onScrollListChange(),c=this.facade.player.viewComponent.id,this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText="#"+c+" .akamai-caption-text { "+s+l+r+d+" } #"+c+" .akamai-caption-text p { "+n+o+" } video::-webkit-media-text-track-display { "+d+" } video::-webkit-media-text-track-display span { "+s+l+r+o+" } video::-webkit-media-text-track-display { "+d+" } video::cue { "+n+s+l+r+o+" } video::-webkit-media-text-track-container {"+a+"} video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}";try{!1!==t||i||localStorage.setItem(Namespace.PREFIX+"captioningDefault",JSON.stringify(this.captioningObject.selected))}catch(t){this.facade.logger.error("LocalStorage Not Supported on this Browser",t)}}else this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+"#"+c+" .akamai-caption-text.akamai-caption-text-preview { "+s+l+r+d+" } #"+c+" .akamai-caption-text.akamai-caption-text-preview p { "+n+o+" }"},CaptionsSettingsMediator.prototype.toggleButtonHandler=function(t,e){null==t&&(t=!1),null==e&&(e=!0),t?(ClassList.add("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix),ClassList.remove("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix)):(ClassList.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),ClassList.remove("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix)),e&&this.captioning.setHidden(!t),this.sendNotification(UserSettingsNotifications.UPDATE_SETTINGS,{captioning:{hidden:!t}})},CaptionsSettingsMediator.prototype.setSettings=function(t){return this.settings=t,this.facade.player.settings.change({captions:t}),t},CaptionsSettingsMediator.prototype.getSettings=function(){return this.settings},CaptionsSettingsMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY,CaptioningNotifications.SETTINGS_CHANGE]},CaptionsSettingsMediator.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y;switch(l=t.getName(),e=t.getBody(),l){case CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE:case CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none"),this.settingsUiVisible=!this.settingsUiVisible,this.settingsUiVisible&&1===this.list.language.length&&this.languageListPopulate(),c=this.settingsUiVisible?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE,"cc-setting-active",this.toggleButtonHandler(!this.captioning.getHidden(),!1),this.list.language.value=this.captioning.getTrack().language,this.onScrollListChange(this.captioningObject.selected.scroll),this.sendNotification(c,"cc-setting-active");break;case CaptioningNotifications.SETTINGS_CHANGE:for(r in a=!1,e)switch(u=e[r],r){case"fontFamily":case"fontSize":case"scroll":case"edgeType":for(s="fontFamily"===r?"font":"fontSize"===r?"size":"edgeType"===r?"edge":"scroll",n=p=0,h=(y=this.list[s].options).length;p<h;n=++p)if(d=y[n],"fontFamily"===r&&"object"==typeof u)for(i in u)o=u[i],"default"===i&&(this.captioningObject.selected.fontFamily=o,a=!0),new RegExp(i,"i").test(d.label)&&(new RegExp("^"+o).test(d.value)||(d.value=o+","+d.value),d.selected&&(this.captioningObject.selected.fontFamily=d.value));else if(new RegExp("^"+u+"$","i").test(d.label)&&(this.list[s].selectedIndex=n,"fontSize"===r&&(r="size"),this.captioningObject.selected[r]=d.value,"scroll"===r)){this.scroll.type=this.captioningObject.selected.scroll=d.value,this.setSettings({scroll:this.scroll.type});try{"painton"===d.value?ClassList.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):ClassList.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent)}catch(t){this.facade.logger.error("AMP Captioning Error",t)}}break;case"backgroundColor":case"edgeColor":case"fontColor":case"windowColor":this.captioningObject.selected[r]=u}this.applyCaptioningStyle(!1,!0,a),null!=e.visible&&e.visible!==!this.captioning.getHidden()&&this.captioning.setHidden(!e.visible)}},__extends(PlayOverlayMediator,OverlayMediator),PlayOverlayMediator.prototype.componentName="play",PlayOverlayMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),t.preventDefault(),this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE),!1},__extends(VolumePanelControlMediator,PanelControlMediator),VolumePanelControlMediator.prototype.clickHandler=function(){this.sendNotification(Notifications.TOGGLE_MUTED)},__extends(VolumeMediator,SliderMediator),VolumeMediator.prototype.componentName="volume",VolumeMediator.prototype.draggable=!0,VolumeMediator.prototype.valueChanged=function(){this.sendNotification(Notifications.CHANGE_VOLUME,this.value),this.sendNotification(UserSettingsNotifications.UPDATE_SETTINGS,{volume:this.value})},VolumeMediator.prototype.listNotificationInterests=function(){return[Notifications.VOLUME_CHANGE,Notifications.READY]},VolumeMediator.prototype.handleNotification=function(t){switch(t.getName()){case Notifications.READY:this.updateValue(this.facade.player.getVolume(),!0);break;case Notifications.VOLUME_CHANGE:this.updateValue(t.getBody())}},__extends(ControlPanelMediator,PluginMediator),ControlPanelMediator.prototype.panel=null,ControlPanelMediator.prototype.control=null,ControlPanelMediator.prototype.separator=null,ControlPanelMediator.prototype.controls=null,ControlPanelMediator.prototype.labels=null,ControlPanelMediator.prototype.closed=!0,ControlPanelMediator.prototype.panelClass=PanelMediator,ControlPanelMediator.prototype.controlClass=PanelControlMediator,ControlPanelMediator.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName),this.control=this.createControl(this.componentName),this.separator=this.createSeparator(this.componentName),this.panel.control=this.control,this.control.panel=this.panel,null==this.labels&&(this.labels={}),this.createPanelControls(this.componentName)},ControlPanelMediator.prototype.createControl=function(t){var e;return e=new this.controlClass(t),this.facade.registerMediator(e),e},ControlPanelMediator.prototype.createPanel=function(t){var e;return e=new this.panelClass(t),this.facade.registerMediator(e),e},ControlPanelMediator.prototype.createSeparator=function(t){return this.create(["separator","icon"],this.panel)},ControlPanelMediator.prototype.createPanelControls=function(t){var e,i,o,n;for(i in e=("function"==typeof(o=this.plugin).getConfigurationData?o.getConfigurationData():void 0)||this.facade.getConfig()[this.componentName])!0===e[i]&&(this.controls[i]=this.addPanelControl(new ButtonMediator(this.localizationManager.getString(this.labels[i]),null,null,i,null!=(n=this.panelButtonClickHandler)&&"function"==typeof n.bind?n.bind(this,i):void 0)))},ControlPanelMediator.prototype.addPanelControl=function(t){return this.facade.registerMediator(t),this.panel.getViewComponent().appendChild(t.getViewComponent()),t},ControlPanelMediator.prototype.panelButtonClickHandler=function(){this.sendNotification(PanelNotifications.CLOSE_PANEL,this.panel)},__extends(VolumePanelMediator,ControlPanelMediator),VolumePanelMediator.prototype.componentName="volume",VolumePanelMediator.prototype.slider=null,VolumePanelMediator.prototype.level=null,VolumePanelMediator.prototype.controlClass=VolumePanelControlMediator,VolumePanelMediator.prototype.onRegister=function(){var t;VolumePanelMediator.__super__.onRegister.call(this),this.slider=new VolumeMediator(this.panel,null!=(t=this.facade.getConfig().volume)?t.direction:void 0),this.facade.registerMediator(this.slider)},VolumePanelMediator.prototype.updateVolumeButton=function(t){var e;(e=Math.ceil(10*t))!==this.level&&(null!=this.level&&this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=e,this.sendNotification(Notifications.ADD_CONTROL_STATE,"volume-"+this.level))},VolumePanelMediator.prototype.listNotificationInterests=function(){return VolumePanelMediator.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.VOLUME_CHANGE])},VolumePanelMediator.prototype.handleNotification=function(t){switch(VolumePanelMediator.__super__.handleNotification.call(this,t),t.getName()){case Notifications.VOLUME_CHANGE:this.updateVolumeButton(t.body)}},__extends(PanelsMediator,ComponentMediator),PanelsMediator.prototype.componentName="panels",PanelsMediator.prototype.activePanel=null,PanelsMediator.prototype.panels=null,PanelsMediator.prototype.closeHandler=null,PanelsMediator.prototype.listNotificationInterests=function(){var t,e;return function(){var i;for(t in i=[],PanelNotifications)e=PanelNotifications[t],i.push(e);return i}().concat([])},PanelsMediator.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case PanelNotifications.ADD_PANEL:this.addPanel(e);break;case PanelNotifications.REMOVE_PANEL:this.removePanel(e);break;case PanelNotifications.OPEN_PANEL:this.openPanel(e);break;case PanelNotifications.CLOSE_PANEL:this.closePanel(e);break;case PanelNotifications.CLOSE_ALL_PANELS:this.closeAllPanels(e);break;case PanelNotifications.TOGGLE_PANEL:this.togglePanel(e)}},PanelsMediator.prototype.addPanel=function(t){this.panels.push(t),this.viewComponent.appendChild(t.getViewComponent())},PanelsMediator.prototype.removePanel=function(t){this.panels.splice(this.panels.indexOf(t),1),this.viewComponent.removeChild(t.getViewComponent())},PanelsMediator.prototype.openPanel=function(t){t!==this.activePanel&&null!=t&&(this.closeAllPanels(),this.activePanel=t,this.activePanel.classList.add("active"),"desktop"!==Utils.getDevice()&&this.sendNotification(Notifications.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))},PanelsMediator.prototype.closePanel=function(t){t.classList.remove("active"),null!=this.activePanel&&(this.activePanel=null,"desktop"!==Utils.getDevice()&&this.sendNotification(Notifications.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))},PanelsMediator.prototype.togglePanel=function(t){t===this.activePanel?this.closePanel(t):this.openPanel(t)},PanelsMediator.prototype.closeAllPanels=function(){var t,e,i,o;for(e=0,i=(o=this.panels).length;e<i;e++)t=o[e],this.closePanel(t)},PanelsMediator.prototype.mouseupHandler=function(t){var e,i,o;i=document.elementFromPoint(t.clientX,t.clientY),o=this.activePanel.getViewComponent(),e=this.activePanel.control.getViewComponent(),i!==o&&!1===o.contains(i)&&i!==e&&!1===e.contains(i)&&this.closeAllPanels()},__extends(ProgressMediator,SliderMediator),ProgressMediator.prototype.componentName="progress",ProgressMediator.prototype.bufferValue=null,ProgressMediator.prototype.scrubTime=null,ProgressMediator.prototype.scrubTimeSeparator=null,ProgressMediator.prototype.cuePoints=null,ProgressMediator.prototype.cues=null,ProgressMediator.prototype.duration=0,ProgressMediator.prototype.isLive=!1,ProgressMediator.prototype.seeking=!1,ProgressMediator.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null},ProgressMediator.prototype.hoverHandler=null,ProgressMediator.prototype.mouseoutHandler=null,ProgressMediator.prototype.mouseMoveHandler=null,ProgressMediator.prototype.previewMoveHandler=null,ProgressMediator.prototype.onRegister=function(){ProgressMediator.__super__.onRegister.call(this),this.bufferValue=this.create("buffer-value",!1),this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild),this.cuePoints=this.create("cue-points",this.trackView),this.scrubTimeSeparator=this.create("scrub-time-separator"),this.scrubTime=this.create("scrub-time"),this.thumbPreview=this.create("thumb-preview",this.trackView),this.previewMoveHandler=EventHandler.create(this.clickView,EventHandler.MOVE,this.updatePreviewHandler.bind(this)),this.previewMoveHandler.unbind(),this.hoverHandler=EventHandler.create(this.clickView,EventHandler.HOVER,this.handlehoverHandler.bind(this)),this.mouseoutHandler=EventHandler.create(this.clickView,EventHandler.HOVEROUT,this.handlemouseoutHandler.bind(this)),this.mouseoutHandler.unbind(),EventHandler.create(this.clickView,EventHandler.HOVER,this.mouseOverHandler.bind(this)),EventHandler.create(this.clickView,EventHandler.HOVEROUT,this.mouseOutHandler.bind(this)),this.mouseMoveBinding=EventHandler.create(document,EventHandler.MOVE,this.mouseMoveHandler.bind(this)),this.mouseMoveBinding.unbind()},ProgressMediator.prototype.listNotificationInterests=function(){return[Notifications.ENDED,Notifications.MEDIA_CHANGE,Notifications.DURATION_CHANGE,Notifications.PROGRESS,Notifications.CUES_CHANGE,Notifications.DISPLAY_TIME,AdNotifications.BREAK_START]},ProgressMediator.prototype.handleNotification=function(t){var e,i,o;switch(ProgressMediator.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case Notifications.MEDIA_CHANGE:this.isLive="live"===e.temporalType,this.updateValue(0),this.bufferValue.style.width="0%",this.updatePreview(e.metadata);break;case Notifications.PROGRESS:o=Utils.clamp(e/this.duration*100,0,100),this.bufferValue.style.width=o+"%";break;case Notifications.DURATION_CHANGE:this.duration=e,this.updateCuePoints();break;case Notifications.ENDED:this.updateValue(1);break;case Notifications.CUES_CHANGE:this.cues=e,this.updateCuePoints();break;case Notifications.DISPLAY_TIME:!1===this.dragging&&this.updateValue(e.currentTime/e.duration,e.duration),e.duration!==this.duration&&(this.duration=e.duration);break;case AdNotifications.BREAK_START:this.getDragging()&&this.handleReleaseHandler()}},ProgressMediator.prototype.updateCuePoints=function(){var t,e,i,o;if(null!=this.cues&&!1!==this.facade.config.displaySceneMarkers)for(this.removeCuePoints(),e=0,i=(o=this.cues).length;e<i;e++)0!==(t=o[e]).startTime&&-1!==t.startTime&&(this.create("cue-point",this.cuePoints).style.left=t.startTime/this.duration*100+"%")},ProgressMediator.prototype.preloadPreviewImages=function(t){var e;for(e=1;e<t.previewThumbnailCount;)(new Image).src=t.previewThumbnailSrc+"out"+e+".png",e++},ProgressMediator.prototype.updatePreview=function(t){this.preloadPreviewImages(t),this.previewData.src=t.previewThumbnailSrc,this.previewData.previewHeight=t.previewThumbnailHeight,this.previewData.previewWidth=t.previewThumbnailWidth,this.previewData.count=t.previewThumbnailCount,void 0===this.previewData.src&&this.hoverHandler.unbind()},ProgressMediator.prototype.handlehoverHandler=function(t){return this.previewMoveHandler.bind(),this.mouseoutHandler.bind(),this.hoverHandler.unbind(),this.updatePreviewHandler(t),t.stopImmediatePropagation(),!1},ProgressMediator.prototype.handlemouseoutHandler=function(t){return this.previewMoveHandler.unbind(),this.mouseoutHandler.unbind(),this.hoverHandler.bind(),t.stopImmediatePropagation(),!1},ProgressMediator.prototype.mouseOverHandler=function(t){this.mouseOver=!0,this.classList.add("active"),this.mouseMoveBinding.bind()},ProgressMediator.prototype.mouseOutHandler=function(t){this.mouseOver=!1,!0!==this.getDragging()&&(this.classList.remove("active"),this.mouseMoveBinding.unbind())},ProgressMediator.prototype.mouseMoveHandler=function(t){var e;e=this.calculateValue(t),this.scrubTime.textContent=Utils.formatTimecode(Math.round(e*this.duration)),this.scrubTime.style.left=this.scrubTimeSeparator.style.left=(100*e).toFixed(2)+"%"},ProgressMediator.prototype.updatePreviewHandler=function(t){var e,i;i=this.calculateValue(t),this.previewInterval=this.duration/this.previewData.count,this.previewImgIndex=Math.floor(i*this.duration/this.previewInterval),this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+"out"+(this.previewImgIndex+1)+".png)"),this.thumbPreview.style.width=this.previewData.previewWidth+"px",this.thumbPreview.style.height=this.previewData.previewHeight+"px",e=Utils.clamp((100*i-10).toFixed(2),1,80),this.thumbPreview.style.left=e+"%"},ProgressMediator.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")},ProgressMediator.prototype.valueChanged=function(){this.sendNotification(UserNotifications.SEEK,this.value*this.facade.player.retrieveProxy(PlaybackProxy.NAME).getDuration())},ProgressMediator.prototype.updateValue=function(t){t!==this.value&&(!0===this.isLive&&(t=1),!0===isNaN(t)&&(t=0),ProgressMediator.__super__.updateValue.call(this,t),this.getDragging()&&this.value>=this.max&&(this.handleReleaseHandler(),this.sendNotification(Notifications.END)))},ProgressMediator.prototype.updateHandler=function(t,e){ProgressMediator.__super__.updateHandler.call(this,t,e),this.mouseMoveHandler(e)},ProgressMediator.prototype.handlePressHandler=function(t){ProgressMediator.__super__.handlePressHandler.call(this,t),this.classList.add("scrubbing")},ProgressMediator.prototype.handleReleaseHandler=function(t){var e;ProgressMediator.__super__.handleReleaseHandler.call(this,t),e=this,setTimeout(function(){return e.classList.remove("scrubbing")},500),!1===this.mouseOver&&this.mouseOutHandler()},__extends(PlayPauseMediator,ButtonMediator),PlayPauseMediator.prototype.componentName="play-pause",PlayPauseMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),t.preventDefault(),this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE),!1};var AdNotifications={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"};function ControlsMediator(t){this.overlays=null==t||t,ControlsMediator.__super__.constructor.call(this)}function UserSettingsPlugin(){UserSettingsPlugin.__super__.constructor.call(this)}function BrandingWrapper(){return BrandingWrapper.__super__.constructor.apply(this,arguments)}function BrandingMediator(){BrandingMediator.__super__.constructor.call(this)}function BrandingProxy(t){BrandingProxy.__super__.constructor.call(this,t)}__extends(ControlsMediator,LayerMediator),ControlsMediator.prototype.componentName="controls",ControlsMediator.prototype.activeControlPanel=null,ControlsMediator.prototype.controlBar=null,ControlsMediator.prototype.panels=null,ControlsMediator.prototype.onRegister=function(){this.facade.registerMediator(new ErrorLayerMediator),!0!==this.facade.player.config.debug&&this.facade.player.config.contextmenu&&!1!==this.facade.player.config.contextmenu.enabled&&this.facade.registerMediator(new contextMenuMediator),ControlsMediator.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent,!1!==this.overlays&&(this.facade.registerMediator(new PosterMediator),this.facade.registerMediator(new LoadingOverlayMediator),this.facade.registerMediator(new WaitingOverlayMediator),this.facade.registerMediator(new ReplayOverlayMediator),this.facade.registerMediator(new EndSlateMediator),!1!==(this.facade.config.titlebar||this.facade.player.config.titlebar||{}).enabled&&this.facade.registerMediator(new TitleBarMediator)),this.controlBar=this.create("control-bar"),this.facade.registerMediator(new PanelsMediator(this.viewComponent)),this.facade.registerMediator(new PlayPauseMediator(this.controlBar)),this.facade.registerMediator(new TimeDisplayMediator(this.controlBar)),this.facade.registerMediator(new ProgressMediator(this.controlBar)),null!=this.facade.config.logo&&this.facade.registerMediator(new LogoMediator(this.controlBar)),this.facade.registerMediator(new GoLiveMediator(this.controlBar)),!1!==this.overlays&&null!=this.facade.player.captioning&&(this.facade.registerMediator(new CaptionsMediator),this.facade.registerMediator(new CaptionsSettingsMediator(this.viewComponent))),this.facade.registerMediator(new VolumePanelMediator),!1!==this.overlays&&(this.facade.ads=new AdMediator,this.facade.registerMediator(this.facade.ads),this.facade.registerMediator(new PlayOverlayMediator)),this.create("separator",this.controlBar)},ControlsMediator.prototype.listNotificationInterests=function(){return[Notifications.READY,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.SET_MEDIA,AdNotifications.BREAK_START,AdNotifications.BREAK_END]},ControlsMediator.prototype.handleNotification=function(t){var e,i,o;switch(i=t.getName(),e=t.getBody(),i){case Notifications.READY:!1!==(null!=(o=e.fullscreen)?o.enabled:void 0)&&this.facade.registerMediator(new FullScreenMediator(this.controlBar));break;case Notifications.SET_MEDIA:case AdNotifications.BREAK_END:this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");break;case AdNotifications.BREAK_START:this.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-mode");break;case Notifications.ADD_CONTROL_STATE:this.classList.add(e);break;case Notifications.REMOVE_CONTROL_STATE:this.classList.remove(e);break;case Notifications.ADD_CONTROL:this.controlBar.appendChild(e);break;case Notifications.REMOVE_CONTROL:this.controlBar.contains(e)&&this.controlBar.removeChild(e)}},__extends(UserSettingsPlugin,Plugin),UserSettingsPlugin.prototype.moduleName="usersettings",UserSettingsPlugin.prototype.createModel=function(){this.registerProxy(new UserSettingsProxy(this.config))},UserSettingsPlugin.prototype.createController=function(){UserSettingsPlugin.__super__.createController.call(this),this.registerCommand(UserSettingsNotifications.UPDATE_SETTINGS,UpdateUserSettingCommand),this.registerCommand(Notifications.VOLUME_CHANGE,UserSettingsVolumeChangeCommand),this.registerCommand(Notifications.READY,UserSettingsReadyCommand)},UserSettingsPlugin.prototype.listNotificationInterests=function(){return UserSettingsPlugin.__super__.listNotificationInterests.apply(this,arguments).concat([UserSettingsNotifications.UPDATE_SETTINGS,Notifications.READY,Notifications.VOLUME_CHANGE])},UserSettingsPlugin.prototype.listNotificationPublications=function(){return UserSettingsPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([UserSettingsNotifications.SETTINGS_CHANGE,Notifications.CHANGE_VOLUME])},AMP.registerPlugin("usersettings","html",UserSettingsPlugin),__extends(BrandingWrapper,PluginWrapper),BrandingWrapper.NAME="BrandingWrapper",BrandingWrapper.prototype.flashView={elements:{logoOverlay:{attributes:{style:"width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5;"}}}},BrandingWrapper.prototype.createFlashVars=function(t){return null!=this.config.id&&(t.branding=this.config.id),t},BrandingWrapper.prototype.createXML=function(t){var e,i,o,n,a,r;return o=this.player.flashView,null!=(null!=(n=this.config)?n.logo:void 0)&&null!=o&&(e="background-image: url('"+this.config.logo+"');",i=-1!==(i=(null!=(a=o.elements.logoOverlay)&&null!=(r=a.attributes)?r.style:void 0)||"").indexOf("background-image:")?i.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"'#{}]+/,e):e+i,o.elements.logoOverlay.attributes.style=i),t},__extends(BrandingMediator,OverlayMediator),BrandingMediator.prototype.componentName="branding",BrandingMediator.prototype.logo=null,BrandingMediator.prototype.text=null,BrandingMediator.prototype.container=null,BrandingMediator.prototype.onRegister=function(){BrandingMediator.__super__.onRegister.call(this),this.container=this.create("branding-container"),this.logo=this.create(["branding-image","hidden"],this.container,"img"),this.text=this.create("branding-text",this.container)},BrandingMediator.prototype.listNotificationInterests=function(){return[Notifications.READY]},BrandingMediator.prototype.handleNotification=function(t){var e,i,o=this;switch(t.getName()){case Notifications.READY:if(null==(e=t.getBody().branding))return;null!=e.logo?(this.logo.src=this.facade.evaluatePaths(e.logo),this.logo.onerror=function(){return ClassList.add("hidden",o.logo,Namespace.PREFIX)},ClassList.remove("hidden",this.logo,Namespace.PREFIX)):ClassList.add("hidden",this.logo,Namespace.PREFIX),null!=(i=this.config.getDomain())&&0!==i.indexOf("http")&&(i=location.protocol+"//"+i,this.text.innerHTML="<span>"+this.localizationManager.getString(LocalizationConstants.MSG_VIEW_ALL)+'<a href="'+i+'" target="'+this.config.getTarget()+'">'+this.config.getDomain()+"</a> "+this.localizationManager.getString(LocalizationConstants.MSG_VIDEO)+".")}},__extends(BrandingProxy,ModuleProxy),BrandingProxy.NAME=ModuleProxy.NAME,BrandingProxy.prototype.defaults={id:null,title:null,link:null,logo:null,target:null},BrandingProxy.prototype.getID=function(){return this.data.id},BrandingProxy.prototype.setID=function(t){return this.data.id=t},BrandingProxy.prototype.getTarget=function(){return this.data.target},BrandingProxy.prototype.setTarget=function(t){return this.data.target=t},BrandingProxy.prototype.getTitle=function(){return this.data.title},BrandingProxy.prototype.setTitle=function(t){return this.data.title=t},BrandingProxy.prototype.getLink=function(){return this.data.link},BrandingProxy.prototype.setLink=function(t){return this.data.link=t},BrandingProxy.prototype.getLogo=function(){return this.data.logo},BrandingProxy.prototype.setLogo=function(t){return this.data.logo=t};var MediaAnalyticsNotifications={SET_DIMENSIONS:"mediaanalytics:setDimensions"};function ControlsPlugin(){ControlsPlugin.__super__.constructor.call(this)}function MediaAnalyticsProxy(t){MediaAnalyticsProxy.__super__.constructor.call(this,t)}function MediaAnalyticsReadyCommand(){MediaAnalyticsReadyCommand.__super__.constructor.call(this)}function MediaAnalyticsChangeMediaCommand(){MediaAnalyticsChangeMediaCommand.__super__.constructor.call(this)}function MediaAnalyticsAdBreakStartCommand(){MediaAnalyticsAdBreakStartCommand.__super__.constructor.call(this)}function MediaAnalyticsAdBreakEndCommand(){MediaAnalyticsAdBreakEndCommand.__super__.constructor.call(this)}function MediaAnalyticsAdLoadedCommand(){MediaAnalyticsAdLoadedCommand.__super__.constructor.call(this)}function MediaAnalyticsAdStartCommand(){MediaAnalyticsAdStartCommand.__super__.constructor.call(this)}function MediaAnalyticsAdTimeUpdateCommand(){MediaAnalyticsAdTimeUpdateCommand.__super__.constructor.call(this)}function MediaAnalyticsAdEndCommand(){MediaAnalyticsAdEndCommand.__super__.constructor.call(this)}function MediaAnalyticsSetDimensionsCommand(){MediaAnalyticsSetDimensionsCommand.__super__.constructor.call(this)}function MediaAnalyticsContentChangedCommand(){MediaAnalyticsContentChangedCommand.__super__.constructor.call(this)}function MediaAnalyticsFragmentLoadStartCommand(){MediaAnalyticsFragmentLoadStartCommand.__super__.constructor.call(this)}function MediaAnalyticsFragmentLoadedCommand(){MediaAnalyticsFragmentLoadedCommand.__super__.constructor.call(this)}function MediaAnalyticsBitrateSwitchCommand(){MediaAnalyticsBitrateSwitchCommand.__super__.constructor.call(this)}function MediaAnalyticsWrapper(t,e){MediaAnalyticsWrapper.__super__.constructor.call(this,t,e)}__extends(ControlsPlugin,Feature),ControlsPlugin.prototype.moduleName="controls",ControlsPlugin.prototype.featureName="ui",ControlsPlugin.prototype.createFramework=function(){this.registerCommand(AdNotifications.BREAK_START,ControlsAdBreakStartCommand),this.registerCommand(AdNotifications.BREAK_END,ControlsAdBreakEndCommand),!0===this.config.native?(this.player.getMediaElement().controls=!0,this.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(Notifications.MEDIA_VALIDATED,ControlsMediaValidatedCommand),this.registerCommand(Notifications.PLAY_REQUEST,ControlsStartedCommand),this.createView=function(){}):ControlsPlugin.__super__.createFramework.call(this)},ControlsPlugin.prototype.applyClickHandler=function(t){null==t&&(t=!0),this.player.getMediaElement().onclick=t?this.clickHandler.bind(this):null,this.player.getMediaElement().onplay=t?this.clickHandler.bind(this):null},ControlsPlugin.prototype.clickHandler=function(t){this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE,!0)},ControlsPlugin.prototype.createController=function(){ControlsPlugin.__super__.createController.call(this),this.registerCommand(Notifications.START,ControlsStartCommand),this.registerCommand(Notifications.PLAY,ControlsPlayCommand),this.registerCommand(Notifications.PAUSE,ControlsPauseCommand),this.registerCommand(Notifications.ACTIVE_STATE_CHANGE,ControlsActiveStateChangeCommand),this.registerCommand(Notifications.DISPLAY_STATE_CHANGE,ControlsDisplayStateChangeCommand),this.registerCommand(AdNotifications.BREAK_START,ControlsAdBreakStartCommand),this.registerCommand(AdNotifications.BREAK_END,ControlsAdBreakEndCommand)},ControlsPlugin.prototype.createModel=function(){this.proxy=new ControlsProxy(this.config),this.registerProxy(this.proxy)},ControlsPlugin.prototype.createView=function(){this.registerMediator(new ControlsMediator)},ControlsPlugin.prototype.listNotificationInterests=function(){var t,e;return function(){var i;for(t in i=[],PanelNotifications)e=PanelNotifications[t],i.push(e);return i}().concat([Notifications.CHANGE_MEDIA,Notifications.MEDIA_CHANGE,Notifications.TIME_UPDATE,Notifications.DURATION_CHANGE,Notifications.PROGRESS,Notifications.ENDED,Notifications.CUES_CHANGE,Notifications.DISABLE_FULL_SCREEN,Notifications.ENABLE_FULL_SCREEN,Notifications.READY,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.ACTIVE_STATE_CHANGE,Notifications.START,Notifications.PLAY,Notifications.PAUSE,Notifications.ERROR,AdNotifications.BREAK_START,AdNotifications.BREAK_END,AdNotifications.AD_TIME_REMAINING,AdNotifications.AD_STARTED,Notifications.SET_MEDIA,Notifications.DISPLAY_TIME,Notifications.MEDIA_VALIDATED,Notifications.STARTED,Notifications.PLAY_REQUEST,Notifications.IS_LIVE,Notifications.VOLUME_CHANGE,Notifications.DISPLAY_STATE_CHANGE,CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY])},ControlsPlugin.prototype.listNotificationPublications=function(){return ControlsPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.CHANGE_ACTIVE_STATE,Notifications.TOGGLE_FULL_SCREEN,UserNotifications.SEEK,Notifications.TOGGLE_ACTIVE,UserNotifications.TOGGLE_PLAY_PAUSE,UserNotifications.GO_LIVE,Notifications.END,Notifications.REPLAY,AdNotifications.AD_CONTAINER_CREATED,Notifications.CHANGE_VOLUME,Notifications.TOGGLE_MUTED,UserSettingsNotifications.UPDATE_SETTINGS])},ControlsPlugin.prototype.setMode=function(t){return this.proxy.setMode(t),t},ControlsPlugin.prototype.getMode=function(){return this.proxy.getMode()},ControlsPlugin.prototype.setAutoHide=function(t){return this.proxy.setAutoHide(t),t},ControlsPlugin.prototype.getAutoHide=function(){return this.proxy.getAutoHide()},AMP.registerPlugin("controls","html",ControlsPlugin),AMP.registerPlugin("controls","flash",ControlsWrapper),AMP.registerPlugin("controls","external",ControlsPlugin),__extends(MediaAnalyticsProxy,PluginProxy),MediaAnalyticsProxy.NAME=ModuleProxy.NAME,MediaAnalyticsProxy.prototype.defaults={config:null,dimensions:null,iplookup:!0},MediaAnalyticsProxy.prototype.ready=function(){try{!0===this.getDebug()&&(window.AkamaiAnalytics_debug=1),window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",t)}!1===this.value.iplookup&&"function"==typeof akamaiDisableServerIpLookup&&akamaiDisableServerIpLookup()},MediaAnalyticsProxy.prototype.setDimensions=function(t){var e,i,o;for(i in e=this.data.dimensions,t)null!=(o=t[i])&&(e[i]=o);return this.applyDimensions(e),t},MediaAnalyticsProxy.prototype.applyDimensions=function(t){var e,i;if(null!=window.setAkamaiMediaAnalyticsData)try{for(e in t)i=t[e],setAkamaiMediaAnalyticsData(e,i)}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",t)}},MediaAnalyticsProxy.prototype.setMedia=function(t){var e,i,o;return"function"==typeof akamaiSetStreamURL&&akamaiSetStreamURL(t.src,!1),null!=(i=this.value.viewerId||this.value.viewerID||this.value["std:viewerId"])&&akamaiSetViewerId(i),e=null!=(null!=(o=t.mediaanalytics)?o.dimensions:void 0)?Utils.override(this.value.dimensions,t.mediaanalytics.dimensions):this.value.dimensions,akamaiHandleStreamSwitch(),this.applyDimensions(e),t},MediaAnalyticsProxy.prototype.udpateMedia=function(t){return"function"==typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(t),t},MediaAnalyticsProxy.prototype.fragmentLoadStart=function(t){"function"==typeof fragmentDownloadStarted&&fragmentDownloadStarted(t)},MediaAnalyticsProxy.prototype.fragmentLoaded=function(t){"function"==typeof fragmentDownloadCompleted&&fragmentDownloadCompleted(t)},MediaAnalyticsProxy.prototype.bitrateSwitch=function(t){"function"==typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(t.bitrate)},__extends(MediaAnalyticsReadyCommand,puremvc.SimpleCommand),MediaAnalyticsReadyCommand.prototype.execute=function(t){this.facade.retrieveProxy(MediaAnalyticsProxy.NAME).ready()},__extends(MediaAnalyticsChangeMediaCommand,PluginCommand),MediaAnalyticsChangeMediaCommand.prototype.execute=function(t){this.proxy.setMedia(t.getBody())},__extends(MediaAnalyticsAdBreakStartCommand,puremvc.SimpleCommand),MediaAnalyticsAdBreakStartCommand.prototype.execute=function(t){this.facade.player.getMediaElement().dataset.isad=!0},__extends(MediaAnalyticsAdBreakEndCommand,puremvc.SimpleCommand),MediaAnalyticsAdBreakEndCommand.prototype.execute=function(t){this.facade.player.getMediaElement().dataset.isad=!1},__extends(MediaAnalyticsAdLoadedCommand,puremvc.SimpleCommand),MediaAnalyticsAdLoadedCommand.prototype.execute=function(t){var e,i;try{e={adDuration:(i=t.getBody()).duration,adPartnerId:i.partner,adTitle:i.title,adId:i.id},"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(e)}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}},__extends(MediaAnalyticsAdStartCommand,PluginCommand),MediaAnalyticsAdStartCommand.prototype.execute=function(t){try{"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}},__extends(MediaAnalyticsAdTimeUpdateCommand,PluginCommand),MediaAnalyticsAdTimeUpdateCommand.prototype.execute=function(t){var e,i;e=t.getBody(),i=Math.round(e.currentTime/e.duration*100);try{i>=25&&this.proxy.percent<25?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):i>=50&&this.proxy.percent<50?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):i>=75&&this.proxy.percent<75&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}this.proxy.percent=i},__extends(MediaAnalyticsAdEndCommand,puremvc.SimpleCommand),MediaAnalyticsAdEndCommand.prototype.execute=function(t){try{"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}this.facade.player.getMediaElement().dataset.isad=!0},__extends(MediaAnalyticsSetDimensionsCommand,PluginCommand),MediaAnalyticsSetDimensionsCommand.prototype.execute=function(t){var e;e=t.getBody(),this.proxy.setDimensions(e)},__extends(MediaAnalyticsContentChangedCommand,PluginCommand),MediaAnalyticsContentChangedCommand.prototype.execute=function(t){this.proxy.updatedMedia(t.getBody())},__extends(MediaAnalyticsFragmentLoadStartCommand,PluginCommand),MediaAnalyticsFragmentLoadStartCommand.prototype.execute=function(t){this.proxy.fragmentLoadStart(t.getBody())},__extends(MediaAnalyticsFragmentLoadedCommand,PluginCommand),MediaAnalyticsFragmentLoadedCommand.prototype.execute=function(t){this.proxy.fragmentLoaded(t.getBody())},__extends(MediaAnalyticsBitrateSwitchCommand,PluginCommand),MediaAnalyticsBitrateSwitchCommand.prototype.execute=function(t){this.proxy.bitrateSwitch(t.getBody())},__extends(MediaAnalyticsWrapper,PluginWrapper),MediaAnalyticsWrapper.NAME="MediaAnalyticsWrapper",MediaAnalyticsWrapper.prototype.flashPlugins=[{id:"OSMFCSMALoader",host:"osmf",main:"com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo",type:"application/x-shockwave-flash"}],MediaAnalyticsWrapper.prototype.listNotificationInterests=function(){return MediaAnalyticsWrapper.__super__.listNotificationInterests.call(this).concat([Notifications.MEDIA_CHANGE,MediaAnalyticsNotifications.SET_DIMENSIONS])},MediaAnalyticsWrapper.prototype.createFlashVars=function(t){var e,i,o,n,a;if(null!=(e=null!=(n=this.player.config)&&null!=(a=n.media)?a.mediaanalytics:void 0))for(i in e)o=e[i],t["report_"+i]=o;return t},MediaAnalyticsWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d;if(e=t.firstChild,null==(a=t.getElementsByTagName("metrics")[0])&&(a=t.createElement("metrics"),e.appendChild(a)),(l=t.createElement("vendor")).setAttribute("id","akamai"),a.appendChild(l),null!=this.config.config&&((o=t.createElement("property")).setAttribute("key","MEDIA_ANALYTICS_BEACON"),o.appendChild(XMLUtils.createTextContent(t,this.config.config)),l.appendChild(o),r=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",(o=t.createElement("property")).setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),o.appendChild(XMLUtils.createTextContent(t,r)),l.appendChild(o)),null!=this.config.dimensions)for(n in(i=t.createElement("property")).setAttribute("key","dimensions"),l.appendChild(i),d=this.config.dimensions)s=d[n],(o=t.createElement("property")).setAttribute("key",n),o.appendChild(XMLUtils.createTextContent(t,s)),i.appendChild(o);return t},MediaAnalyticsWrapper.prototype.handleNotification=function(t){var e,i,o,n,a,r,s;switch(MediaAnalyticsWrapper.__super__.handleNotification.call(this,t),n=t.getName(),e=t.getBody(),n){case Notifications.MEDIA_CHANGE:if(null!=(null!=(r=(o=e).mediaanalytics)?r.dimensions:void 0))for(i in o.dimensions=[],s=o.mediaanalytics.dimensions)a=s[i],o.dimensions.push({key:i,value:a});break;case MediaAnalyticsNotifications.SET_DIMENSIONS:this.setDimensions(e)}},MediaAnalyticsWrapper.prototype.setDimensions=function(t){return this.player.mediaElement.setPlayerProperty("maDimensions",t),t};var FeedNotifications={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedloaded",FEED_ERROR:"feederror"};function BrandingPlugin(){BrandingPlugin.__super__.constructor.call(this)}function FeedProxy(t){FeedProxy.__super__.constructor.call(this,t),this.helper=new MRSSHelper}function LoadFeedCommand(){LoadFeedCommand.__super__.constructor.call(this)}function ChangeFeedCommand(){ChangeFeedCommand.__super__.constructor.call(this)}function FeedChangedCommand(){FeedChangedCommand.__super__.constructor.call(this)}function FeedInitializedCommand(){FeedInitializedCommand.__super__.constructor.call(this)}function FeedWrapper(t,e){null==e&&(e={}),FeedWrapper.__super__.constructor.call(this,t,e),null!=e.url&&(this.url=e.url),null!=e.data&&(this.data=e.data),this.player.load=function(){}}function MediaAnalyticsPlugin(){MediaAnalyticsPlugin.__super__.constructor.call(this)}__extends(BrandingPlugin,Plugin),BrandingPlugin.NAME="BrandingPlugin",BrandingPlugin.prototype.moduleName="branding",BrandingPlugin.prototype.createModel=function(){this.registerProxy(new BrandingProxy(this.config))},BrandingPlugin.prototype.createView=function(){this.registerMediator(new BrandingMediator)},BrandingPlugin.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(Notifications.ADD_APPLICATION_STATE,"branding-"+this.config.id),BrandingPlugin.__super__.onRegister.call(this)},BrandingPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY]},AMP.registerPlugin("branding","html",BrandingPlugin),AMP.registerPlugin("branding","flash",BrandingWrapper),AMP.registerPlugin("branding","external",BrandingPlugin),__extends(FeedProxy,ModuleProxy),FeedProxy.NAME=ModuleProxy.NAME,FeedProxy.prototype.defaults={url:null,data:null},FeedProxy.prototype.feed=null,FeedProxy.prototype.helper=null,FeedProxy.prototype.setURL=function(t){var e=this;return this.data.url=this.facade.evaluatePaths(t),this.sendNotification(Notifications.DISPATCH_EVENT,new Event("request",this.data.url)),this.helper.getFeed(this.data.url).then(function(t){e.sendNotification(FeedNotifications.FEED_LOADED,t),e.sendNotification(FeedNotifications.CHANGE_FEED,t)}).catch(function(i){e.sendNotification(FeedNotifications.FEED_ERROR,{error:i,url:t}),Logger.error("[AMP Feed Load Error]",e.data.url,i)}),t},FeedProxy.prototype.getURL=function(){return this.data.url},FeedProxy.prototype.setFeedData=function(t){return this.data.data=t,this.feed=this.helper.createFeed(t),this.sendNotification(FeedNotifications.FEED_CHANGED,this.feed),t},FeedProxy.prototype.getFeedData=function(){return this.data.data},FeedProxy.prototype.invoke=function(){var t;null!=this.data.url&&""!==this.data.url?t=this.sendNotification.bind(this,FeedNotifications.LOAD_FEED,this.data.url):null!=this.data.data&&(t=this.sendNotification.bind(this,FeedNotifications.CHANGE_FEED,this.data.data)),null!=t&&setTimeout(t,1)},__extends(LoadFeedCommand,puremvc.SimpleCommand),LoadFeedCommand.prototype.execute=function(t){this.facade.retrieveProxy(FeedProxy.NAME).setURL(t.getBody())},__extends(ChangeFeedCommand,puremvc.SimpleCommand),ChangeFeedCommand.prototype.execute=function(t){this.facade.retrieveProxy(FeedProxy.NAME).setFeedData(t.getBody())},__extends(FeedChangedCommand,PluginEventCommand),FeedChangedCommand.prototype.execute=function(t){var e;FeedChangedCommand.__super__.execute.call(this,t),this.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY),e=t.getBody().item[0],this.player.sendNotification(Notifications.SET_MEDIA,e)},__extends(FeedInitializedCommand,puremvc.SimpleCommand),FeedInitializedCommand.prototype.execute=function(t){this.facade.retrieveProxy(FeedProxy.NAME).invoke()},__extends(FeedWrapper,PluginWrapper),FeedWrapper.NAME="FeedWrapper",FeedWrapper.prototype.url=null,FeedWrapper.prototype.data=null,FeedWrapper.prototype.updateData=!0,FeedWrapper.prototype.createFlashVars=function(t){null!=this.url&&""!==this.url&&(t.data_feed_url=escape(this.facade.evaluatePaths(this.url)))},FeedWrapper.prototype.listNotificationInterests=function(){return FeedWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([FlashNotifications.READY,FlashNotifications.FEED_LOADED,FlashNotifications.LOAD_FEED])},FeedWrapper.prototype.handleNotification=function(t){var e,i,o,n=this;switch(FeedWrapper.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case FlashNotifications.FEED_LOADED:this.sendNotification(FeedNotifications.FEED_CHANGED,this.data);break;case FlashNotifications.LOAD_FEED:o="request";break;case FlashNotifications.READY:null!=this.data?setTimeout(function(){n.setData(n.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(FeedNotifications.LOAD_FEED,this.url)}null!=o&&this.dispatchEvent(new Event(o,e))},FeedWrapper.prototype.setURL=function(t){return null!=t&&""!==t&&(this.url=t,this.player.mediaElement.playFile(this.url,this.player.getAutoplay()),this.sendNotification(FeedNotifications.LOAD_FEED,this.url)),t},FeedWrapper.prototype.getURL=function(){return this.url},FeedWrapper.prototype.setData=function(t){return this.data=t,this.updateData=!1,this.player.mediaElement.playFile(this.data,this.player.getAutoplay()),t},FeedWrapper.prototype.getData=function(){return this.data},__extends(MediaAnalyticsPlugin,Plugin),MediaAnalyticsPlugin.prototype.moduleName="mediaanalytics",MediaAnalyticsPlugin.prototype.initialize=function(t,e){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=t.config,MediaAnalyticsPlugin.__super__.initialize.call(this,t,e)},MediaAnalyticsPlugin.prototype.createModel=function(){this.proxy=new MediaAnalyticsProxy(this.config),this.registerProxy(this.proxy)},MediaAnalyticsPlugin.prototype.createController=function(){MediaAnalyticsPlugin.__super__.createController.call(this),this.registerCommand(Notifications.READY,MediaAnalyticsReadyCommand),this.registerCommand(Notifications.MEDIA_CHANGE,MediaAnalyticsChangeMediaCommand),this.registerCommand(AdNotifications.BREAK_START,MediaAnalyticsAdBreakStartCommand),this.registerCommand(AdNotifications.BREAK_END,MediaAnalyticsAdBreakEndCommand),this.registerCommand(AdNotifications.AD_LOADED,MediaAnalyticsAdLoadedCommand),this.registerCommand(AdNotifications.AD_STARTED,MediaAnalyticsAdStartCommand),this.registerCommand(AdNotifications.AD_TIME_UPDATE,MediaAnalyticsAdTimeUpdateCommand),this.registerCommand(AdNotifications.AD_ENDED,MediaAnalyticsAdEndCommand),this.registerCommand(MediaAnalyticsNotifications.SET_DIMENSIONS,MediaAnalyticsSetDimensionsCommand),this.registerCommand(Notifications.CONTENT_CHANGED,MediaAnalyticsContentChangedCommand),this.registerCommand(Notifications.FRAGMENT_LOAD_START,MediaAnalyticsFragmentLoadStartCommand),this.registerCommand(Notifications.FRAGMENT_LOADED,MediaAnalyticsFragmentLoadedCommand),this.registerCommand(Notifications.QUALITY_CHANGE,MediaAnalyticsBitrateSwitchCommand)},MediaAnalyticsPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY,Notifications.MEDIA_CHANGE,AdNotifications.BREAK_START,AdNotifications.BREAK_END,AdNotifications.AD_LOADED,AdNotifications.AD_STARTED,AdNotifications.AD_TIME_UPDATE,AdNotifications.AD_ENDED,MediaAnalyticsNotifications.SET_DIMENSIONS,Notifications.CONTENT_CHANGED,Notifications.FRAGMENT_LOAD_START,Notifications.FRAGMENT_LOADED,Notifications.QUALITY_CHANGE]},MediaAnalyticsPlugin.prototype.setDimensions=function(t){return this.retrieveProxy(MediaAnalyticsProxy.NAME).setDimensions(t),t},AMP.registerPlugin("mediaanalytics","html",MediaAnalyticsPlugin),AMP.registerPlugin("mediaanalytics","flash",MediaAnalyticsWrapper);var AutoAdvanceNotifications={TIME_UPDATE:"autoadvancetimeupdate",START:"autoadvancestart",STOP:"autoadvancestop",ADVANCE:"autoadvanceadvance"};function AutoAdvanceWrapper(t,e){null==e&&(e={}),AutoAdvanceWrapper.__super__.constructor.call(this,t,e),null!=e.interval&&(this.interval=e.interval),null!=e.handler&&(this.handler=e.handler)}function AutoAdvanceProxy(t){AutoAdvanceProxy.__super__.constructor.call(this,t)}function AutoAdvanceStartCommand(){AutoAdvanceStartCommand.__super__.constructor.call(this)}function AutoAdvanceAdvanceCommand(){AutoAdvanceAdvanceCommand.__super__.constructor.call(this)}function AutoAdvanceEndedCommand(){AutoAdvanceEndedCommand.__super__.constructor.call(this)}function AutoAdvanceStopCommand(){AutoAdvanceStopCommand.__super__.constructor.call(this)}function AutoAdvanceMediator(){AutoAdvanceMediator.__super__.constructor.call(this)}function FeedPlugin(){FeedPlugin.__super__.constructor.call(this);try{Object.defineProperties(this,{url:{get:this.getURL,set:this.setURL,enumerable:!0,configurable:!1},data:{get:this.getData,set:this.setData,enumerable:!0,configurable:!1}})}catch(t){console.error(t)}}__extends(AutoAdvanceWrapper,PluginWrapper),AutoAdvanceWrapper.NAME="AutoAdvanceWrapper",AutoAdvanceWrapper.prototype.interval=null,AutoAdvanceWrapper.prototype.handler=null,AutoAdvanceWrapper.prototype.getInterval=function(){return this.interval},AutoAdvanceWrapper.prototype.setInterval=function(t){return this.interval=t},AutoAdvanceWrapper.prototype.getHandler=function(){return this.handler},AutoAdvanceWrapper.prototype.setHandler=function(t){return this.handler=t},AutoAdvanceWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.AUTO_ADVANCE]},AutoAdvanceWrapper.prototype.handleNotification=function(t){var e,i,o,n,a;switch(o=t.getName(),e=t.getBody(),o){case FlashNotifications.CREATE_FLASH_VARS:i=e.flashvars,null!=this.interval&&(i.next_video_timer=this.interval,i.auto_play_list=!0);break;case FlashNotifications.AUTO_ADVANCE:"function"==typeof(a=this.config).handler&&a.handler(),n="advance"}null!=n&&this.dispatchEvent(new Event(n))},__extends(AutoAdvanceProxy,ModuleProxy),AutoAdvanceProxy.NAME=ModuleProxy.NAME,AutoAdvanceProxy.prototype.defaults={interval:15,handler:null},AutoAdvanceProxy.prototype.currentTime=0,AutoAdvanceProxy.prototype.timeout=null,AutoAdvanceProxy.prototype.start=function(){var t=this;this.currentTime=this.data.interval,this.timeout=setInterval(function(){t.updateTime()},1e3),this.sendNotification(AutoAdvanceNotifications.TIME_UPDATE,this.currentTime)},AutoAdvanceProxy.prototype.stop=function(){clearInterval(this.timeout)},AutoAdvanceProxy.prototype.updateTime=function(){this.currentTime--,this.sendNotification(AutoAdvanceNotifications.TIME_UPDATE,this.currentTime),this.currentTime<=0&&(this.stop(),this.sendNotification(AutoAdvanceNotifications.ADVANCE,this.data.handler))},__extends(AutoAdvanceStartCommand,PluginEventCommand),AutoAdvanceStartCommand.prototype.execute=function(t){this.sendNotification(Notifications.ADD_APPLICATION_STATE,"autoadvance-mode"),this.proxy.start(),AutoAdvanceStartCommand.__super__.execute.call(this,t)},__extends(AutoAdvanceAdvanceCommand,PluginEventCommand),AutoAdvanceAdvanceCommand.prototype.execute=function(notification){var handler;handler=notification.getBody(),null!=handler&&("string"==typeof handler?eval(handler+"()"):"function"==typeof handler&&handler()),this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"autoadvance-mode"),AutoAdvanceAdvanceCommand.__super__.execute.call(this,notification)},__extends(AutoAdvanceEndedCommand,PluginCommand),AutoAdvanceEndedCommand.prototype.execute=function(t){null!=this.proxy.getData().interval&&this.sendNotification(AutoAdvanceNotifications.START,t.getBody())},__extends(AutoAdvanceStopCommand,PluginCommand),AutoAdvanceStopCommand.prototype.execute=function(t){this.proxy.stop()},__extends(AutoAdvanceMediator,OverlayMediator),AutoAdvanceMediator.prototype.componentName="autoadvance",AutoAdvanceMediator.prototype.text=null,AutoAdvanceMediator.prototype.onRegister=function(){AutoAdvanceMediator.__super__.onRegister.call(this),this.text=this.create("autoadvance-text")},AutoAdvanceMediator.prototype.listNotificationInterests=function(){return[AutoAdvanceNotifications.TIME_UPDATE]},AutoAdvanceMediator.prototype.handleNotification=function(t){var e;switch(t.getName()){case AutoAdvanceNotifications.TIME_UPDATE:e=t.getBody(),this.text.textContent=this.localizationManager.getString("MSG_NEXT_VIDEO")+" "+e+" "+this.localizationManager.getString("MSG_SECONDS")}},__extends(FeedPlugin,Plugin),FeedPlugin.prototype.moduleName="feed",FeedPlugin.prototype.createModel=function(){this.proxy=new FeedProxy(this.config),this.registerProxy(this.proxy)},FeedPlugin.prototype.createController=function(){FeedPlugin.__super__.createController.call(this),this.registerCommand(Notifications.READY,FeedInitializedCommand),this.registerCommand(FeedNotifications.LOAD_FEED,LoadFeedCommand),this.registerCommand(FeedNotifications.CHANGE_FEED,ChangeFeedCommand),this.registerCommand(FeedNotifications.FEED_CHANGED,FeedChangedCommand),this.registerCommand(FeedNotifications.FEED_LOADED,PluginEventCommand),this.registerCommand(FeedNotifications.FEED_ERROR,PluginEventCommand)},FeedPlugin.prototype.listNotificationInterests=function(){return FeedPlugin.__super__.listNotificationInterests.call(this).concat([Notifications.READY])},FeedPlugin.prototype.listNotificationPublications=function(){var t,e;return FeedPlugin.__super__.listNotificationPublications.call(this).concat(function(){var i;for(t in i=[],FeedNotifications)e=FeedNotifications[t],i.push(e);return i}())},FeedPlugin.prototype.setURL=function(t){return this.sendNotification(FeedNotifications.LOAD_FEED,t),t},FeedPlugin.prototype.getURL=function(){return this.proxy.getURL()},FeedPlugin.prototype.setData=function(t){return this.sendNotification(FeedNotifications.CHANGE_FEED,t),t},FeedPlugin.prototype.getData=function(){return this.proxy.getFeedData()},AMP.registerPlugin("feed","html",FeedPlugin),AMP.registerPlugin("feed","flash",FeedWrapper);var RecommendationsNotifications={RECOMMENDATIONS_LOADED:"recommendationsloaded",RECOMMENDATION_SELECTED:"recommendationsselected"};function RecommendationVO(t,e,i,o,n,a,r,s,l){this.guid=t,this.link=e,this.title=i,this.description=o,this.thumbnail=n,this.duration=a,this.pubDate=r,this.target=s,this.metadata=null!=l?l:{}}function RecommendationsWrapper(t,e){null==e&&(e={}),RecommendationsWrapper.__super__.constructor.call(this,t,e),null!=e.url&&(this.url=e.url),null!=e.target&&(this.target=e.target)}function RecommendationSelectedCommand(){RecommendationSelectedCommand.__super__.constructor.call(this)}function RecommendationsPlayCommand(){RecommendationsPlayCommand.__super__.constructor.call(this)}function RecommendationsPlayStateChangeCommand(){RecommendationsPlayStateChangeCommand.__super__.constructor.call(this)}function RecommendationsProxy(t){RecommendationsProxy.__super__.constructor.call(this,t),this.helper=new MRSSHelper}function RecommendationsMediator(){RecommendationsMediator.__super__.constructor.call(this)}function AutoAdvancePlugin(){AutoAdvancePlugin.__super__.constructor.call(this)}function NielsenProxy(t){NielsenProxy.__super__.constructor.call(this,t)}function NielsenWrapper(){return NielsenWrapper.__super__.constructor.apply(this,arguments)}function NielsenEndCommand(){NielsenEndCommand.__super__.constructor.call(this)}function NielsenStartCommand(){NielsenStartCommand.__super__.constructor.call(this)}function RecommendationsPlugin(){RecommendationsPlugin.__super__.constructor.call(this)}function ComscoreProxy(t){ComscoreProxy.__super__.constructor.call(this,t)}function ComscoreWrapper(){return ComscoreWrapper.__super__.constructor.apply(this,arguments)}function ComscoreAdStartCommand(){ComscoreAdStartCommand.__super__.constructor.call(this)}function ComscoreStartCommand(){ComscoreStartCommand.__super__.constructor.call(this)}function NielsenPlugin(){NielsenPlugin.__super__.constructor.call(this)}function ComscoreStreamsenseWrapper(){return ComscoreStreamsenseWrapper.__super__.constructor.apply(this,arguments)}function ComscoreStreamsenseProxy(t){ComscoreStreamsenseProxy.__super__.constructor.call(this,t)}function ComscoreStreamsenseStartedCommand(){ComscoreStreamsenseStartedCommand.__super__.constructor.call(this)}function ComscoreStreamsenseAdStartedCommand(){ComscoreStreamsenseAdStartedCommand.__super__.constructor.call(this)}function ComscoreStreamsenseStopCommand(){ComscoreStreamsenseStopCommand.__super__.constructor.call(this)}function ComscoreStreamsenseAdErrorCommand(){ComscoreStreamsenseAdErrorCommand.__super__.constructor.call(this)}function ComscoreStreamsenseChangeMediaCommand(){ComscoreStreamsenseChangeMediaCommand.__super__.constructor.call(this)}function ComscoreStreamsenseEndedCommand(){ComscoreStreamsenseEndedCommand.__super__.constructor.call(this)}function ComscorePlugin(){ComscorePlugin.__super__.constructor.call(this)}function OmnitureWrapper(t,e){!0!==e.heartbeat.enabled&&!0!==e.useJS||(this.createXML=function(){},this.flashPlugins=[],this.plugin=new OmniturePlugin,this.plugin.oninitialized=t.registerModule.bind(t,this.plugin),this.plugin.initialize(e,t)),OmnitureWrapper.__super__.constructor.call(this,t,e)}function OmnitureProxy(t){OmnitureProxy.__super__.constructor.call(this,t)}function HeartbeatProxy(t){HeartbeatProxy.__super__.constructor.call(this,t)}function OmnitureStartCommand(){OmnitureStartCommand.__super__.constructor.call(this)}function OmniturePlayCommand(){OmniturePlayCommand.__super__.constructor.call(this)}function OmniturePauseCommand(){OmniturePauseCommand.__super__.constructor.call(this)}function OmnitureSeekingCommand(){OmnitureSeekingCommand.__super__.constructor.call(this)}function OmnitureSeekedCommand(){OmnitureSeekedCommand.__super__.constructor.call(this)}function OmnitureEndedCommand(){OmnitureEndedCommand.__super__.constructor.call(this)}function OmnitureContentChangedCommand(){OmnitureContentChangedCommand.__super__.constructor.call(this)}function OmnitureAdLoadedCommand(){OmnitureAdLoadedCommand.__super__.constructor.call(this)}function OmnitureAdStartedCommand(){OmnitureAdStartedCommand.__super__.constructor.call(this)}function OmnitureAdPlayCommand(){OmnitureAdPlayCommand.__super__.constructor.call(this)}function OmnitureAdPauseCommand(){OmnitureAdPauseCommand.__super__.constructor.call(this)}function OmnitureAdBreakEndCommand(){OmnitureAdBreakEndCommand.__super__.constructor.call(this)}function OmnitureAdTimeUpdateCommand(){OmnitureAdTimeUpdateCommand.__super__.constructor.call(this)}function OmnitureMediaChangeCommand(){OmnitureMediaChangeCommand.__super__.constructor.call(this)}function AdContentStartedCommand(){AdContentStartedCommand.__super__.constructor.call(this)}function AdContentEndedCommand(){AdContentEndedCommand.__super__.constructor.call(this)}function AdMediaChangeCommand(){AdMediaChangeCommand.__super__.constructor.call(this)}function AdLoadedCommand(){AdLoadedCommand.__super__.constructor.call(this)}function AdBreakStartCommand(){AdBreakStartCommand.__super__.constructor.call(this)}function AdBreakEndCommand(){AdBreakEndCommand.__super__.constructor.call(this)}function AdSeekCommand(){AdSeekCommand.__super__.constructor.call(this)}function AdContainerCreatedCommand(){AdContainerCreatedCommand.__super__.constructor.call(this)}function AdReplayCommand(){AdReplayCommand.__super__.constructor.call(this)}function AdVO(t,e,i,o,n,a,r,s,l,c,d,u){this.id=t,this.title=e,this.duration=i,this.position=o,this.type=n,this.partner=a,this.advertiser=r,this.companions=s,this.request=l,this.metadata=c,this.totalAds=d,this.time=u}function AdStartCommand(){AdStartCommand.__super__.constructor.call(this)}function AdPlayCommand(){AdPlayCommand.__super__.constructor.call(this)}function AdPauseCommand(){AdPauseCommand.__super__.constructor.call(this)}function AdTogglePlayPauseCommand(){AdTogglePlayPauseCommand.__super__.constructor.call(this)}function AdVolumeChangeCommand(){AdVolumeChangeCommand.__super__.constructor.call(this)}function AdPlayStateChangeCommand(){AdPlayStateChangeCommand.__super__.constructor.call(this)}function ComscoreStreamsensePlugin(){ComscoreStreamsensePlugin.__super__.constructor.call(this)}function AdProxy(t){AdProxy.__super__.constructor.call(this,t),this.pods=[]}function OmniturePlugin(){OmniturePlugin.__super__.constructor.call(this)}RecommendationVO.prototype.guid=null,RecommendationVO.prototype.link=null,RecommendationVO.prototype.title=null,RecommendationVO.prototype.description=null,RecommendationVO.prototype.thumbnail=null,RecommendationVO.prototype.duration=null,RecommendationVO.prototype.pubDate=null,RecommendationVO.prototype.target=null,RecommendationVO.prototype.metadata=null,__extends(RecommendationsWrapper,PluginWrapper),RecommendationsWrapper.NAME="RecommendationsWrapper",RecommendationsWrapper.prototype.flashPlugins=[{id:"RecommendationsPlugin",src:"#{paths.resources}plugins/RecommendationsPlugin.swf",blocking:!1,host:"akamai",main:"RecommendationsPlugin",type:"application/x-shockwave-flash"}],RecommendationsWrapper.prototype.flashView={elements:{recommendationSlate:{attributes:{items:"5",viewMode:"grid"}}}},RecommendationsWrapper.prototype.url=null,RecommendationsWrapper.prototype.target=null,RecommendationsWrapper.prototype.recommendations=null,RecommendationsWrapper.prototype.getFeatureName=function(){return"recommendations"},RecommendationsWrapper.prototype.getData=function(){return this.recommendations},RecommendationsWrapper.prototype.setData=function(t){return this.recommendations=t},RecommendationsWrapper.prototype.getTarget=function(){var t,e;return this.target||(null!=(t=this.player)&&null!=(e=t.config)?e.target:void 0)},RecommendationsWrapper.prototype.getURL=function(){return this.url},RecommendationsWrapper.prototype.createFlashVars=function(t){t.recommendations_partner="mrss",null!=this.config.target&&(t.external_target=this.config.target)},RecommendationsWrapper.prototype.createXML=function(t){var e,i,o;e=t.firstChild,null==(i=t.getElementsByTagName("recommendations")[0])&&(i=t.createElement("recommendations"),e.appendChild(i)),(o=t.createElement("vendor")).setAttribute("id","mrss"),i.appendChild(o),this.createProperty(t,"RECOMMENDATIONS_MRSS_URL",this.url,o)},RecommendationsWrapper.prototype.listNotificationInterests=function(){return RecommendationsWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([FlashNotifications.RECOMMENDATION_SELECTED,FlashNotifications.RECOMMENDATIONS_LOADED])},RecommendationsWrapper.prototype.handleNotification=function(t){var e,i,o;switch(RecommendationsWrapper.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case FlashNotifications.RECOMMENDATIONS_LOADED:o="loaded",this.recommendations=e;break;case FlashNotifications.RECOMMENDATION_SELECTED:o="selected"}null!=o&&this.dispatchEvent(new Event(o,e))},__extends(RecommendationSelectedCommand,PluginEventCommand),RecommendationSelectedCommand.prototype.execute=function(t){var e;RecommendationSelectedCommand.__super__.execute.call(this,t),"none"!==(e=t.getBody()).target&&"player"!==e.target&&window.open(e.link,e.target)},__extends(RecommendationsPlayCommand,PluginCommand),RecommendationsPlayCommand.prototype.execute=function(t){this.proxy.invoke()},__extends(RecommendationsPlayStateChangeCommand,PluginCommand),RecommendationsPlayStateChangeCommand.prototype.execute=function(t){var e,i;e=this.proxy.getRecommendations(),(i=t.getBody()).value===PlayState.ENDED?(null!=e?e.length:void 0)>0&&this.sendNotification(Notifications.ADD_APPLICATION_STATE,"recommendations-mode"):i.previous===PlayState.ENDED&&(null!=e?e.length:void 0)>0&&this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"recommendations-mode")},__extends(RecommendationsProxy,PluginProxy),RecommendationsProxy.NAME=ModuleProxy.NAME,RecommendationsProxy.prototype.defaults={url:null,target:"_blank"},RecommendationsProxy.prototype.loaded=!0,RecommendationsProxy.prototype.recommendations=null,RecommendationsProxy.prototype.helper=null,RecommendationsProxy.prototype.getRecommendations=function(){return this.recommendations},RecommendationsProxy.prototype.setRecommendations=function(t){return this.recommendations=t,this.sendNotification(RecommendationsNotifications.RECOMMENDATIONS_LOADED,this.recommendations),t},RecommendationsProxy.prototype.getURL=function(){return this.getConfigurationData().url},RecommendationsProxy.prototype.setURL=function(t){return this.data.url=t,this.invoke(),t},RecommendationsProxy.prototype.getTarget=function(){return this.getConfigurationData().target||this.facade.player.retrieveProxy(ConfigurationProxy.NAME).getTarget()},RecommendationsProxy.prototype.setTarget=function(t){return this.data.target=t,t},RecommendationsProxy.prototype.invoke=function(){var t;null!=(t=this.getURL())&&""!==t?Utils.getFeed(t).then(this.onload.bind(this)).catch(this.onerror.bind(this)):this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error: No url provided")},RecommendationsProxy.prototype.onload=function(t){var e;e=this.createRecommendations(t),this.setRecommendations(e)},RecommendationsProxy.prototype.onerror=function(t){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error:",t)},RecommendationsProxy.prototype.createRecommendations=function(t){var e,i,o,n,a,r;for(o=[],n=0,a=(r=(t=this.helper.createFeed(t)).item).length;n<a;n++)i=new RecommendationVO((e=r[n]).guid,e.link,e.title,e.description,e.thumbnail,e.duration,e.pubDate,this.getTarget(),e),o.push(i);return o},__extends(RecommendationsMediator,OverlayMediator),RecommendationsMediator.prototype.componentName="recommendations",RecommendationsMediator.prototype.listArea=null,RecommendationsMediator.prototype.onRegister=function(){RecommendationsMediator.__super__.onRegister.call(this),this.createText("recommendations-label","Recommended"),this.listArea=this.create("recommendations-list-area")},RecommendationsMediator.prototype.listNotificationInterests=function(){return[RecommendationsNotifications.RECOMMENDATIONS_LOADED]},RecommendationsMediator.prototype.handleNotification=function(t){var e,i,o,n;switch(t.getName()){case RecommendationsNotifications.RECOMMENDATIONS_LOADED:if(this.listArea.innerHTML="",null!=(i=t.getBody())&&i.length>0)for(o=0,n=i.length;o<n;o++)e=i[o],this.addElement(e)}},RecommendationsMediator.prototype.addElement=function(t){var e,i=this;null==(e=this.create("recommendation",this.listArea)).dataset&&(e.dataset={}),e.dataset.link=t.link,e.dataset.target=t.target,e.innerHTML="<img src='"+t.thumbnail+"' class='"+this.cssPrefix+"recommendation-thumbnail' /> <span class='"+this.cssPrefix+"recommendation-text'>"+t.description+"</span>",e.onclick=function(t){return t.stopImmediatePropagation(),i.sendNotification(RecommendationsNotifications.RECOMMENDATION_SELECTED,t.currentTarget.dataset),!1}},__extends(AutoAdvancePlugin,Plugin),AutoAdvancePlugin.NAME="AutoAdvancePlugin",AutoAdvancePlugin.prototype.moduleName="autoadvance",AutoAdvancePlugin.prototype.createController=function(){AutoAdvancePlugin.__super__.createController.call(this),this.registerCommand(AutoAdvanceNotifications.START,AutoAdvanceStartCommand),this.registerCommand(AutoAdvanceNotifications.ADVANCE,AutoAdvanceAdvanceCommand),this.registerCommand(Notifications.MEDIA_SEQUENCE_ENDED,AutoAdvanceEndedCommand),this.registerCommand(Notifications.CHANGE_MEDIA,AutoAdvanceStopCommand),this.registerCommand(Notifications.PLAY,AutoAdvanceStopCommand),this.registerCommand(Notifications.PLAYING,AutoAdvanceStopCommand),this.registerCommand(Notifications.REPLAY,AutoAdvanceStopCommand),this.registerCommand(Notifications.SEEK,AutoAdvanceStopCommand),this.registerCommand(UserNotifications.SEEK,AutoAdvanceStopCommand),this.registerCommand(Notifications.TIME_UPDATE,PluginEventCommand),this.registerCommand(Notifications.STOP,PluginEventCommand)},AutoAdvancePlugin.prototype.createModel=function(){this.registerProxy(new AutoAdvanceProxy(this.config))},AutoAdvancePlugin.prototype.createView=function(){this.registerMediator(new AutoAdvanceMediator)},AutoAdvancePlugin.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA,Notifications.PLAY,Notifications.PLAYING,Notifications.REPLAY,Notifications.MEDIA_SEQUENCE_ENDED,Notifications.SEEK,UserNotifications.SEEK]},AutoAdvancePlugin.prototype.listNotificationPublications=function(){var t,e;return AutoAdvancePlugin.__super__.listNotificationPublications.call(this).concat(function(){var i;for(t in i=[],AutoAdvanceNotifications)e=AutoAdvanceNotifications[t],i.push(e);return i}())},AMP.registerPlugin("autoadvance","html",AutoAdvancePlugin),AMP.registerPlugin("autoadvance","flash",AutoAdvanceWrapper),__extends(NielsenProxy,DataBoundConfigurationProxy),NielsenProxy.prototype.configurationName="nielsen",NielsenProxy.NAME=ModuleProxy.NAME,NielsenProxy.cg="OnDemand",NielsenProxy.url="http://secure-us.imrworldwide.com/cgi-bin/m",NielsenProxy.prototype.defaults={url:null,data:{ci:null,c6:null,cg:null,tl:null},events:null},NielsenProxy.prototype.getTitle=function(){return this.title},NielsenProxy.prototype.setTitle=function(t){return this.title=t},NielsenProxy.prototype.start=function(){var t;t=this.constructURL("video","started"),Utils.beacon(t,"nielsenBeacon")},NielsenProxy.prototype.end=function(){var t;t=this.constructURL("video","ended"),Utils.beacon(t,"nielsenBeacon")},NielsenProxy.prototype.constructURL=function(t,e){var i,o,n,a,r,s,l,c,d,u,p,h,y,m;if(l=this.url||NielsenProxy.url,null!=(r=null!=(u=this.value.events)?u[t]:void 0))for(c=0,d=r.length;c<d;c++)(s=r[c]).type===e&&(a=s);return n=(null!=a&&null!=(p=a.data)?p.ci:void 0)||this.value.data.ci,i=(null!=a&&null!=(h=a.data)?h.c6:void 0)||this.value.data.c6,o=(null!=a&&null!=(y=a.data)?y.cg:void 0)||this.value.data.cg||NielsenProxy.cg,l+"?ci="+n+"&c6="+i+"&cc=1&tl="+((null!=a&&null!=(m=a.data)?m.tl:void 0)||this.value.data.tl)+"&cg="+o+"&rnd="+Date.now()},__extends(NielsenWrapper,PluginWrapper),NielsenWrapper.NAME="NielsenWrapper",NielsenWrapper.prototype.flashPlugins=[{id:"NielsenPlugin",src:"#{paths.resources}plugins/NielsenPlugin.swf",blocking:!1,host:"akamai",main:"NielsenPlugin",type:"application/x-shockwave-flash"}],NielsenWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P,_,A,E;if(null!=(null!=(P=this.config)?P.events:void 0)){for(p in e=t.firstChild,null==(r=t.getElementsByTagName("metrics")[0])&&(r=t.createElement("metrics"),e.appendChild(r)),(y=t.createElement("vendor")).setAttribute("id","nielsen"),r.appendChild(y),a={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},c=[{value:"ci",key:"NIELSEN_CI"},{value:"cg",key:"NIELSEN_CG"},{value:"tl",key:"NIELSEN_TL"},{value:"c6",key:"NIELSEN_C6"}],null!=this.config.url&&((h=t.createElement("property")).setAttribute("key","serviceURL"),u=XMLUtils.createTextContent(t,this.config.url.toString()),h.appendChild(u),y.appendChild(h)),_=this.config.events)if(null!=(n=_[p])&&n.length>0)for(m=0,f=n.length;m<f;m++)for(o=n[m],(s=t.createElement("property")).setAttribute("key",a[p][o.type]),y.appendChild(s),g=0,C=c.length;g<C;g++)l=c[g],null!=(d=(null!=(A=o.data)?A[l.value]:void 0)||(null!=(E=this.config.data)?E[l.value]:void 0))&&""!==d&&((i=t.createElement("property")).setAttribute("key",l.key),d=XMLUtils.createTextContent(t,d),i.appendChild(d),s.appendChild(i));return t}},__extends(NielsenEndCommand,puremvc.SimpleCommand),NielsenEndCommand.prototype.execute=function(t){this.facade.retrieveProxy(NielsenProxy.NAME).end()},__extends(NielsenStartCommand,puremvc.SimpleCommand),NielsenStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(NielsenProxy.NAME).start()},__extends(RecommendationsPlugin,Feature),RecommendationsPlugin.prototype.featureName="recommendations",RecommendationsPlugin.prototype.moduleName="recommendations",RecommendationsPlugin.prototype.createController=function(){RecommendationsPlugin.__super__.createController.call(this),this.registerCommand(RecommendationsNotifications.RECOMMENDATION_SELECTED,RecommendationSelectedCommand),this.registerCommand(Notifications.START,RecommendationsPlayCommand),this.registerCommand(Notifications.PLAY_STATE_CHANGE,RecommendationsPlayStateChangeCommand),this.registerCommand(RecommendationsNotifications.RECOMMENDATIONS_LOADED,PluginEventCommand)},RecommendationsPlugin.prototype.createModel=function(){this.proxy=new RecommendationsProxy(this.config),this.registerProxy(this.proxy)},RecommendationsPlugin.prototype.createView=function(){this.registerMediator(new RecommendationsMediator)},RecommendationsPlugin.prototype.listNotificationInterests=function(){return[Notifications.START,Notifications.PLAY_STATE_CHANGE]},RecommendationsPlugin.prototype.listNotificationPublications=function(){var t,e;return RecommendationsPlugin.__super__.listNotificationPublications.call(this).concat(function(){var i;for(t in i=[],RecommendationsNotifications)e=RecommendationsNotifications[t],i.push(e);return i}())},RecommendationsPlugin.prototype.setURL=function(t){this.proxy.set(t)},RecommendationsPlugin.prototype.getURL=function(){return this.proxy.getURL()},RecommendationsPlugin.prototype.getData=function(){return this.proxy.getData()},RecommendationsPlugin.prototype.setData=function(t){this.proxy.setData(t)},RecommendationsPlugin.prototype.getTarget=function(){return this.proxy.getTarget()},RecommendationsPlugin.prototype.setTarget=function(t){this.proxy.setTarget(t)},AMP.registerPlugin("recommendations","html",RecommendationsPlugin),AMP.registerPlugin("recommendations","flash",RecommendationsWrapper),__extends(ComscoreProxy,DataBoundConfigurationProxy),ComscoreProxy.prototype.configurationName="comscore",ComscoreProxy.NAME=ModuleProxy.NAME,ComscoreProxy.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}},ComscoreProxy.prototype.adStart=function(){var t;t=this.constructURL("ads","started"),Utils.beacon(t)},ComscoreProxy.prototype.videoStart=function(){var t;t=this.constructURL("video","started"),Utils.beacon(t)},ComscoreProxy.prototype.constructURL=function(t,e){var i,o,n,a,r,s,l,c,d,u,p,h,y;if(i={},null!=(n=null!=(p=this.value.events)?p[t]:void 0))for(d=0,u=n.length;d<u;d++)(a=n[d]).type===e&&(o=a);for(r in h=this.value.data)c=h[r],i[r]=(null!=o&&null!=(y=o.data)?y[r]:void 0)||c;for(r in null==i.c7&&(i.c7=document.location.href.substr(0,512)),null==i.c8&&(i.c8=document.referrer.substr(0,512)),null==i.c9&&(i.c9=document.title),null==i.cv&&(i.cv="2.0"),i.rn=Date.now(),l=this.value.url,s=[],i)null!=(c=i[r])&&""!==c&&s.push(r+"="+escape(c));return s.length>0&&(l+="?"+s.join("&")),l.substr(0,2080)},__extends(ComscoreWrapper,PluginWrapper),ComscoreWrapper.NAME="ComscoreWrapper",ComscoreWrapper.prototype.flashPlugins=[{id:"ComscorePlugin",src:"#{paths.resources}plugins/ComscorePlugin.swf",blocking:!1,host:"akamai",main:"ComscorePlugin",type:"application/x-shockwave-flash"}],ComscoreWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P;for(u in e=t.firstChild,null==(r=t.getElementsByTagName("metrics")[0])&&(r=t.createElement("metrics"),e.appendChild(r)),(p=t.createElement("vendor")).setAttribute("id","comscore"),r.appendChild(p),a={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},c=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}],f=this.config.events)if(null!=(n=f[u])&&n.length>0)for(h=0,m=n.length;h<m;h++)for(o=n[h],(s=t.createElement("property")).setAttribute("key",a[u][o.type]),p.appendChild(s),(i=t.createElement("property")).setAttribute("key","COMSCORE_CSURL"),d=XMLUtils.createTextContent(t,this.config.url),i.appendChild(d),s.appendChild(i),y=0,g=c.length;y<g;y++)l=c[y],null!=(d=(null!=(C=o.data)?C[l.value]:void 0)||(null!=(P=this.config.data)?P[l.value]:void 0))&&""!==d&&((i=t.createElement("property")).setAttribute("key",l.key),d=XMLUtils.createTextContent(t,d),i.appendChild(d),s.appendChild(i));return t},__extends(ComscoreAdStartCommand,puremvc.SimpleCommand),ComscoreAdStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreProxy.NAME).adStart()},__extends(ComscoreStartCommand,puremvc.SimpleCommand),ComscoreStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreProxy.NAME).videoStart()},__extends(NielsenPlugin,Plugin),NielsenPlugin.prototype.moduleName="nielsen",NielsenPlugin.prototype.createController=function(){var t,e,i,o,n,a;if(NielsenPlugin.__super__.createController.call(this),null!=(e=null!=(n=this.config)&&null!=(a=n.events)?a.video:void 0))for(i=0,o=e.length;i<o;i++)"started"===(t=e[i]).type&&(this.registerCommand(Notifications.STARTED,NielsenStartCommand),this.registerCommand(Notifications.CONTENT_CHANGED,NielsenStartCommand)),"ended"===t.type&&(this.registerCommand(Notifications.ENDED,NielsenEndCommand),this.registerCommand(Notifications.CHANGE_CONTENT,NielsenEndCommand))},NielsenPlugin.prototype.createModel=function(){this.registerProxy(new NielsenProxy(this.config))},NielsenPlugin.prototype.listNotificationInterests=function(){return[Notifications.STARTED,Notifications.ENDED,Notifications.CONTENT_CHANGED,Notifications.CHANGE_CONTENT]},AMP.registerPlugin("nielsen","html",NielsenPlugin),AMP.registerPlugin("nielsen","flash",NielsenWrapper),__extends(ComscoreStreamsenseWrapper,PluginWrapper),ComscoreStreamsenseWrapper.NAME="ComscoreStreamsenseWrapper",ComscoreStreamsenseWrapper.prototype.flashPlugins=[{id:"ComscoreStreamSensePlugin",src:"#{paths.resources}plugins/ComscoreStreamSensePlugin.swf",blocking:!1,host:"akamai",main:"ComscoreStreamSensePlugin"}],ComscoreStreamsenseWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s;for(e=t.firstChild,null==(i=t.getElementsByTagName("metrics")[0])&&(i=t.createElement("metrics"),e.appendChild(i)),(a=t.createElement("vendor")).setAttribute("id","comscoreStreamSense"),i.appendChild(a),r=0,s=(n=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}]).length;r<s;r++)null!=(o=n[r]).value&&this.createProperty(t,o.key,o.value,a);return t},__extends(ComscoreStreamsenseProxy,PluginProxy),ComscoreStreamsenseProxy.NAME=ModuleProxy.NAME,ComscoreStreamsenseProxy.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}},ComscoreStreamsenseProxy.prototype.myStreamingTag=null,ComscoreStreamsenseProxy.prototype.sdk=null,ComscoreStreamsenseProxy.prototype.getScript=function(){return this.config.plugin.js},ComscoreStreamsenseProxy.prototype.initialize=function(){ComscoreStreamsenseProxy.__super__.initialize.call(this),this.sdk=akamai.amp.ns_,null!=this.sdk&&null===this.myStreamingTag&&(this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}))},ComscoreStreamsenseProxy.prototype.mediaChange=function(){null!=this.myStreamingTag&&this.myStreamingTag.stop(),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")},ComscoreStreamsenseProxy.prototype.adStart=function(t){null==t&&(t=null),this.myStreamingTag.playVideoAdvertisement(this.getMetaData(!0)),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")},ComscoreStreamsenseProxy.prototype.start=function(t){var e;null==t&&(t=null),null!=(e=this.facade.player.ads)&&e.getInProgress()||(this.myStreamingTag.playVideoContentPart(this.getMetaData()),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play"))},ComscoreStreamsenseProxy.prototype.stop=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")},ComscoreStreamsenseProxy.prototype.ended=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : End"),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId})},ComscoreStreamsenseProxy.prototype.getMetaData=function(t){var e,i,o,n;for(e in null==t&&(t=!1),i={},o=t?this.value.data.metadata.ads:this.value.data.metadata.video)"null"!==(n=o[e])&&(i[e]=n);return i},__extends(ComscoreStreamsenseStartedCommand,puremvc.SimpleCommand),ComscoreStreamsenseStartedCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME).start(t.body)},__extends(ComscoreStreamsenseAdStartedCommand,puremvc.SimpleCommand),ComscoreStreamsenseAdStartedCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME).adStart(t.body)},__extends(ComscoreStreamsenseStopCommand,puremvc.SimpleCommand),ComscoreStreamsenseStopCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME).stop(t.body)},__extends(ComscoreStreamsenseAdErrorCommand,puremvc.SimpleCommand),ComscoreStreamsenseAdErrorCommand.prototype.execute=function(t){var e;(e=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME)).adStart(t.body),e.stop(t.body)},__extends(ComscoreStreamsenseChangeMediaCommand,puremvc.SimpleCommand),ComscoreStreamsenseChangeMediaCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME).mediaChange()},__extends(ComscoreStreamsenseEndedCommand,puremvc.SimpleCommand),ComscoreStreamsenseEndedCommand.prototype.execute=function(t){this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME).ended()},__extends(ComscorePlugin,Plugin),ComscorePlugin.prototype.moduleName="comscore",ComscorePlugin.prototype.createController=function(){ComscorePlugin.__super__.createController.call(this),this.registerCommand(Notifications.STARTED,ComscoreStartCommand),this.registerCommand(Notifications.CONTENT_CHANGED,ComscoreStartCommand),this.registerCommand(AdNotifications.AD_STARTED,ComscoreAdStartCommand)},ComscorePlugin.prototype.createModel=function(){this.registerProxy(new ComscoreProxy(this.config))},ComscorePlugin.prototype.listNotificationInterests=function(){return[Notifications.STARTED,AdNotifications.AD_STARTED,Notifications.CONTENT_CHANGED]},AMP.registerPlugin("comscore","html",ComscorePlugin),AMP.registerPlugin("comscore","flash",ComscoreWrapper),__extends(OmnitureWrapper,PluginWrapper),OmnitureWrapper.NAME="OmnitureWrapper",OmnitureWrapper.prototype.flashPlugins=[{id:"OmniturePlugin",src:"#{paths.resources}plugins/OmniturePlugin.swf",blocking:!1,host:"akamai",main:"OmniturePlugin"}],OmnitureWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P,_,A,E,N,v,M,S,T,x,b,I,L,D,k,R,O,w,H,U,G,V;if(!0!==this.config.useJS){for(e=t.firstChild,null==(h=t.getElementsByTagName("metrics")[0])&&(h=t.createElement("metrics"),e.appendChild(h)),(N=t.createElement("vendor")).setAttribute("id","omniture"),h.appendChild(N),v=0,x=(C=[{value:this.config.channel,key:"OMNITURE_CHANNEL"},{value:this.config.account,key:"OMNITURE_ACCOUNT"},{value:this.config.debugTracking,key:"OMNITURE_DEBUG_TRACKING"},{value:this.config.trackLocal,key:"OMNITURE_TRACK_LOCAL"},{value:this.config.visitorNamespace,key:"OMNITURE_VISITOR_NAMESPACE"},{value:this.config.trackingServer,key:"OMNITURE_TRACKING_SERVER"},{value:this.config.trackingServerSecure,key:"OMNITURE_TRACKING_SERVER_SECURE"},{value:this.config.currencyCode,key:"OMNITURE_CURRENCY_CODE"},{value:this.config.trackWhilePlaying,key:"OMNITURE_TRACK_WHILE_PLAYING"},{value:this.config.trackMediaMethods,key:"OMNITURE_TRACK_MEDIA_METHODS"},{value:this.config.mediaName,key:"OMNITURE_MEDIA_NAME"},{value:this.config.playerName,key:"OMNITURE_PLAYER_NAME"}]).length;v<x;v++)null!=(g=C[v]).value&&this.createProperty(t,g.key,g.value,N);if(null!=(p=this.config.Media)){for(M=0,b=(C=[{value:p.autoTrack,key:"OMNITURE_AUTO_TRACK"},{value:p.segmentByMilestones,key:"OMNITURE_SEGMENT_MILESTONES"},{value:p.trackVars,key:"OMNITURE_TRACKVARS"},{value:p.trackEvents,key:"OMNITURE_TRACKEVENTS"},{value:p.trackUsingContextData,key:"OMNITURE_TRACK_CONTEXT_DATA"},{value:p.trackSecondIntervals,key:"OMNITURE_TRACKSECOND_INTERVALS"}]).length;M<b;M++)null!=(g=C[M]).value&&this.createProperty(t,g.key,g.value,N);if(null!=p.trackMilestones)for(_=this.createProperty(t,"OMNITURE_TRACK_MILESTONES",null,N),S=0,I=(m=p.trackMilestones).length;S<I;S++)for(c in y=m[S],P=this.createProperty(t,y.percent,null,_),y)E=y[c],"percent"!==c&&this.createProperty(t,c,E,P);if(null!=(o=p.contextDataMapping))for(c in i=this.createProperty(t,"OMNITURE_CONTEXT_DATA",null,N),o)if("string"==typeof(E=o[c])&&this.createProperty(t,c,E,i),E instanceof Array)for(f=this.createProperty(t,c,null,i),T=0,L=E.length;T<L;T++)y=E[T],this.createProperty(t,y.percent,y.events,f)}if(null!=(d=this.config.customLinkTracking))for(c in u=this.createProperty(t,"OMNITURE_CUSTOM_LINK_TRACKING",null,N),d)if("intervalReached"===c)for(s=this.createProperty(t,c,null,u),O=0,D=(U=d[c]).length;O<D;O++)for(c in l=U[O],r=this.createProperty(t,l.interval,null,s),l)"interval"!==c&&this.createProperty(t,c,l[c],r);else this.createProperty(t,c,d[c],u);if(null!=(a=null!=(G=this.config.events)?G.video:void 0))for(w=0,k=a.length;w<k;w++){switch((n=a[w]).type){case"started":A="videoStart";break;case"ended":A="videoComplete";break;case"play":A="videoResume";break;case"pause":A="videoPause";break;default:A=n.type}this.createProperty(t,A,n.data,N)}if(null!=(a=null!=(V=this.config.events)?V.ads:void 0))for(H=0,R=a.length;H<R;H++)A="started"===(n=a[H]).type?"adStart":"ended"===n.type?"adComplete":n.type,this.createProperty(t,A,n.data,N)}},__extends(OmnitureProxy,PluginProxy),OmnitureProxy.NAME=ModuleProxy.NAME,OmnitureProxy.prototype.defaults={main:"s",heartbeat:null,account:null,playerName:null,mediaName:null,trackingServer:null,visitorNamespace:null,visitor:null,visitorID:null,pageName:null},OmnitureProxy.prototype.media=null,OmnitureProxy.prototype.started=!1,OmnitureProxy.prototype.ad=null,OmnitureProxy.prototype.adCurrentTime=null,OmnitureProxy.prototype.adStarted=!1,OmnitureProxy.prototype.adsEnabled=!1,OmnitureProxy.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.getTitle()},OmnitureProxy.prototype.getPlayerName=function(){var t;return this.getConfigurationData().playerName||(null!=(t=this.facade.player.retrieveProxy(ConfigurationProxy.NAME))?t.getName():void 0)||this.facade.player.config.name||"amp"},OmnitureProxy.prototype.getPlaybackCore=function(){var t;return(null!=(t=this.facade.player.retrieveProxy(PlayerProxy.NAME))?t.getActivePlaybackCore():void 0)||this.facade.player.playback},OmnitureProxy.prototype.initialize=function(){var t,e;if(OmnitureProxy.__super__.initialize.call(this),this.media=this.facade.player.retrieveProxy(MediaProxy.NAME),this.adsEnabled=null!=(t=this.facade.player.ads)?t.getEnabled():void 0,null!=this.plugin){try{null==this.plugin.Media&&this.plugin.loadModule("Media")}catch(t){this.error("initialize",t)}null==(null!=(e=this.plugin.Media)?e.openAd:void 0)&&(this.adStart=this.adEnded=this.adPlay=this.adPause=this.adCurrentTime=function(){})}},OmnitureProxy.prototype.createPlugin=function(){return window[this.getConfigurationData().main]},OmnitureProxy.prototype.mediaChange=function(){var t;this.started=!1,this.adsEnabled=null!=(t=this.facade.player.ads)?t.getEnabled():void 0},OmnitureProxy.prototype.start=function(){if(!0!==this.started){try{this.started=!0,this.plugin.Media.open(this.getMediaName(),this.media.getDuration(),this.getPlayerName())}catch(t){this.error(t)}!0!==this.adsEnabled&&this.play()}},OmnitureProxy.prototype.play=function(){if(!0===this.started){if(!0!==this.adStarted)try{this.plugin.Media.play(this.getMediaName(),this.getPlaybackCore().getCurrentTime()||0)}catch(t){this.error(t)}}else this.start()},OmnitureProxy.prototype.pause=function(){if(!0!==this.adStarted)try{this.plugin.Media.stop(this.getMediaName(),this.getPlaybackCore().getCurrentTime())}catch(t){this.error(t)}},OmnitureProxy.prototype.seeking=function(){try{this.plugin.Media.stop(this.getMediaName(),this.getPlaybackCore().getCurrentTime())}catch(t){this.error(t)}},OmnitureProxy.prototype.seeked=function(){try{this.plugin.Media.play(this.getMediaName(),this.getPlaybackCore().getCurrentTime())}catch(t){this.error(t)}},OmnitureProxy.prototype.ended=function(){try{this.plugin.Media.stop(this.getMediaName(),this.getPlaybackCore().getCurrentTime()),this.plugin.Media.close(this.getMediaName()),this.started=!1}catch(t){this.error(t)}},OmnitureProxy.prototype.getAd=function(){return this.ad},OmnitureProxy.prototype.setAd=function(t){return this.adStarted=!1,this.adCurrentTime=0,this.ad=t},OmnitureProxy.prototype.adStart=function(){try{this.adStarted=!0,this.plugin.Media.openAd(this.ad.title,this.ad.duration,this.getPlayerName(),this.getMediaName(),this.ad.type,this.ad.position,this.ad.cpm),this.adPlay()}catch(t){this.error("ad start",t)}},OmnitureProxy.prototype.adPlay=function(){!0!==this.adStarted&&this.adStart();try{this.plugin.Media.play(this.ad.title,this.adCurrentTime||0)}catch(t){this.error("ad play",t)}},OmnitureProxy.prototype.adPause=function(){try{this.plugin.Media.stop(this.ad.title,this.adCurrentTime)}catch(t){this.error("ad pause",t)}},OmnitureProxy.prototype.adCurrentTime=function(t){this.adCurrentTime=t},OmnitureProxy.prototype.adEnded=function(){if(!1!==this.adStarted){try{this.adStarted=!1,this.plugin.Media.stop(this.ad.title,this.ad.duration),this.plugin.Media.close(this.ad.title)}catch(t){this.error("ad end",t)}this.play()}},__extends(HeartbeatProxy,OmnitureProxy),HeartbeatProxy.NAME=ModuleProxy.NAME,HeartbeatProxy.prototype.aaPlugin=null,HeartbeatProxy.prototype.playerPlugin=null,HeartbeatProxy.prototype.heartbeat=null,HeartbeatProxy.prototype.resumed=!1,HeartbeatProxy.prototype.liveLinear=null,HeartbeatProxy.prototype.initialize=function(){var t,e,i,o,n,a,r,s=this;HeartbeatProxy.__super__.initialize.call(this),null!=(i=this.getConfigurationData()).heartbeat.liveLinear&&this.calculateLiveLinear(),"undefined"!=typeof Visitor&&null!==Visitor&&((r=new Visitor(i.visitor.marketingCloudOrgId)).trackingServer=i.visitor.trackingServer),(e=new AppMeasurement).account=i.account,e.trackingServer=i.trackingServer,e.visitor=r,e.pageName=i.pageName,e.charSet="UTF-8",e.visitorID=i.visitorID,o=this.createDelegate(),this.playerPlugin=new ADB.va.plugins.videoplayer.VideoPlayerPlugin(o),(n=new ADB.va.plugins.videoplayer.VideoPlayerPluginConfig).debugLogging=this.getDebug(),this.playerPlugin.configure(n),(o=new ADB.va.plugins.aa.AdobeAnalyticsPluginDelegate).onError=function(t){s.facade.logger.error("AdobeAnalyticsPlugin error: "+t.getMessage()+" | "+t.getDetails())},this.aaPlugin=new ADB.va.plugins.aa.AdobeAnalyticsPlugin(e,o),(n=new ADB.va.plugins.aa.AdobeAnalyticsPluginConfig).channel=i.heartbeat.channel,n.debugLogging=this.getDebug(),this.aaPlugin.configure(n),(o=new ADB.va.plugins.ah.AdobeHeartbeatPluginDelegate).onError=function(t){s.facade.logger.error("AdobeHeartbeatPlugin error: "+t.getMessage()+" | "+t.getDetails())},t=new ADB.va.plugins.ah.AdobeHeartbeatPlugin(o),(n=new ADB.va.plugins.ah.AdobeHeartbeatPluginConfig(i.heartbeat.trackingServer,i.heartbeat.publisher)).ovp=i.heartbeat.ovp,n.sdk=i.heartbeat.sdk,n.ssl=!0===i.heartbeat.ssl,n.debugLogging=this.getDebug(),t.configure(n),a=[this.playerPlugin,this.aaPlugin,t],(o=new ADB.va.HeartbeatDelegate).onError=function(t){s.facade.logger.error("Heartbeat error: "+t.getMessage()+" | "+t.getDetails())},this.heartbeat=new ADB.va.Heartbeat(o,a),(n=new ADB.va.HeartbeatConfig).debugLogging=this.getDebug(),this.heartbeat.configure(n)},HeartbeatProxy.prototype.calculateLiveLinear=function(){var t,e,i=this;null==this.liveLinear&&(this.liveLinear={}),!0!==this.liveLinear.updating&&(this.liveLinear.updating=!0,t={updating:!1},e=Date.now(),Utils.getUTC().then(function(o){var n,a,r,s;return r=Date.now(),a=(n=new Date(o)).toJSON().replace(/([^T]+T).+/,"$1"),s=i.getConfigurationData().heartbeat.liveLinear.timezone||"Z",t.utc=o,n=new Date(e+(r-e)/2),t.client=n.getTime(),t.offset=t.client-o,n=new Date(a+"00:00:00.000"+s),t.start=n.getTime(),n=new Date(a+"23:59:59.999"+s),t.end=n.getTime(),t.duration=Math.round((t.end-t.start)/1e3),i.liveLinear=t}))},HeartbeatProxy.prototype.calculateLiveLinearTime=function(){var t,e;return t=Date.now()-this.liveLinear.offset,(e=Math.round((t-this.liveLinear.start)/1e3))>this.liveLinear.duration&&(e-=this.liveLinear.duration,this.calculateLiveLinear()),e},HeartbeatProxy.prototype.createDelegate=function(){var t,e=this;return(t=new ADB.va.plugins.videoplayer.VideoPlayerPluginDelegate).getVideoInfo=function(){var t,i,o;return t=e.getPlaybackCore(),(o=new ADB.va.plugins.videoplayer.VideoInfo).id=e.media.getGUID()||e.media.getTitle(),o.playerName=e.getPlayerName(),o.name=e.getMediaName(),o.resumed=e.resumed,!0===e.getConfigurationData().heartbeat.liveLinear.enabled?(o.length=e.liveLinear.duration,o.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_LIVE,o.playhead=e.calculateLiveLinearTime()):"live"===e.media.getTemporalType()?(o.length=-1,o.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_LIVE,o.playhead=0):(o.length=e.media.getDuration(),o.streamType=ADB.va.plugins.videoplayer.AssetType.ASSET_TYPE_VOD,i=null!=t&&"function"==typeof t.getCurrentTime?t.getCurrentTime():void 0,o.playhead=null==i||isNaN(i)?0:i),o},t.getAdInfo=function(){var t,i;return t=new ADB.va.plugins.videoplayer.AdInfo,null==e.ad?null:(t.id=e.ad.id,i=e.ad.duration,t.length=isNaN(i)||0===i?-1:i,t.position=e.ad.position,t.name=e.ad.title,t)},t.getAdBreakInfo=function(){var t;return t=new ADB.va.plugins.videoplayer.AdBreakInfo,null==e.ad?null:(t.name=e.ad.type,t.position=e.ad.position,t.playerName=e.getPlayerName(),t.startTime=e.getPlaybackCore().getCurrentTime(),t)},t.getChapterInfo=function(){var t,i;return null==(i=e.media.getScene(e.getPlaybackCore().getCurrentTime()))?null:((t=new ADB.va.plugins.videoplayer.ChapterInfo).name=i.title,t.length=i.end-i.start,t.position=i.position,t.startTime=i.start,t)},t.onError=function(t){e.facade.logger.error("Heartbeat Error:",t)},t.getQoSInfo=function(){return new ADB.va.plugins.videoplayer.QoSInfo,null},t},HeartbeatProxy.prototype.mediaChange=function(){var t,e;HeartbeatProxy.__super__.mediaChange.call(this),this.resumed=!1,null!=(t=null!=(e=this.getValue("heartbeat").metadata)?e.video:void 0)&&this.aaPlugin.setVideoMetadata(t)},HeartbeatProxy.prototype.start=function(){if(!0!==this.started){try{this.playerPlugin.trackVideoLoad(),this.started=!0}catch(t){this.error(t)}this.play()}},HeartbeatProxy.prototype.play=function(){!0!==this.started&&this.start();try{this.playerPlugin.trackPlay()}catch(t){this.error(t)}},HeartbeatProxy.prototype.pause=function(){try{this.playerPlugin.trackPause(),this.resumed=!0}catch(t){this.error(t)}},HeartbeatProxy.prototype.seeking=function(){try{this.playerPlugin.trackSeekStart()}catch(t){this.error(t)}},HeartbeatProxy.prototype.seeked=function(){try{this.playerPlugin.trackSeekComplete()}catch(t){this.error(t)}},HeartbeatProxy.prototype.ended=function(){try{this.playerPlugin.trackComplete(),this.playerPlugin.trackVideoUnload(),this.started=!1,this.aaPlugin.setVideoMetadata(null)}catch(t){this.error(t)}},HeartbeatProxy.prototype.adStart=function(){var t,e;if(!0!==this.started)return null!=(t=null!=(e=this.getValue("heartbeat").metadata)?e.ad:void 0)&&this.aaPlugin.setAdMetadata(t),this.start(),void setTimeout(this.adStart.bind(this),0);try{this.playerPlugin.trackAdStart()}catch(t){this.error(t)}},HeartbeatProxy.prototype.adEnded=function(){try{this.playerPlugin.trackAdComplete(),this.aaPlugin.setAdMetadata(null)}catch(t){this.error(t)}},HeartbeatProxy.prototype.adPlay=function(){},HeartbeatProxy.prototype.adPause=function(){},__extends(OmnitureStartCommand,PluginCommand),OmnitureStartCommand.prototype.execute=function(t){this.proxy.start()},__extends(OmniturePlayCommand,PluginCommand),OmniturePlayCommand.prototype.execute=function(t){this.proxy.play()},__extends(OmniturePauseCommand,PluginCommand),OmniturePauseCommand.prototype.execute=function(t){this.proxy.pause()},__extends(OmnitureSeekingCommand,PluginCommand),OmnitureSeekingCommand.prototype.execute=function(t){this.proxy.seeking()},__extends(OmnitureSeekedCommand,PluginCommand),OmnitureSeekedCommand.prototype.execute=function(t){this.proxy.seeked()},__extends(OmnitureEndedCommand,PluginCommand),OmnitureEndedCommand.prototype.execute=function(t){this.proxy.ended()},__extends(OmnitureContentChangedCommand,PluginCommand),OmnitureContentChangedCommand.prototype.execute=function(t){this.proxy.setMedia(t.getBody()),this.proxy.start()},__extends(OmnitureAdLoadedCommand,PluginCommand),OmnitureAdLoadedCommand.prototype.execute=function(t){this.proxy.setAd(t.getBody())},__extends(OmnitureAdStartedCommand,PluginCommand),OmnitureAdStartedCommand.prototype.execute=function(t){this.proxy.adStart()},__extends(OmnitureAdPlayCommand,PluginCommand),OmnitureAdPlayCommand.prototype.execute=function(t){this.proxy.adPlay()},__extends(OmnitureAdPauseCommand,PluginCommand),OmnitureAdPauseCommand.prototype.execute=function(t){this.proxy.adPause()},__extends(OmnitureAdBreakEndCommand,PluginCommand),OmnitureAdBreakEndCommand.prototype.execute=function(t){this.proxy.adEnded(),this.proxy.setAd(null)},__extends(OmnitureAdTimeUpdateCommand,PluginCommand),OmnitureAdTimeUpdateCommand.prototype.execute=function(t){this.proxy.adCurrentTime(t.getBody())},__extends(OmnitureMediaChangeCommand,PluginCommand),OmnitureMediaChangeCommand.prototype.execute=function(t){this.proxy.mediaChange()},__extends(AdContentStartedCommand,PluginCommand),AdContentStartedCommand.prototype.execute=function(t){this.proxy.contentStarted(),this.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"vpaid")},__extends(AdContentEndedCommand,PluginCommand),AdContentEndedCommand.prototype.execute=function(t){this.proxy.contentEnded()},__extends(AdMediaChangeCommand,PluginCommand),AdMediaChangeCommand.prototype.execute=function(t){!1!==this.proxy.getEnabled()&&this.proxy.engage(t.getBody())},__extends(AdLoadedCommand,PluginEventCommand),AdLoadedCommand.prototype.execute=function(t){this.sendNotification(Notifications.UPDATE_DATA_BINDINGS,{contexts:[this.proxy.getContextName()]}),AdLoadedCommand.__super__.execute.call(this,t)},__extends(AdBreakStartCommand,PluginEventCommand),AdBreakStartCommand.prototype.execute=function(t){AdBreakStartCommand.__super__.execute.call(this,t),this.proxy.breakStart()},__extends(AdBreakEndCommand,PluginEventCommand),AdBreakEndCommand.prototype.execute=function(t){AdBreakEndCommand.__super__.execute.call(this,t),this.proxy.breakEnd(),this.applicationState.getEnded()&&!0===this.applicationState.getHasPostContent()&&this.sendNotification(Notifications.MEDIA_SEQUENCE_ENDED)},__extends(AdSeekCommand,PluginCommand),AdSeekCommand.prototype.execute=function(t){this.proxy.contentSeek(t.getBody())},__extends(AdContainerCreatedCommand,PluginEventCommand),AdContainerCreatedCommand.prototype.execute=function(t){this.proxy.container=t.getBody(),AdContainerCreatedCommand.__super__.execute.call(this,t)},__extends(AdReplayCommand,PluginCommand),AdReplayCommand.prototype.execute=function(t){"function"==typeof this.proxy.replay&&!1===this.facade.player.getAutoplay()&&this.proxy.replay()},AdVO.prototype.id=null,AdVO.prototype.title=null,AdVO.prototype.duration=NaN,AdVO.prototype.position=NaN,AdVO.prototype.totalAds=NaN,AdVO.prototype.type=null,AdVO.prototype.partner=null,AdVO.prototype.advertiser=null,AdVO.prototype.companions=null,AdVO.prototype.metadata=null,AdVO.prototype.request=null,AdVO.prototype.error=null,AdVO.prototype.time=null,__extends(AdStartCommand,PluginEventCommand),AdStartCommand.prototype.execute=function(t){this.sendNotification(Notifications.PLAY_REQUEST),!1===this.playback.initialized&&this.player.sendNotification(Notifications.INITIALIZED),this.proxy.start(),AdStartCommand.__super__.execute.call(this,t)},__extends(AdPlayCommand,PluginCommand),AdPlayCommand.prototype.execute=function(t){!0!==this.applicationState.getLocked()&&(this.sendNotification(Notifications.PLAY_REQUEST),!1!==this.proxy.getStarted()?(this.proxy.play(),this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)):this.sendNotification(Notifications.START,!0))},__extends(AdPauseCommand,PluginCommand),AdPauseCommand.prototype.execute=function(t){this.proxy.pause(),this.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED)},__extends(AdTogglePlayPauseCommand,PluginEventCommand),AdTogglePlayPauseCommand.prototype.execute=function(t){var e;e=this.proxy.getPaused()||!1===this.proxy.getStarted()?Notifications.PLAY:Notifications.PAUSE,this.sendNotification(e,!0)},__extends(AdVolumeChangeCommand,PluginEventCommand),AdVolumeChangeCommand.prototype.execute=function(t){this.proxy.setVolume(t.getBody()),AdVolumeChangeCommand.__super__.execute.call(this,t)},__extends(AdPlayStateChangeCommand,PluginEventCommand),AdPlayStateChangeCommand.prototype.execute=function(t){"playing"===t.getBody().value&&this.dispatchEvent("playing",this.proxy.adVO)},__extends(ComscoreStreamsensePlugin,Plugin),ComscoreStreamsensePlugin.prototype.moduleName="comscorestreamsense",ComscoreStreamsensePlugin.prototype.createModel=function(){this.registerProxy(new ComscoreStreamsenseProxy(this.config))},ComscoreStreamsensePlugin.prototype.createController=function(){ComscoreStreamsensePlugin.__super__.createController.call(this),this.registerCommand(Notifications.MEDIA_CHANGE,ComscoreStreamsenseChangeMediaCommand),this.registerCommand(AdNotifications.AD_STARTED,ComscoreStreamsenseAdStartedCommand),this.registerCommand(AdNotifications.AD_ENDED,ComscoreStreamsenseStopCommand),this.registerCommand(AdNotifications.SKIPPED,ComscoreStreamsenseStopCommand),this.registerCommand(AdNotifications.AD_ERROR,ComscoreStreamsenseAdErrorCommand),this.registerCommand(Notifications.PLAYING,ComscoreStreamsenseStartedCommand),this.registerCommand(Notifications.PAUSED,ComscoreStreamsenseStopCommand),this.registerCommand(Notifications.ENDED,ComscoreStreamsenseEndedCommand)},ComscoreStreamsensePlugin.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE,AdNotifications.AD_STARTED,AdNotifications.AD_ENDED,AdNotifications.AD_ERROR,AdNotifications.SKIPPED,Notifications.ENDED,Notifications.PAUSED,Notifications.PLAYING]},AMP.registerPlugin("comscorestreamsense","html",ComscoreStreamsensePlugin),AMP.registerPlugin("comscorestreamsense","flash",ComscoreStreamsenseWrapper),__extends(AdProxy,PluginProxy),AdProxy.NAME=PluginProxy.NAME,AdProxy.prototype.inProgress=!1,AdProxy.prototype.paused=!1,AdProxy.prototype.started=!1,AdProxy.prototype.adVO=null,AdProxy.prototype.contextName="ad",AdProxy.prototype.container=null,AdProxy.prototype.partner=null,AdProxy.prototype.pods=null,AdProxy.prototype.createDefaultAdVO=function(){return new AdVO(null,null,null,null,null,this.partner,null,null,null,null,null)},AdProxy.prototype.getContextData=function(){return this.adVO||{}},AdProxy.prototype.setCompanions=function(t){return this.adVO.companions=t,this.sendNotification(AdNotifications.AD_COMPANION,this.adVO),t},AdProxy.prototype.getCompanions=function(){var t;return null!=(t=this.adVO)?t.companions:void 0},AdProxy.prototype.getInProgress=function(){return this.inProgress},AdProxy.prototype.setInProgress=function(t){return this.inProgress=t,t},AdProxy.prototype.getStarted=function(){return this.started},AdProxy.prototype.setStarted=function(t){return this.started=t,t},AdProxy.prototype.getPaused=function(){return this.paused},AdProxy.prototype.setPaused=function(t){return this.paused=t,t},AdProxy.prototype.setCues=function(t){var e,i,o,n;for(i=[],o=0,n=t.length;o<n;o++)e=t[o],i.push({startTime:e,endTime:e});return this.facade.player.mediaProxy.setCues(i),t},AdProxy.prototype.play=function(){this.setPaused(!1),this.sendNotification(AdNotifications.AD_PLAY,this.adVO)},AdProxy.prototype.pause=function(){this.setPaused(!0),this.sendNotification(AdNotifications.AD_PAUSE,this.adVO)},AdProxy.prototype.breakStart=function(){this.setInProgress(!0)},AdProxy.prototype.breakEnd=function(){this.setInProgress(!1),this.reset()},AdProxy.prototype.error=function(t,e){var i;null==e&&(e=!0),i=("function"==typeof t.getMessage?t.getMessage():void 0)||t.message,this.facade.logger.error("[AMP AD ERROR]",i+" Skipping ad content.",t),null==this.adVO&&(this.adVO={}),this.adVO.error=t,this.sendNotification(AdNotifications.AD_ERROR,this.adVO),!0===e&&this.endBreak()},AdProxy.prototype.engage=function(t){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())},AdProxy.prototype.engageAds=function(){this.facade.player.removeCommand(Notifications.START),this.facade.player.removeCommand(Notifications.PLAY),this.facade.player.removeCommand(Notifications.PAUSE),this.facade.player.removeCommand(Notifications.ENDED),this.facade.player.removeCommand(UserNotifications.PLAY),this.facade.player.removeCommand(UserNotifications.PAUSE),this.facade.player.removeCommand(UserNotifications.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(Notifications.CHANGE_DURATION),this.facade.removeCommand(Notifications.STARTED),this.facade.removeCommand(Notifications.ENDED),this.facade.registerCommand(Notifications.START,AdStartCommand),this.facade.registerCommand(Notifications.PLAY,AdPlayCommand),this.facade.registerCommand(Notifications.PAUSE,AdPauseCommand),this.facade.registerCommand(UserNotifications.PLAY,AdPlayCommand),this.facade.registerCommand(UserNotifications.PAUSE,AdPauseCommand),this.facade.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,AdTogglePlayPauseCommand),this.facade.registerCommand(Notifications.VOLUME_CHANGE,AdVolumeChangeCommand),this.facade.registerCommand(Notifications.PLAY_STATE_CHANGE,AdPlayStateChangeCommand)},AdProxy.prototype.reset=function(){this.facade.removeCommand(Notifications.START),this.facade.removeCommand(Notifications.PLAY),this.facade.removeCommand(Notifications.PAUSE),this.facade.removeCommand(UserNotifications.PLAY),this.facade.removeCommand(UserNotifications.PAUSE),this.facade.removeCommand(UserNotifications.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(Notifications.VOLUME_CHANGE),this.facade.removeCommand(Notifications.PLAY_STATE_CHANGE),this.facade.player.registerCommand(Notifications.START,StartCommand),this.facade.player.registerCommand(Notifications.PLAY,PlayCommand),this.facade.player.registerCommand(Notifications.PAUSE,PauseCommand),this.facade.player.registerCommand(Notifications.ENDED,EndedCommand),this.facade.player.registerCommand(UserNotifications.PLAY,PlayCommand),this.facade.player.registerCommand(UserNotifications.PAUSE,PauseCommand),this.facade.player.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,TogglePlayPauseCommand),this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(Notifications.CHANGE_DURATION,ChangeDurationCommand),this.facade.registerCommand(Notifications.STARTED,AdContentStartedCommand),this.facade.registerCommand(Notifications.ENDED,AdContentEndedCommand)},AdProxy.prototype.requestAd=function(){this.sendNotification(AdNotifications.REQUEST,this.adVO)},AdProxy.prototype.getPodById=function(t){var e,i,o,n;for(i=0,o=(n=this.pods).length;i<o;i++)if((e=n[i]).id===t)return e},AdProxy.prototype.setPodLocks=function(t){var e,i,o,n;for(i=0,o=t.length;i<o;i++)e=t[i],null!=(n=this.getPodById(e.id))&&(n.locked=e.locked)},AdProxy.prototype.resize=function(t){},AdProxy.prototype.startBreak=function(t){return null!=t&&(this.adVO=t),this.setStarted(!0),this.sendNotification(AdNotifications.BREAK_START,this.adVO),!1!==this.getEnabled()||(this.endBreak(),!1)},AdProxy.prototype.endBreak=function(){this.sendNotification(AdNotifications.BREAK_END,this.adVO)},AdProxy.prototype.start=function(){this.startBreak()},AdProxy.prototype.contentPlay=function(){this.facade.player.sendNotification(Notifications.PLAY,!0)},AdProxy.prototype.contentPause=function(){var t;!0===(t=this.facade.player.mediaElement).seeking?t.once("seeked",function(){t.pause()}):t.pause()},AdProxy.prototype.contentStarted=function(){},AdProxy.prototype.contentSeek=function(t){},AdProxy.prototype.contentEnded=function(){},AdProxy.prototype.setVolume=function(t){},AdProxy.prototype.getVolume=function(){},AdProxy.prototype.terminateAd=function(){},AdProxy.prototype.terminateAllAds=function(){},__extends(OmniturePlugin,Plugin),OmniturePlugin.prototype.moduleName="omniture",OmniturePlugin.prototype.createController=function(){this.registerCommand(Notifications.MEDIA_CHANGE,OmnitureMediaChangeCommand),this.registerCommand(Notifications.ENDED,OmnitureEndedCommand),this.registerCommand(Notifications.STARTED,OmnitureStartCommand),this.registerCommand(Notifications.PLAY,OmniturePlayCommand),this.registerCommand(Notifications.PAUSE,OmniturePauseCommand),this.registerCommand(Notifications.SEEKING,OmnitureSeekingCommand),this.registerCommand(Notifications.SEEKED,OmnitureSeekedCommand),this.registerCommand(Notifications.CHANGE_CONTENT,OmnitureEndedCommand),this.registerCommand(Notifications.CONTENT_CHANGED,OmnitureContentChangedCommand),this.registerCommand(AdNotifications.AD_LOADED,OmnitureAdLoadedCommand),this.registerCommand(AdNotifications.AD_STARTED,OmnitureAdStartedCommand),this.registerCommand(AdNotifications.AD_PLAY,OmnitureAdPlayCommand),this.registerCommand(AdNotifications.AD_PAUSE,OmnitureAdPauseCommand),this.registerCommand(AdNotifications.AD_TIME_UPDATE,OmnitureAdTimeUpdateCommand),this.registerCommand(AdNotifications.BREAK_END,OmnitureAdBreakEndCommand)},OmniturePlugin.prototype.createModel=function(){var t;!0===(null!=(t=this.config.heartbeat)?t.enabled:void 0)?this.registerProxy(new HeartbeatProxy(this.config)):this.registerProxy(new OmnitureProxy(this.config))},OmniturePlugin.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA,Notifications.MEDIA_CHANGE,Notifications.CHANGE_CONTENT,Notifications.CONTENT_CHANGED,Notifications.TIME_UPDATE,Notifications.ENDED,Notifications.STARTED,Notifications.PLAY,Notifications.PAUSE,Notifications.SEEKING,Notifications.SEEKED,AdNotifications.AD_LOADED,AdNotifications.AD_STARTED,AdNotifications.AD_PLAY,AdNotifications.AD_PAUSE,AdNotifications.AD_TIME_REMAINING,AdNotifications.BREAK_START,AdNotifications.BREAK_END]},AMP.registerPlugin("omniture","html",OmniturePlugin),AMP.registerPlugin("omniture","flash",OmnitureWrapper);var FlashAdNotifications={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",BREAK_SKIPPED:"adComponentBreakSkipped",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentImpressionEnd",COMPLETE:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest",AD_REQUEST_COMPLETE:"adComponentAdsRequestComplete",AD_SKIPPED:"adComponentAdSkipped",AD_IMPRESSION:"adComponentImpression"};function IMAOverlayProxy(t){IMAOverlayProxy.__super__.constructor.call(this,t)}__extends(IMAOverlayProxy,DataBoundConfigurationProxy),IMAOverlayProxy.prototype.configurationName="imaoverlay",IMAOverlayProxy.NAME="IMAOveralyProxy",IMAOverlayProxy.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30},IMAOverlayProxy.prototype.durationTimer=null,IMAOverlayProxy.prototype.intervalTimer=null,IMAOverlayProxy.prototype.delayTimer=null,IMAOverlayProxy.prototype.stop=function(){clearTimeout(this.durationTimer),clearTimeout(this.delayTimer),clearTimeout(this.intervalTimer)},IMAOverlayProxy.prototype.play=function(){var t=this;this.stop(),this.delayTimer=setTimeout(function(){return t.requestAd()},1e3*this.value.delay)},IMAOverlayProxy.prototype.requestAd=function(){var t;null!=(t=this.getValue("adTagUrl"))&&(t=(t=t.replace("[timestamp]",(new Date).getTime())).replace("__random-number__",(new Date).getTime())),Utils.get(t,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)},IMAOverlayProxy.prototype.vastLoadHandler=function(t){var e,i,o,n,a,r;if(null!=(r=t.target.responseXML))try{null!=(e=r.querySelector("NonLinear"))?(a=null!=r.querySelector("Impression")?r.querySelector("Impression").textContent:"",o=null!=r.querySelector("Tracking[event=creativeView]")?r.querySelector("Tracking[event=creativeView]").textContent:"",i=null!=e.querySelector("NonLinearClickThrough")?e.querySelector("NonLinearClickThrough").textContent:"",n={src:e.querySelector("StaticResource").textContent,width:e.getAttribute("width"),height:e.getAttribute("height"),tracking:[a,o],href:i},this.displayAd(n)):this.error("No overlay was returned")}catch(t){this.error(t)}},IMAOverlayProxy.prototype.error=function(t){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",t),this.stop()},IMAOverlayProxy.prototype.displayAd=function(t){var e=this;this.sendNotification(IMANotifications.ADD_OVERLAY,t),this.durationTimer=setTimeout(function(){return e.sendNotification(IMANotifications.REMOVE_OVERLAY),e.intervalTimer=setTimeout(function(){return e.requestAd()},1e3*e.value.interval)},1e3*this.value.duration)};var IMANotifications={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};function IMAProxy(t){IMAProxy.__super__.constructor.call(this,t),this.intervals=[],this.loadedmetadata=this.onLoadedMetadata.bind(this),this.adVO=this.createDefaultAdVO()}function IMAAddOverlayCommand(){IMAAddOverlayCommand.__super__.constructor.call(this)}function IMARemoveOverlayCommand(){IMARemoveOverlayCommand.__super__.constructor.call(this)}function IMAOverlayMediator(){IMAOverlayMediator.__super__.constructor.call(this)}function IMAReadyCommand(){IMAReadyCommand.__super__.constructor.call(this)}function IMADisplayStateChangeCommand(){IMADisplayStateChangeCommand.__super__.constructor.call(this)}function IMAActiveStateChangeCommand(){IMAActiveStateChangeCommand.__super__.constructor.call(this)}function IMAFullscreenProxy(t){IMAFullscreenProxy.__super__.constructor.call(this,t)}function AdWrapper(t,e){AdWrapper.__super__.constructor.call(this,t,e),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:this.getInProgress,enumerable:!0,configurable:!1},started:{get:this.getStarted,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},companions:{get:this.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:this.getCurrentAd,enumerable:!0,configurable:!1}})}function IMAWrapper(){return IMAWrapper.__super__.constructor.apply(this,arguments)}function AdPlugin(){AdPlugin.__super__.constructor.call(this),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:this.getInProgress,enumerable:!0,configurable:!1},started:{get:this.getStarted,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},companions:{get:this.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:this.getCurrentAd,enumerable:!0,configurable:!1}})}function IMAPlugin(){IMAPlugin.__super__.constructor.call(this)}function ControlPlugin(){ControlPlugin.__super__.constructor.call(this)}function ShareCommand(){ShareCommand.__super__.constructor.call(this)}__extends(IMAProxy,AdProxy),IMAProxy.NAME=AdProxy.NAME,IMAProxy.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null,logEventsEnabled:!1},IMAProxy.prototype.partner="ima",IMAProxy.prototype.key="ima",IMAProxy.prototype.intervals=null,IMAProxy.prototype.adDisplayContainer=null,IMAProxy.prototype.adDisplayContainerInitialized=!1,IMAProxy.prototype.adsLoader=null,IMAProxy.prototype.adsRenderingSettings=null,IMAProxy.prototype.adsManagerLoaded=!1,IMAProxy.prototype.adsManager=null,IMAProxy.prototype.cuepoints=null,IMAProxy.prototype.adLoaded=!1,IMAProxy.prototype.playWhenLoaded=!1,IMAProxy.prototype.contentHasEnded=!1,IMAProxy.prototype.adTagUrl=null,IMAProxy.prototype.viewMode=null,IMAProxy.prototype.playbackCore=null,IMAProxy.prototype.loadedmetadata=null,IMAProxy.prototype.setEnabled=function(t){var e;return IMAProxy.__super__.setEnabled.call(this,t),!1===t&&(null!=(e=this.adsManager)&&"function"==typeof e.destroy&&e.destroy(),this.getInProgress()&&this.contentPlay()),t},IMAProxy.prototype.onLoadedMetadata=function(t){this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()},IMAProxy.prototype.initialize=function(){},IMAProxy.prototype.ready=function(){var t,e,i,o;this.viewMode=google.ima.ViewMode.NORMAL,window.addEventListener("resize",this.resize.bind(this)),null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed),null!=this.config.vpaidMode&&null!=(e=google.ima.ImaSdkSettings.VpaidMode[this.config.vpaidMode.toUpperCase()])&&(/CriOS/.test(navigator.userAgent)?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED):google.ima.settings.setVpaidMode(e)),null!=this.config.disableFlashAds&&google.ima.settings.setDisableFlashAds(this.config.disableFlashAds),this.adDisplayContainer=this.createPlugin(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),t=!!(i=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(i[2],10)>52,((null!=(o=Utils.getIOSversion())?o[0]:void 0)>=10||t)&&!1!==this.facade.player.getConfig().playsinline&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)},IMAProxy.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.getContainer())},IMAProxy.prototype.engage=function(t){var e,i;null==t&&(t=!0),!1!==this.getEnabled()&&(IMAProxy.__super__.engage.call(this),(!0===this.adsManagerLoaded&&!1===this.contentHasEnded||!0===this.contentHasEnded&&"postroll"===(null!=(e=this.adVO)?e.type:void 0))&&null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManagerLoaded=!1,this.contentHasEnded=!1,this.adsManagerLoaded=!1,this.playWhenLoaded=!1)},IMAProxy.prototype.setVolume=function(t){var e;return null!=(e=this.adsManager)&&e.setVolume(t),t},IMAProxy.prototype.getVolume=function(){var t;return null!=(t=this.adsManager)?t.getVolume():void 0},IMAProxy.prototype.requestAd=function(){var t,e,i,o,n,a,r,s;IMAProxy.__super__.requestAd.call(this),a=(i=this.getDimensions()).clientWidth,o=i.clientHeight,t=new google.ima.AdsRequest,this.adTagUrl=this.getValue("adTagUrl"),null!=(e=this.getValue("adsResponse"))&&""!==e?t.adsResponse=Utils.read(e,null,Utils.mimeTypes.txt):t.adTagUrl=this.adTagUrl,null!=t.adsResponse||null!=t.adTagUrl?(t.linearAdSlotWidth=a,t.linearAdSlotHeight=o,t.nonLinearAdSlotWidth=(null!=(r=this.value.overlay)?r.width:void 0)||a,t.nonLinearAdSlotHeight=(null!=(s=this.value.overlay)?s.height:void 0)||o,n=this.adsLoader.getSettings(),null!=this.config.ppid&&n.setPpid(this.getValue("ppid")),this.adsLoader.requestAds(t)):this.onAdError("No valid adTagUrl or adsResponse provided.")},IMAProxy.prototype.requestOverlay=function(){var t,e;null!=(e=this.value.overlay)&&((t=new google.ima.AdsRequest).adTagUrl=e.adTagUrl,t.nonLinearAdSlotWidth=e.width||300,t.nonLinearAdSlotHeight=e.height||50,this.adsLoader.requestAds(t))},IMAProxy.prototype.start=function(t){var e;if(null==t&&(t=!0),!0===t?(this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore(),(e=this.getMediaElement()).once("loadedmetadata",this.loadedmetadata),this.playbackCore.setEnabled(!1),this.facade.isFullscreenDevice()?this.playbackCore.load():e.load()):this.engage(),!1===IMAProxy.__super__.start.call(this))return!1;this.isLiveMidroll=!1===t&&"live"===this.facade.player.retrieveProxy(MediaProxy.NAME).getTemporalType(),!0!==this.adDisplayContainerInitialized&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0),!0===this.canPlay()&&!0===t?this.startAd():(this.playWhenLoaded=!0,this.requestAd())},IMAProxy.prototype.canPlay=function(){return!0===this.adsManagerLoaded},IMAProxy.prototype.startAd=function(){this.playWhenLoaded=!1;try{null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(t){this.error(t)}},IMAProxy.prototype.resize=function(t,e){var i;null==e&&(e=this.getDimensions()),null!=this.dimensions&&this.dimensions.width===e.width&&this.dimensions.height===e.height||(this.dimensions=e,null!=t&&(this.viewMode=t===DisplayState.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),null!=(i=this.adsManager)&&i.resize(this.dimensions.width,this.dimensions.height,this.viewMode))},IMAProxy.prototype.onAdsManagerLoaded=function(t){var e,i;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate"),this.adsRenderingSettings.autoAlign=!0,this.adsRenderingSettings.useStyledNonLinearAds=!0,null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManager=t.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings),this.sendNotification(AdNotifications.AD_MANAGER_LOADED,{adManager:this.adsManager,viewMode:google.ima.ViewMode.NORMAL,adContainer:this.getContainer()}),this.adsManagerLoaded=!0,this.cuePoints=this.adsManager.getCuePoints(),this.setCues(this.cuePoints),-1!==this.cuePoints.indexOf(-1)&&this.sendNotification(Notifications.HAS_POST_CONTENT,!0),e=this.onAdEvent.bind(this),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,e),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,e),!0===this.getValue("logEventsEnabled")&&this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,e),this.sendNotification(AdNotifications.REQUEST_COMPLETE,{pods:this.cuePoints}),this.sendNotification(AdNotifications.RESPONSE,{pods:this.cuePoints,response:t,adsManager:this.adsManager}),this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()},IMAProxy.prototype.onAdClick=function(t){!1!==(null!=t?t.getAd().isLinear():void 0)?(this.getPaused()||this.pause(),this.sendNotification(AdNotifications.AD_CLICKED,this.adVO)):this.facade.player.sendNotification(Notifications.PAUSE)},IMAProxy.prototype.onAdPaused=function(t){this.setPaused(!0),this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED),this.facade.player.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE),this.facade.player.sendNotification(AdNotifications.AD_PAUSED,this.adVO)},IMAProxy.prototype.onAdResumed=function(t){this.setPaused(!1),this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)},IMAProxy.prototype.onAdEvent=function(t){var e,i,o,n,a,r,s,l,c;switch(e=t.getAd(),null!=this.adVO&&(null!=e&&(e.wrapperAdIds="function"==typeof e.getWrapperAdIds?e.getWrapperAdIds():void 0,e.wrapperAdSystems="function"==typeof e.getWrapperAdSystems?e.getWrapperAdSystems():void 0),this.adVO.metadata=e),t.type){case google.ima.AdEvent.Type.IMPRESSION:this.sendNotification(AdNotifications.IMPRESSION,this.adVO);break;case google.ima.AdEvent.Type.LOADED:e.isLinear()?("VPAID"===e.getApiFramework()&&this.facade.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"vpaid"),this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-overlaymode"),r=0===(a=e.getAdPodInfo().getPodIndex())?"preroll":-1===a?"postroll":"midroll",this.adVO=new AdVO(e.getAdId(),e.getAdId(),e.getDuration(),a,r,"ima",null,null,this.adTagUrl,e,e.getAdPodInfo().getTotalAds()),(!this.getInProgress()&&"midroll"===r||"postroll"===r)&&(this.startBreak(),this.engageAds()),this.resize(),this.sendNotification(AdNotifications.AD_LOADED,this.adVO),this.sendNotification(AdNotifications.AD_DURATION_CHANGE,this.adVO),this.setVolume(this.facade.player.retrieveProxy(ApplicationStateProxy.NAME).getVolume())):(this.facade.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:e.isLinear()&&(this.adVO.position=e.getAdPodInfo().getAdPosition(),this.sendNotification(AdNotifications.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),67)),this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING),this.sendNotification(AdNotifications.AD_PLAY,this.adVO));try{for(o=[],n=("function"==typeof this.getConfigurationData&&null!=(c=this.getConfigurationData())?c.companions:void 0)||[],s=0,l=n.length;s<l;s++)i=n[s],o=o.concat(e.getCompanionAds(i.width,i.height));(null!=o?o.length:void 0)>0&&this.setCompanions(o)}catch(t){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",t)}break;case google.ima.AdEvent.Type.COMPLETE:e.isLinear()&&this.sendNotification(AdNotifications.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(AdNotifications.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(AdNotifications.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(AdNotifications.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(AdNotifications.LOG,this.adVO);break;case google.ima.AdEvent.Type.SKIPPED:this.sendNotification(AdNotifications.SKIPPED,this.adVO);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:!0===this.getInProgress()&&this.endBreak()}},IMAProxy.prototype.getContainer=function(){var t,e;return(null!=(t=this.facade.player.ui)&&null!=(e=t.ads)?e.container:void 0)||this.facade.player.container},IMAProxy.prototype.getDimensions=function(){var t;return{width:(t=this.getContainer()).clientWidth,height:t.clientHeight}},IMAProxy.prototype.onAdTimeUpdate=function(t){var e,i;this.resize(),e=Utils.clamp(this.adsManager.getRemainingTime(),0,this.adVO.duration),i=this.adVO.duration-e,this.sendNotification(AdNotifications.AD_TIME_UPDATE,i),this.sendNotification(AdNotifications.AD_TIME_REMAINING,e)},IMAProxy.prototype.onAdError=function(t){var e;e=(null!=t&&"function"==typeof t.getError?t.getError():void 0)||t,this.error(e),this.contentPlay()},IMAProxy.prototype.play=function(){var t;IMAProxy.__super__.play.call(this);try{null!=(t=this.adsManager)&&t.resume(),this.sendNotification(AdNotifications.AD_RESUME)}catch(t){this.facade.logger.error("[AMP IMA ERROR]","resume",t)}},IMAProxy.prototype.pause=function(){if(IMAProxy.__super__.pause.call(this),null!=this.adsManager)try{this.adsManager.pause()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","pause",t)}else this.playWhenLoaded=!1},IMAProxy.prototype.clearIntervals=function(){var t,e,i;for(t=0,e=(i=this.intervals).length;t<e;t++)i[t],clearInterval(this.intervals.pop())},IMAProxy.prototype.breakEnd=function(){var t;this.clearIntervals(),IMAProxy.__super__.breakEnd.call(this),null!=(t=this.facade.retrieveProxy(IMAOverlayProxy.NAME))&&t.play()},IMAProxy.prototype.setCompanions=function(t){var e,i,o,n,a;for(i=[],o=0,n=t.length;o<n;o++)e=t[o],i.push({data:e.getContent(),type:null!=(a=e.getContentType())?a.toLowerCase():void 0,width:e.getWidth(),height:e.getHeight(),metadata:e});return IMAProxy.__super__.setCompanions.call(this,i),t},IMAProxy.prototype.contentPause=function(){var t,e=this;t=["pause","waiting","playing","ended","durationchange","error"],!1===this.facade.player.retrieveProxy(ApplicationStateProxy.NAME).getSeeking()?t.push("seeked"):this.getMediaElement().once("seeked",function(){e.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,["seeked"])}),this.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,t),!0!==this.isLiveMidroll?IMAProxy.__super__.contentPause.call(this):this.getMediaElement().volume=0},IMAProxy.prototype.contentPlay=function(){var t,e;if(!0===this.getInProgress()&&this.endBreak(),this.sendNotification(Notifications.ENABLE_VIDEO_EVENTS,["pause","seeked","waiting","playing","ended","durationchange","error"]),"postroll"!==(null!=(t=this.adVO)?t.type:void 0)){if(!0===this.isLiveMidroll){if(this.getMediaElement().volume=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME).getVolume(),"ipad"!==Utils.getDevice())return;this.getMediaElement().load()}IMAProxy.__super__.contentPlay.call(this),"midroll"===(null!=(e=this.adVO)?e.type:void 0)&&"desktop"===Utils.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))}},IMAProxy.prototype.contentEnded=function(){var t;this.contentHasEnded=!0;try{null!=(t=this.adsLoader)&&"function"==typeof t.contentComplete&&t.contentComplete()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",t)}},IMAProxy.prototype.terminateAd=function(){var t;try{null!=(t=this.adsManager)&&t.stop()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",t)}"postrol"===this.adVO.type&&this.sendNotification(Notifications.HAS_POST_CONTENT,!1),this.endBreak(),this.contentPlay()},IMAProxy.prototype.terminateAllAds=function(){var t;try{null!=(t=this.adsManager)&&t.destroy()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",t)}this.sendNotification(Notifications.HAS_POST_CONTENT,!1),this.endBreak(),this.contentPlay()},IMAProxy.prototype.destroy=function(){var t;this.clearIntervals(),null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy()},__extends(IMAAddOverlayCommand,puremvc.SimpleCommand),IMAAddOverlayCommand.prototype.execute=function(t){this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-overlay-mode")},__extends(IMARemoveOverlayCommand,puremvc.SimpleCommand),IMARemoveOverlayCommand.prototype.execute=function(t){this.facade.retrieveProxy(IMAOverlayProxy.NAME).stop(),this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-overlay-mode")},__extends(IMAOverlayMediator,OverlayMediator),IMAOverlayMediator.prototype.componentName="ad-overlay",IMAOverlayMediator.prototype.anchor=null,IMAOverlayMediator.prototype.image=null,IMAOverlayMediator.prototype.tracker=null,IMAOverlayMediator.prototype.tracker2=null,IMAOverlayMediator.prototype.closeButton=null,IMAOverlayMediator.prototype.closeText=null,IMAOverlayMediator.prototype.onRegister=function(){var t=this;IMAOverlayMediator.__super__.onRegister.call(this),this.anchor=this.create("ad-overlay-anchor"),this.anchor.target="_blank",this.image=this.create("ad-overlay-img",this.anchor,"img"),this.tracker=this.create(),this.tracker.width=0,this.tracker.height=0,this.tracker2=this.create(null,this,"img"),this.tracker2.width=0,this.tracker2.height=0,this.closeButton=this.create("ad-close-button",this.anchor),this.closeButton.onclick=function(e){return e.stopImmediatePropagation(),t.sendNotification(IMANotifications.REMOVE_OVERLAY),!1},this.closeText=this.createText("ad-close-text","x",this.closeButton)},IMAOverlayMediator.prototype.listNotificationInterests=function(){return[IMANotifications.ADD_OVERLAY,IMANotifications.REMOVE_OVERLAY]},IMAOverlayMediator.prototype.handleNotification=function(t){var e;switch(t.getName()){case IMANotifications.ADD_OVERLAY:e=t.getBody(),this.image.src=e.src,this.anchor.href=e.href,this.tracker.src=e.tracking[0],this.tracker2.src=e.tracking[1]}},__extends(IMAReadyCommand,puremvc.SimpleCommand),IMAReadyCommand.prototype.execute=function(t){this.facade.retrieveProxy(IMAProxy.NAME).ready()},__extends(IMADisplayStateChangeCommand,puremvc.SimpleCommand),IMADisplayStateChangeCommand.prototype.execute=function(t){this.facade.retrieveProxy(IMAProxy.NAME).resize(t.getBody())},__extends(IMAActiveStateChangeCommand,puremvc.SimpleCommand),IMAActiveStateChangeCommand.prototype.execute=function(t){this.facade.retrieveProxy(IMAProxy.NAME).resize(t.getBody())},__extends(IMAFullscreenProxy,IMAProxy),IMAFullscreenProxy.NAME=IMAProxy.NAME,IMAFullscreenProxy.prototype.createPlugin=function(){var t,e,i;return t=this.facade.player.ui.ads.container,Utils.isIPhone()&&(null!=(e=Utils.getIOSversion())?e[0]:void 0)<10?new google.ima.AdDisplayContainer(t,this.facade.player.getMediaElement(),t):((null!=(i=Utils.getIOSversion())?i[0]:void 0)>=10&&(this.facade.player.getMediaElement().playsInline=null==this.facade.player.getConfig().playsinline||this.facade.player.getConfig().playsinline),new google.ima.AdDisplayContainer(t,this.facade.player.getMediaElement()))},IMAFullscreenProxy.prototype.engage=function(t){IMAFullscreenProxy.__super__.engage.call(this,t),this.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},IMAFullscreenProxy.prototype.reset=function(t){IMAFullscreenProxy.__super__.reset.call(this,t),this.sendNotification(Notifications.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},IMAFullscreenProxy.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore(),this.playbackCore.setEnabled(!1),this.setInProgress(!0)},IMAFullscreenProxy.prototype.breakEnd=function(){IMAFullscreenProxy.__super__.breakEnd.call(this),this.playbackCore.setEnabled(!0)},__extends(AdWrapper,PluginWrapper),AdWrapper.NAME="AdWrapper",AdWrapper.prototype.enabled=!0,AdWrapper.prototype.paused=!1,AdWrapper.prototype.started=!1,AdWrapper.prototype.adVO=null,AdWrapper.prototype.partner=null,AdWrapper.prototype.getFeatureName=function(){return"ads"},AdWrapper.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")},AdWrapper.prototype.getStarted=function(){return this.started},AdWrapper.prototype.getPaused=function(){return this.paused},AdWrapper.prototype.getCompanions=function(){var t;return null!=(t=this.adVO)?t.companions:void 0},AdWrapper.prototype.setEnabled=function(t){return this.enabled=t,this.player.mediaElement.setPlayerProperty("adsEnabled",t),t},AdWrapper.prototype.getEnabled=function(){return this.enabled},AdWrapper.prototype.getCurrentAd=function(){return this.adVO},AdWrapper.prototype.enable=function(){this.setEnabled(!0)},AdWrapper.prototype.disable=function(){this.setEnabled(!1)},AdWrapper.prototype.createFlashVars=function(t){return t.core_ads_enabled=!0,t},AdWrapper.prototype.listNotificationInterests=function(){var t,e;return AdWrapper.__super__.listNotificationInterests.call(this).concat(function(){var i;for(t in i=[],FlashAdNotifications)e=FlashAdNotifications[t],i.push(e);return i}())},AdWrapper.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h;switch(AdWrapper.__super__.handleNotification.call(this,t),a=t.getName(),e=t.getBody(),this.adVO=this.createAdVO(e),c=this,a){case FlashAdNotifications.BREAK_START:d=AdNotifications.BREAK_START,this.facade.setPlayState("playing"),(null!=(h=e.cuePoints)?h.length:void 0)>0&&(i=e.cuePoints.map(function(t){return{startTime:isNaN(t.sceneStartSeconds)?t.sceneEndSeconds:t.sceneStartSeconds,endTime:t.sceneEndSeconds}}),this.facade.setCues(i));break;case FlashAdNotifications.BREAK_END:d=AdNotifications.BREAK_END;break;case FlashAdNotifications.BREAK_SKIPPED:d=AdNotifications.BREAK_SKIPPED;break;case FlashAdNotifications.AD_MEDIA_LOADED:d=AdNotifications.AD_LOADED,this.start=!1,c.dispatchEvent(new Event(AdNotifications.AD_DURATION_CHANGE.replace(/^ads/,""),this.adVO));break;case FlashAdNotifications.AD_STARTED:d=AdNotifications.AD_STARTED,this.started=!0,this.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.AD_TIME_UPDATE:d=AdNotifications.AD_TIME_UPDATE,s=e.duration-e.currentTime,c.dispatchEvent(new Event(AdNotifications.AD_TIME_REMAINING.replace(/^ads/,""),s)),e=e.currentTime;break;case FlashAdNotifications.AD_TIME_REMAINING:d=AdNotifications.AD_TIME_REMAINING,e=e.timeElapsed;break;case FlashAdNotifications.AD_ERROR:case FlashAdNotifications.AD_PLAYBACK_FAILED:d=AdNotifications.AD_ERROR,this.start=!1,this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.COMPLETE:d=AdNotifications.COMPLETE;break;case FlashAdNotifications.AD_ENDED:case FlashAdNotifications.AD_PLAYBACK_TERMINATED:d=AdNotifications.AD_ENDED,this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.AD_CLICKED:d=AdNotifications.AD_CLICKED;break;case FlashAdNotifications.AD_COMPANION:d=AdNotifications.AD_COMPANION,null!=this.adVO&&null!=e&&(this.adVO.companions=e);break;case FlashAdNotifications.AD_PAUSE:d=AdNotifications.AD_PAUSE,c=this.player,this.paused=!0,this.player.setPlayState("paused");break;case FlashAdNotifications.AD_PLAY:d=AdNotifications.AD_PLAY,this.paused=!1,this.player.setPlayState("playing");break;case FlashAdNotifications.AD_LOG:d=AdNotifications.AD_LOG;break;case FlashAdNotifications.AD_FIRST_QUARTILE:d=AdNotifications.FIRST_QUARTILE;break;case FlashAdNotifications.AD_MIDPOINT:d=AdNotifications.MIDPOINT;break;case FlashAdNotifications.AD_THIRD_QUARTILE:d=AdNotifications.THIRD_QUARTILE;break;case FlashAdNotifications.AD_REQUEST:d=AdNotifications.REQUEST;break;case FlashAdNotifications.AD_REQUEST_COMPLETE:for(d=AdNotifications.REQUEST_COMPLETE,r=[],u=0,p=(o=e.cuePoints||[]).length;u<p;u++)l=o[u],r.push(new AdVO(l.sceneId,l.sceneTitle,l.sceneDuration,l.scenePodIndex,l.scenePodPosition,this.partner,null,null,null,{},l.sceneSubCount,l.sceneEndSeconds));this.adVO={pods:r},(n=new Event("response",this.adVO)).player=this.player,c.dispatchEvent(n);break;case FlashAdNotifications.AD_SKIPPED:d=AdNotifications.SKIPPED;break;case FlashAdNotifications.AD_IMPRESSION:d=AdNotifications.IMPRESSION}null!=d&&(this.sendNotification(d,this.adVO),(n=d===AdNotifications.AD_TIME_REMAINING||d===AdNotifications.AD_TIME_UPDATE?new Event(d.replace(/^ads/,""),e):new Event(d.replace(/^ads/,""),this.adVO)).player=this.player,c.dispatchEvent(n))},AdWrapper.prototype.createAdVO=function(t){return null==t?null:new AdVO(t.id,t.title,t.duration,t.adIndex,t.podPosition,t.adPlatform,null,null,t.requestURL,t.metadata,t.totalAds,t.currentTime)},AdWrapper.prototype.setPodLocks=function(t){var e,i,o,n;for(i=[],o=0,n=t.length;o<n;o++)e=t[o],i.push({sceneId:e.id,sceneLocked:e.locked,sceneTitle:e.title,sceneStartSeconds:e.time,sceneEndSeconds:e.duration+e.time,scenePodIndex:e.position,scenePodPosition:e.type});this.player.mediaElement.setAdPodLocks(i)},AdWrapper.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()},AdWrapper.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()},AdWrapper.prototype.requestAd=function(){this.player.mediaElement.triggerAd()},__extends(IMAWrapper,AdWrapper),IMAWrapper.NAME="IMAWrapper",IMAWrapper.prototype.partner="ima",IMAWrapper.prototype.flashPlugins=[{id:"GoogleIMAPlugin",src:"#{paths.resources}plugins/GoogleIMAPlugin.swf",blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"},{id:"IMAOverlayAdPlugin",src:"#{paths.resources}plugins/IMAOverlayAdPlugin.swf",blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"}],IMAWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g;for(i=t.firstChild,null==(e=t.getElementsByTagName("admedia")[0])&&(e=t.createElement("admedia"),i.appendChild(e)),(c=t.createElement("vendor")).setAttribute("id","dfp"),e.appendChild(c),d=0,h=(l=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}]).length;d<h;d++)null!=(s=l[d]).value&&this.createProperty(t,s.key,s.value,c);if(null!=this.config.position&&c.setAttribute("position",this.config.position),null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(t,"DFP_AD_TAG_PARAMS",this.config.params.adTag,c),null!=this.config.params.manual&&this.createProperty(t,"DFP_MANUAL_PARAMS",this.config.params.manual,c)),null!=this.config.companions){for(n=[],a=[],u=0,y=(g=this.config.companions).length;u<y;u++)o=g[u],n.push(o.width+"x"+o.height),a.push(o.id);this.createProperty(t,"DFP_SIZE",n.join(","),c),this.createProperty(t,"COMPANION_ID",a.join(","),c)}if(null!=this.config.disableCompanionAds&&this.createProperty(t,"disableCompanionAds",this.config.disableCompanionAds,c),null!=this.config.overlay)for(!0===this.config.overlay.enabled&&(r=t.createElement("overlay"),e.appendChild(r)),p=0,m=(l=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}]).length;p<m;p++)null!=(s=l[p]).value&&this.createProperty(t,s.key,s.value,r);return t},__extends(AdPlugin,Feature),AdPlugin.NAME="AdPlugin",AdPlugin.prototype.container=null,AdPlugin.prototype.featureName="ads",AdPlugin.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)},AdPlugin.prototype.createController=function(){AdPlugin.__super__.createController.call(this),this.registerCommand(Notifications.MEDIA_CHANGE,AdMediaChangeCommand),this.registerCommand(AdNotifications.BREAK_START,AdBreakStartCommand),this.registerCommand(AdNotifications.AD_LOADED,AdLoadedCommand),this.registerCommand(AdNotifications.BREAK_END,AdBreakEndCommand),this.registerCommand(UserNotifications.SEEKED,AdSeekCommand),this.registerCommand(AdNotifications.AD_CONTAINER_CREATED,AdContainerCreatedCommand),this.registerCommand(Notifications.REPLAY,AdReplayCommand),this.registerCommand(AdNotifications.AD_STARTED,PluginEventCommand),this.registerCommand(AdNotifications.SKIPPED,PluginEventCommand),this.registerCommand(AdNotifications.AD_MANAGER_LOADED,PluginEventCommand),this.registerCommand(AdNotifications.AD_TIME_UPDATE,PluginEventCommand),this.registerCommand(AdNotifications.AD_TIME_REMAINING,PluginEventCommand),this.registerCommand(AdNotifications.AD_DURATION_CHANGE,PluginEventCommand),this.registerCommand(AdNotifications.AD_ENDED,PluginEventCommand),this.registerCommand(AdNotifications.AD_ERROR,PluginEventCommand),this.registerCommand(AdNotifications.AD_COMPANION,PluginEventCommand),this.registerCommand(AdNotifications.FIRST_QUARTILE,PluginEventCommand),this.registerCommand(AdNotifications.MIDPOINT,PluginEventCommand),this.registerCommand(AdNotifications.THIRD_QUARTILE,PluginEventCommand),this.registerCommand(AdNotifications.COMPLETE,PluginEventCommand),this.registerCommand(AdNotifications.LOG,PluginEventCommand),this.registerCommand(AdNotifications.REQUEST,PluginEventCommand),this.registerCommand(AdNotifications.AD_RESUME,PluginEventCommand),this.registerCommand(AdNotifications.AD_PLAY,PluginEventCommand),this.registerCommand(AdNotifications.AD_PAUSE,PluginEventCommand),this.registerCommand(AdNotifications.AD_PAUSED,PluginEventCommand),this.registerCommand(AdNotifications.IMPRESSION,PluginEventCommand),this.registerCommand(AdNotifications.AD_CLICKED,PluginEventCommand),this.registerCommand(AdNotifications.REQUEST_COMPLETE,PluginEventCommand),this.registerCommand(AdNotifications.RESPONSE,PluginEventCommand),this.registerCommand(AdNotifications.BREAK_SKIPPED,PluginEventCommand)},AdPlugin.prototype.isFullscreenDevice=function(){return Utils.isFullscreenDevice()},AdPlugin.prototype.createProxy=function(){},AdPlugin.prototype.createFullscreenProxy=function(){},AdPlugin.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE,Notifications.REPLAY,Notifications.PLAY,Notifications.PAUSE,Notifications.PAUSED,Notifications.START,Notifications.STARTED,Notifications.ENDED,Notifications.READY,Notifications.VOLUME_CHANGE,Notifications.FULL_SCREEN_CHANGE,Notifications.CHANGE_ACTIVE_STATE,Notifications.PLAY_STATE_CHANGE,UserNotifications.PLAY,UserNotifications.PAUSE,UserNotifications.SEEKED,UserNotifications.TOGGLE_PLAY_PAUSE]},AdPlugin.prototype.listNotificationPublications=function(){var t,e;return AdPlugin.__super__.listNotificationPublications.call(this).concat(function(){var i;for(t in i=[],AdNotifications)e=AdNotifications[t],i.push(e);return i}()).concat([Notifications.PLAY_REQUEST,Notifications.UPDATE_DATA_BINDINGS,Notifications.DISPLAY_TIME,Notifications.DISABLE_FULL_SCREEN,Notifications.ENABLE_VIDEO_EVENTS,Notifications.DISABLE_VIDEO_EVENTS,Notifications.HAS_POST_CONTENT,Notifications.MEDIA_SEQUENCE_ENDED,Notifications.CHANGE_PLAY_STATE,Notifications.AUTOPLAY_BLOCKED])},AdPlugin.prototype.setEnabled=function(t){this.proxy.setEnabled(t)},AdPlugin.prototype.getEnabled=function(){return this.proxy.getEnabled()},AdPlugin.prototype.getInProgress=function(){return this.proxy.getInProgress()},AdPlugin.prototype.getStarted=function(){return this.proxy.getStarted()},AdPlugin.prototype.getPaused=function(){return this.proxy.getPaused()},AdPlugin.prototype.getCompanions=function(){return this.proxy.getCompanions()},AdPlugin.prototype.getCurrentAd=function(){return this.proxy.adVO},AdPlugin.prototype.setPodLocks=function(t){this.proxy.setPodLocks(t)},AdPlugin.prototype.resize=function(t){this.proxy.resize(t)},AdPlugin.prototype.terminateAd=function(){this.proxy.terminateAd()},AdPlugin.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()},AdPlugin.prototype.requestAd=function(){this.proxy.start(!1)},__extends(IMAPlugin,AdPlugin),IMAPlugin.prototype.moduleName="ima",IMAPlugin.prototype.createFullscreenProxy=function(){return new IMAFullscreenProxy(this.config)},IMAPlugin.prototype.createProxy=function(){return new IMAProxy(this.config)},IMAPlugin.prototype.isFullscreenDevice=function(){var t;return t=navigator.userAgent,!0===this.config.fullscreen||Utils.isFullscreenDevice()||/Android 4\.[0-1]/.test(t)||/CrKey/.test(t)},IMAPlugin.prototype.createModel=function(){IMAPlugin.__super__.createModel.call(this),null!=this.config.overlay&&this.registerProxy(new IMAOverlayProxy(this.config.overlay))},IMAPlugin.prototype.createController=function(){IMAPlugin.__super__.createController.call(this),null!=this.config.overlay&&(this.registerCommand(IMANotifications.ADD_OVERLAY,IMAAddOverlayCommand),this.registerCommand(IMANotifications.REMOVE_OVERLAY,IMARemoveOverlayCommand)),this.registerCommand(Notifications.READY,IMAReadyCommand),this.registerCommand(Notifications.FULL_SCREEN_CHANGE,IMADisplayStateChangeCommand),this.registerCommand(Notifications.CHANGE_ACTIVE_STATE,IMAActiveStateChangeCommand)},IMAPlugin.prototype.createView=function(){IMAPlugin.__super__.createView.call(this),null!=this.config.overlay&&this.registerMediator(new IMAOverlayMediator)},AMP.registerPlugin("ima","html",IMAPlugin),AMP.registerPlugin("ima","flash",IMAWrapper),__extends(ControlPlugin,Plugin),ControlPlugin.prototype.listNotificationPublications=function(){return ControlPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE])},__extends(ShareCommand,puremvc.SimpleCommand),ShareCommand.prototype.execute=function(t){var e,i;e={link:(i=this.facade.player.retrieveProxy(MediaProxy.NAME)).getLink(),embed:i.getEmbed(),provider:t.getBody()},this.sendNotification(Notifications.DISPATCH_EVENT,new Event("share",e))};var ShareNotifications={SHARE:"share"};function SharePanelMediator(){SharePanelMediator.__super__.constructor.call(this)}function ControlProxy(t){ControlProxy.__super__.constructor.call(this,t)}function ShareWrapper(t,e){null==e&&(e={}),ShareWrapper.__super__.constructor.call(this,t,e)}function SharePanelWrapper(t,e){null==e&&(e={}),SharePanelWrapper.__super__.constructor.call(this,t,e)}function ControlPanelProxy(t){ControlPanelProxy.__super__.constructor.call(this,t)}function SharePanelProxy(t){SharePanelProxy.__super__.constructor.call(this,t)}__extends(SharePanelMediator,ControlPanelMediator),SharePanelMediator.prototype.componentName="share",SharePanelMediator.prototype.labels={facebook:"MSG_SHARE_FACEBOOK",twitter:"MSG_SHARE_TWITTER",embed:"MSG_SHARE_EMBED",email:"MSG_SHARE_EMAIL"},SharePanelMediator.prototype.panelButtonClickHandler=function(t,e){this.sendNotification(ShareNotifications.SHARE,t),SharePanelMediator.__super__.panelButtonClickHandler.call(this)},SharePanelMediator.prototype.listNotificationInterests=function(){return SharePanelMediator.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIA_CHANGE])},SharePanelMediator.prototype.handleNotification=function(t){var e,i;switch(SharePanelMediator.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case Notifications.MEDIA_CHANGE:null!=e.embed?this.sendNotification(Notifications.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"share-enabled")}},__extends(ControlProxy,PluginProxy),ControlProxy.NAME=ModuleProxy.NAME,ControlProxy.prototype.loaded=!0,ControlProxy.prototype.controlName=null,ControlProxy.prototype.getControlName=function(){return this.controlName},ControlProxy.prototype.setControlName=function(t){return this.controlName=t},__extends(ShareWrapper,PluginWrapper),ShareWrapper.NAME="ShareWrapper",ShareWrapper.prototype.controls=["share","facebook","twitter"],ShareWrapper.prototype.flashView={elements:{controls:{elements:{shareBtn:{}}}}},ShareWrapper.prototype.getFeatureName=function(){return"share"},ShareWrapper.prototype.createFlashVars=function(t){return null==t.share_mode&&(t.share_mode=2),t},ShareWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c;if(null!=(e=null!=(a=this.player.config)&&null!=(r=a.flash)&&null!=(s=r.view)&&null!=(l=s.elements)?l.controls:void 0)){for(null==e.elements&&(e.elements={}),o=0,n=(c=this.controls).length;o<n;o++)i=c[o],!0===this.config[i]&&null==e.elements[i+"Btn"]&&(e.elements[i+"Btn"]={});return t}},ShareWrapper.prototype.listNotificationInterests=function(){return ShareWrapper.__super__.listNotificationInterests.call(this).concat([FlashNotifications.SHARE,FlashNotifications.SHARE_REQUEST])},ShareWrapper.prototype.handleNotification=function(t){var e,i,o;switch(ShareWrapper.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case FlashNotifications.SHARE:case FlashNotifications.SHARE_REQUEST:o="share"}null!=o&&this.dispatchEvent(new Event(o,e))},AMP.registerPlugin("share","flash",ShareWrapper),__extends(SharePanelWrapper,ShareWrapper),SharePanelWrapper.NAME="SharePanelWrapper",SharePanelWrapper.prototype.controls=["share"],AMP.registerPlugin("sharepanel","flash",SharePanelWrapper),__extends(ControlPanelProxy,ControlProxy),ControlPanelProxy.NAME=ModuleProxy.NAME,ControlPanelProxy.prototype.hidden=!0,ControlPanelProxy.prototype.getHidden=function(){return this.hidden},ControlPanelProxy.prototype.setHidden=function(t){return this.hidden=t,t},__extends(SharePanelProxy,ControlPanelProxy),SharePanelProxy.NAME=ModuleProxy.NAME,SharePanelProxy.prototype.defaults={facebook:!1,twitter:!1,embed:!1,email:!1},SharePanelProxy.prototype.controlName="share";var SettingsPanelNotifications={TOGGLE_AUTO_PLAY:"toggleautoplay"};function ControlPanelPlugin(){ControlPanelPlugin.__super__.constructor.call(this)}function SettingsPanelProxy(t){SettingsPanelProxy.__super__.constructor.call(this,t)}function ToggleAutoplayCommand(){ToggleAutoplayCommand.__super__.constructor.call(this)}function SettingsPanelMediator(){SettingsPanelMediator.__super__.constructor.call(this)}__extends(ControlPanelPlugin,ControlPlugin),ControlPanelPlugin.prototype.listNotificationPublications=function(){var t,e;return ControlPanelPlugin.__super__.listNotificationPublications.call(this).concat(function(){var i;for(t in i=[],PanelNotifications)e=PanelNotifications[t],i.push(e);return i}())},__extends(SettingsPanelProxy,ControlPanelProxy),SettingsPanelProxy.NAME=ModuleProxy.NAME,SettingsPanelProxy.prototype.defaults={autoplay:!1,cc:!1},SettingsPanelProxy.prototype.controlName="settings",__extends(ToggleAutoplayCommand,PluginCommand),ToggleAutoplayCommand.prototype.execute=function(t){var e,i;i=!(e=this.facade.player.retrieveProxy(ConfigurationProxy.NAME)).getAutoplay(),e.setAutoplay(i),this.sendNotification(UserSettingsNotifications.UPDATE_SETTINGS,{autoplay:i})},__extends(SettingsPanelMediator,ControlPanelMediator),SettingsPanelMediator.prototype.componentName="settings",SettingsPanelMediator.prototype.labels={autoplay:"MSG_SETTINGS_AUTOPLAY_OFF",cc:"MSG_SETTINGS_CC_OFF"},SettingsPanelMediator.prototype.listNotificationInterests=function(){return SettingsPanelMediator.__super__.listNotificationInterests.apply(this,arguments).concat([CaptioningNotifications.VISIBILITY_CHANGE,UserSettingsNotifications.SETTINGS_CHANGE,Notifications.READY])},SettingsPanelMediator.prototype.panelButtonClickHandler=function(t,e){switch(t){case"autoplay":this.sendNotification(SettingsPanelNotifications.TOGGLE_AUTO_PLAY);break;case"cc":this.sendNotification(CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY),SettingsPanelMediator.__super__.panelButtonClickHandler.call(this)}},SettingsPanelMediator.prototype.handleNotification=function(t){var e,i,o;switch(SettingsPanelMediator.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case Notifications.READY:this.setControlLabel("autoplay","MSG_SETTINGS_AUTOPLAY",this.config.getAutoplay()),this.setControlLabel("cc","MSG_SETTINGS_CC",!1===(null!=(o=this.facade.player.captioning)?o.getHidden():void 0));break;case CaptioningNotifications.VISIBILITY_CHANGE:this.setControlLabel("cc","MSG_SETTINGS_CC",e);break;case UserSettingsNotifications.SETTINGS_CHANGE:null!=e.autoplay&&this.setControlLabel("autoplay","MSG_SETTINGS_AUTOPLAY",e.autoplay)}},SettingsPanelMediator.prototype.setControlLabel=function(t,e,i){e+=!0===i?"_ON":"_OFF",this.controls[t].label.textContent=this.localizationManager.getString(e)};var AISNotifications={START_AUTHENTICATION:"aisauthenticationstarted",AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisauthenticating",AUTHENTICATION_COMPLETE:"aisauthenticationcomplete",CHOOSE_AUTH_PROVIDER:"aischooseprovider",CHOOSE_PLAY_OPTIONS:"aischooseplayoptions",LAUNCH_IDP_LOGIN:"aislaunchidplogin",PREVIEW:"aispreview",PREVIEW_TIME_REMAINING:"aispreviewtimeremaining"};function AISLaunchIDPLoginCommand(){AISLaunchIDPLoginCommand.__super__.constructor.call(this)}function AISChooserMediator(t){AISChooserMediator.__super__.constructor.call(this,null,null,t)}function AISPlayMediator(t){AISPlayMediator.__super__.constructor.call(this,null,null,t)}function AISAuthorizeCommand(){AISAuthorizeCommand.__super__.constructor.call(this)}function AISAuthenticationFailedCommand(){AISAuthenticationFailedCommand.__super__.constructor.call(this)}function AISAuthorizationFailedCommand(){AISAuthorizationFailedCommand.__super__.constructor.call(this)}function AISAuthorizationExpiredCommand(){AISAuthorizationExpiredCommand.__super__.constructor.call(this)}function AISChangePlayStateCommand(){AISChangePlayStateCommand.__super__.constructor.call(this)}function AISAuthenticatingMediator(t){AISAuthenticatingMediator.__super__.constructor.call(this,null,null,t)}function AISPreviewMediator(t){AISPreviewMediator.__super__.constructor.call(this,null,null,t)}function AISStartAuthenticationCommand(){AISStartAuthenticationCommand.__super__.constructor.call(this)}function AISMediator(){AISMediator.__super__.constructor.call(this)}function AISPlugin(){AISPlugin.__super__.constructor.call(this)}function AISFlashPlugin(){AISFlashPlugin.__super__.constructor.call(this)}function AISTimeUpdateCommand(){AISTimeUpdateCommand.__super__.constructor.call(this)}function AISWrapper(t,e){var i,o,n;for(o in AISWrapper.__super__.constructor.call(this,t,e),this.plugin=new AISFlashPlugin,i=this.dispatcher.dispatchEvent.bind(this.dispatcher),AISNotifications)n=AISNotifications[o],this.plugin.addEventListener(n.replace(/^(ais)/,""),i);for(o in SecurityNotifications)n=SecurityNotifications[o],this.plugin.addEventListener(n.replace(/^(auth)/,""),i);this.plugin.oninitialized=this.player.registerModule.bind(this.player,this.plugin),this.plugin.initialize(e,this.player)}function AISEndedCommand(){AISEndedCommand.__super__.constructor.call(this)}function SharePanelPlugin(){SharePanelPlugin.__super__.constructor.call(this)}function ChromeCastPlayer(t){var e,i,o;this.shim=t,ChromeCastPlayer.__super__.constructor.call(this),this.state=cast.receiver.media.PlayerState.IDLE;try{(o=document.createElement("style")).type="text/css",o.appendChild(document.createTextNode("")),document.head.appendChild(o),i=o.sheet,".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}",e=i.insertRule(".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}",0),this.cssRule=i.rules[e]}catch(t){Logger.error(t)}}__extends(AISLaunchIDPLoginCommand,PluginEventCommand),AISLaunchIDPLoginCommand.prototype.execute=function(t){AISLaunchIDPLoginCommand.__super__.execute.call(this,t),this.proxy.launchIDPLogin(t.getBody())},__extends(AISChooserMediator,ComponentMediator),AISChooserMediator.prototype.componentName="ais-chooser",AISChooserMediator.prototype.menu=null,AISChooserMediator.prototype.label=null,AISChooserMediator.prototype.grid=null,AISChooserMediator.prototype.select=null,AISChooserMediator.prototype.login=null,AISChooserMediator.prototype.title=null,AISChooserMediator.prototype.onRegister=function(){var t=this;AISChooserMediator.__super__.onRegister.call(this),this.classList.add("hidden"),this.title=this.createText("ais-chooser-title","Choose your provider"),this.grid=this.create("ais-chooser-grid"),this.menu=this.create("ais-chooser-menu"),this.label=this.createText("ais-chooser-label","Providers: ",this.menu),this.select=this.create("ais-chooser-select",this.menu,"select"),this.login=this.create("ais-chooser-login",!1,"input"),this.login.type="button",this.login.value="Login",EventHandler.create(this.login,EventHandler.CLICK,function(e){var i;return"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation(),i=t.select.options[t.select.selectedIndex].value,t.sendNotification(AISNotifications.LAUNCH_IDP_LOGIN,i),!1}),this.menu.appendChild(this.login)},AISChooserMediator.prototype.listNotificationInterests=function(){return[AISNotifications.CHOOSE_AUTH_PROVIDER,AISNotifications.AUTHENTICATING]},AISChooserMediator.prototype.handleNotification=function(t){var e,i,o,n,a,r,s,l,c,d,u,p,h,y,m,g,f,C,P,_,A,E,N,v,M,S,T,x=this;switch(t.getName()){case AISNotifications.CHOOSE_AUTH_PROVIDER:if(l=(m=t.getBody()).possible_idps,n=m.footprints||[],r=m.grouped_idps||[],e=null!=(p=this.facade.retrieveProxy(ModuleProxy.NAME).value.logos)?p.base:void 0,this.grid.innerHTML="",null!=r&&null!=(null!=p?p.group:void 0)){for(C=0,E=r.length;C<E;C++)if((a=r[C]).name===p.group){o=a;break}if(null!=o)for(d=P=0,N=(S=o.members).length;P<N;d=++P)s=l[h=S[d]],null==(i=this.create(["ais-chooser-grid-item","ais-chooser-grid-index-"+(d+1)],this.grid)).dataset&&(i.dataset={}),i.dataset.key=h,i.onclick=function(t){var e;return"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation(),e=(null!=t.currentTarget?t.currentTarget:t.srcElement).dataset.key,x.sendNotification(AISNotifications.LAUNCH_IDP_LOGIN,e),!1},null!=(null!=(T=l[h].logos)?T[p.key]:void 0)?((c=this.create("ais-chooser-grid-cell-img",i,"img")).alt=s.display_name,-1===(g=s.logos[p.key]).indexOf("http")&&(g=e+g),c.src=g,null==c.dataset&&(c.dataset={}),c.dataset.key=h,this.create("ais-chooser-grid-cell-label",i,"span").innerHTML=s.display_name):i.innerHTML=s.display_name}for(""!==this.grid.innerHTML&&(this.classList.add("ais-chooser-featured"),this.label.textContent="Other "),d=_=0,v=(y=this.select.options).length;_<v;d=++_)y[d],this.select.options.remove(d);if(n.length>0)for(A=0,M=n.length;A<M;A++)u=n[A],y[y.length]=new Option(""+l[u].display_name,""+u);for(u in l)f=l[u],y[y.length]=new Option(""+f.display_name,""+u);this.classList.remove("hidden");break;case AISNotifications.AUTHENTICATING:this.classList.add("hidden")}},__extends(AISPlayMediator,ComponentMediator),AISPlayMediator.prototype.componentName="ais-play",AISPlayMediator.prototype.menu=null,AISPlayMediator.prototype.restart=null,AISPlayMediator.prototype.resume=null,AISPlayMediator.prototype.resumeTime=null,AISPlayMediator.prototype.onRegister=function(){var t=this;AISPlayMediator.__super__.onRegister.call(this),this.classList.add("hidden"),this.menu=this.create("ais-play-menu"),this.restart=this.create("ais-play-restart",this.menu),this.restart.type="button",this.restart.textContent="Restart",this.restart.onclick=function(e){return"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation(),t.play(),!1},this.resume=this.create("ais-play-resume",this.menu),this.resume.type="button",this.resume.value="Resume",this.restart.onclick=function(e){return"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation(),t.play(t.resumeTime),!1}},AISPlayMediator.prototype.play=function(t){this.facade.retrieveProxy(AISProxy.NAME).play(t)},AISPlayMediator.prototype.listNotificationInterests=function(){return[AISNotifications.CHOOSE_PLAY_OPTIONS]},AISPlayMediator.prototype.handleNotification=function(t){switch(t.getName()){case AISNotifications.CHOOSE_PLAY_OPTIONS:this.resumeTime=t.getBody(),this.classList.remove("hidden")}},__extends(AISAuthorizeCommand,PluginCommand),AISAuthorizeCommand.prototype.execute=function(t){this.proxy.isRestricted(this.media.getData())&&this.proxy.authorize()},__extends(AISAuthenticationFailedCommand,PluginEventCommand),AISAuthenticationFailedCommand.prototype.execute=function(t){AISAuthenticationFailedCommand.__super__.execute.call(this,t),this.proxy.isPreviewAvailable()?this.proxy.preview():this.proxy.choose()},__extends(AISAuthorizationFailedCommand,PluginEventCommand),AISAuthorizationFailedCommand.prototype.execute=function(t){AISAuthorizationFailedCommand.__super__.execute.call(this,t),this.proxy.isPreviewAvailable()&&this.proxy.preview()},__extends(AISAuthorizationExpiredCommand,PluginEventCommand),AISAuthorizationExpiredCommand.prototype.execute=function(t){AISAuthorizationExpiredCommand.__super__.execute.call(this,t),this.sendNotification(Notifications.PAUSE),this.proxy.authorize()},__extends(AISChangePlayStateCommand,PluginCommand),AISChangePlayStateCommand.prototype.execute=function(t){var e;(e=t.getBody().value)===PlayState.PLAYING?this.proxy.playing():e===PlayState.PAUSED&&this.proxy.pause()},__extends(AISAuthenticatingMediator,ComponentMediator),AISAuthenticatingMediator.prototype.componentName="ais-authenticating",AISAuthenticatingMediator.prototype.retry=null,AISAuthenticatingMediator.prototype.onRegister=function(){AISAuthenticatingMediator.__super__.onRegister.call(this),this.classList.add("hidden"),this.retry=this.create("ais-authenticating-button"),this.retry.type="button",this.retry.value="Back to Providers",this.retry.onclick=this.onclick.bind(this)},AISAuthenticatingMediator.prototype.onclick=function(t){return"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.classList.add("hidden"),this.sendNotification(AISNotifications.START_AUTHENTICATION),!1},AISAuthenticatingMediator.prototype.listNotificationInterests=function(){return[AISNotifications.AUTHENTICATING]},AISAuthenticatingMediator.prototype.handleNotification=function(t){switch(t.getName()){case AISNotifications.AUTHENTICATING:!0===t.getBody()?this.classList.remove("hidden"):this.classList.add("hidden")}},__extends(AISPreviewMediator,ComponentMediator),AISPreviewMediator.prototype.componentName="ais-preview",AISPreviewMediator.prototype.onRegister=function(){var t=this;AISPreviewMediator.__super__.onRegister.call(this),this.classList.add("hidden"),this.info=this.create(["flex-item","ais-preview-info"]),this.info.textContent=this.localizationManager.getString("MSG_PREVIEW_INFO"),this.spacer=this.create("spacer"),this.label=this.create(["flex-item","ais-preview-label"]),this.label.textContent=this.localizationManager.getString("MSG_PREVIEW_EXPIRES"),this.count=this.create(["flex-item","ais-preview-count"]),this.login=this.create(["flex-item","ais-preview-login"],this,"button"),this.login.textContent=this.localizationManager.getString("MSG_SIGN_IN"),this.login.onclick=function(){t.sendNotification(Notifications.PAUSE),t.facade.retrieveProxy(AISProxy.NAME).authorize(!0)}},AISPreviewMediator.prototype.displayTime=function(t,e){this.count.textContent=Utils.formatTimecode(t,e)},AISPreviewMediator.prototype.listNotificationInterests=function(){return[AISNotifications.START_AUTHENTICATION,AISNotifications.PREVIEW,AISNotifications.PREVIEW_TIME_REMAINING]},AISPreviewMediator.prototype.handleNotification=function(t){var e;switch(t.getName()){case AISNotifications.START_AUTHENTICATION:this.classList.add("hidden");break;case AISNotifications.PREVIEW:this.classList.remove("hidden");break;case AISNotifications.PREVIEW_TIME_REMAINING:e=t.getBody(),this.displayTime(e.time/1e3,e.duration/1e3)}},__extends(AISStartAuthenticationCommand,PluginEventCommand),AISStartAuthenticationCommand.prototype.execute=function(t){this.proxy.authenticate(),AISStartAuthenticationCommand.__super__.execute.call(this,t)},__extends(AISMediator,OverlayMediator),AISMediator.prototype.componentName="ais",AISMediator.prototype.chooser=null,AISMediator.prototype.auth=null,AISMediator.prototype.play=null,AISMediator.prototype.onRegister=function(){var t=this;AISMediator.__super__.onRegister.call(this),this.classList.add("hidden"),setTimeout(function(){return t.chooser=new AISChooserMediator(t),t.facade.registerMediator(t.chooser),t.auth=new AISAuthenticatingMediator(t),t.facade.registerMediator(t.auth),t.play=new AISPlayMediator(t),t.facade.registerMediator(t.play),t.preview=new AISPreviewMediator(t),t.facade.registerMediator(t.preview)},20)},AISMediator.prototype.listNotificationInterests=function(){return[AISNotifications.START_AUTHENTICATION,AISNotifications.AUTHENTICATION_COMPLETE,AISNotifications.CHOOSE_PLAY_OPTIONS,AISNotifications.PREVIEW,Notifications.MEDIA_CHANGE]},AISMediator.prototype.handleNotification=function(t){var e;switch(e=t.getName()){case AISNotifications.CHOOSE_PLAY_OPTIONS:case AISNotifications.START_AUTHENTICATION:case AISNotifications.PREVIEW:this.classList.remove("hidden"),e===AISNotifications.PREVIEW?this.classList.add("ais-free-preview"):this.classList.remove("ais-free-preview");break;case AISNotifications.AUTHENTICATION_COMPLETE:case Notifications.MEDIA_CHANGE:this.classList.add("hidden"),this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"authenticating")}},__extends(AISPlugin,Feature),AISPlugin.NAME="AISPlugin",AISPlugin.prototype.moduleName="ais",AISPlugin.prototype.featureName="auth",AISPlugin.prototype.idps=null,AISPlugin.prototype.createController=function(){AISPlugin.__super__.createController.call(this),this.registerCommand(SecurityNotifications.AUTHORIZE,AISAuthorizeCommand),this.registerCommand(AISNotifications.LAUNCH_IDP_LOGIN,AISLaunchIDPLoginCommand),this.registerCommand(AISNotifications.START_AUTHENTICATION,AISStartAuthenticationCommand),this.registerCommand(SecurityNotifications.AUTHENTICATION_FAILED,AISAuthenticationFailedCommand),this.registerCommand(SecurityNotifications.AUTHORIZATION_FAILED,AISAuthorizationFailedCommand),this.registerCommand(SecurityNotifications.AUTHORIZATION_EXPIRED,AISAuthorizationExpiredCommand),this.registerCommand(AISNotifications.AUTHENTICATED,PluginEventCommand),this.registerCommand(AISNotifications.AUTHENTICATING,PluginEventCommand),this.registerCommand(AISNotifications.AUTHENTICATION_COMPLETE,PluginEventCommand),this.registerCommand(AISNotifications.CHOOSE_AUTH_PROVIDER,PluginEventCommand),this.registerCommand(AISNotifications.CHOOSE_PLAY_OPTIONS,PluginEventCommand),this.registerCommand(AISNotifications.PREVIEW,PluginEventCommand),this.registerCommand(Notifications.PLAY_STATE_CHANGE,AISChangePlayStateCommand)},AISPlugin.prototype.createModel=function(){this.proxy=new AISProxy(this.config),this.registerProxy(this.proxy)},AISPlugin.prototype.createView=function(){this.registerMediator(new AISMediator)},AISPlugin.prototype.createNotificationEvent=function(t,e,i){var o;if(null!=(o=Module.prototype.createNotificationEvent.call(this,t,e,i)))return o.type=o.type.replace(new RegExp("^"+this.getModuleName()),""),o},AISPlugin.prototype.listNotificationInterests=function(){return AISPlugin.__super__.listNotificationInterests.call(this).concat([Notifications.MEDIA_CHANGE,SecurityNotifications.AUTHORIZE,Notifications.PLAY_STATE_CHANGE])},AISPlugin.prototype.listNotificationPublications=function(){return AISPlugin.__super__.listNotificationPublications.call(this).concat([SecurityNotifications.AUTHORIZED,SecurityNotifications.AUTHENTICATION_FAILED,SecurityNotifications.AUTHORIZATION_FAILED,SecurityNotifications.AUTHORIZATION_EXPIRED,Notifications.INITIALIZED,Notifications.PLAY,Notifications.PAUSE,Notifications.SEEK,Notifications.WAITING])},AISPlugin.prototype.authorize=function(t){return this.proxy.authorize(t),t},AISPlugin.prototype.identity=function(t){return this.proxy.identity(t)},AISPlugin.prototype.logout=function(){this.proxy.logout()},AISPlugin.prototype.getIdps=function(){return this.idps},AMP.registerPlugin("ais","html",AISPlugin),__extends(AISFlashPlugin,AISPlugin),AISFlashPlugin.NAME="AISFlashPlugin",AISFlashPlugin.prototype.proxy=null,AISFlashPlugin.prototype.startTime=null,AISFlashPlugin.prototype.setData=function(t){var e;(e=this.retrieveProxy(AISProxy.NAME)).data.platformID=t.platformID,e.data.resourceID=t.resourceID,e.data.contentID=t.contentID},AISFlashPlugin.prototype.authorize=function(t){this.retrieveProxy(AISProxy.NAME).authorize(t)},__extends(AISTimeUpdateCommand,PluginCommand),AISTimeUpdateCommand.prototype.execute=function(t){var e;0!==(e=Math.floor(t.getBody()))&&e%30==0&&e!==this.proxy.currentTime&&this.proxy.vcsSet(e),this.proxy.currentTime=e},__extends(AISWrapper,PluginWrapper),AISWrapper.NAME="AISWrapper",AISWrapper.prototype.plugin=null,AISWrapper.prototype.getFeatureName=function(){return"auth"},AISWrapper.prototype.createXML=function(t){var e,i,o,n,a,r,s,l,c;for(e=t.firstChild,null==(i=t.getElementsByTagName("authentication"))||0===i.length?(i=t.createElement("authentication"),e.appendChild(i)):i=i[0],(s=t.createElement("vendor")).setAttribute("id","ais"),i.appendChild(s),l=0,c=(a=[{value:this.config.platformID,key:"platformID"},{value:this.config.resourceID,key:"resourceID"},{value:this.config.contentID,key:"contentID"}]).length;l<c;l++)null!=(n=a[l]).value&&((o=t.createElement("property")).setAttribute("key",n.key),r=XMLUtils.createTextContent(t,n.value),o.appendChild(r),s.appendChild(o));return t},AISWrapper.prototype.listNotificationInterests=function(){return AISWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([SecurityNotifications.AUTHORIZE,FlashNotifications.TIME_UPDATE,FlashNotifications.ENDED,FlashNotifications.PAUSED,FlashNotifications.CAPABILITY_CHANGE,FlashNotifications.RESET])},AISWrapper.prototype.handleNotification=function(t){var e,i,o;switch(AISWrapper.__super__.handleNotification.call(this,t),o=t.getName(),e=t.getBody(),o){case SecurityNotifications.AUTHORIZE:this.plugin.startTime=null,this.plugin.setData(e),null==(i=this.player.retrieveProxy(MediaProxy.NAME)).getSrc()&&i.setSrc(e.media.src);break;case FlashNotifications.TIME_UPDATE:this.plugin.sendNotification(Notifications.TIME_UPDATE,e);break;case FlashNotifications.ENDED:this.plugin.sendNotification(Notifications.ENDED,e);break;case FlashNotifications.PAUSED:this.plugin.sendNotification(Notifications.PAUSE,e);break;case FlashNotifications.RESET:this.plugin.sendNotification(Notifications.MEDIA_CHANGE,e);break;case FlashNotifications.CAPABILITY_CHANGE:null!=this.plugin.startTime&&"canSeekChange"===e.type&&e.enabled&&this.player.setCurrentTime(this.plugin.startTime)}},AISWrapper.prototype.authorize=function(t){return this.plugin.authorize(t),t},AISWrapper.prototype.logout=function(){this.plugin.logout()},AISWrapper.prototype.getIdps=function(){return this.plugin.getIdps()},AMP.registerPlugin("ais","flash",AISWrapper),__extends(AISEndedCommand,PluginCommand),AISEndedCommand.prototype.execute=function(t){this.proxy.vcsSet(0)},__extends(SharePanelPlugin,ControlPanelPlugin),SharePanelPlugin.prototype.moduleName="sharepanel",SharePanelPlugin.prototype.featureName="share",SharePanelPlugin.prototype.getFeatureName=function(){return this.featureName},SharePanelPlugin.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification(FeatureNotifications.REGISTER_FEATURE,this)},SharePanelPlugin.prototype.onRegister=function(){this.registerFeature(),SharePanelPlugin.__super__.onRegister.call(this)},SharePanelPlugin.prototype.createModel=function(){this.registerProxy(new SharePanelProxy(this.config))},SharePanelPlugin.prototype.createController=function(){SharePanelPlugin.__super__.createController.call(this),this.registerCommand(ShareNotifications.SHARE,ShareCommand)},SharePanelPlugin.prototype.createView=function(){this.registerMediator(new SharePanelMediator)},SharePanelPlugin.prototype.listNotificationInterests=function(){return SharePanelPlugin.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIA_CHANGE])},AMP.registerPlugin("sharepanel","html",SharePanelPlugin),__extends(ChromeCastPlayer,EventDispatcher),ChromeCastPlayer.prototype.player=null,ChromeCastPlayer.prototype.callbackMap=null,ChromeCastPlayer.prototype.state=null,ChromeCastPlayer.prototype.activeTrackId=null,ChromeCastPlayer.prototype.cssRule=null,ChromeCastPlayer.prototype.textTrackStyle=null,ChromeCastPlayer.prototype.ccHandler=null,ChromeCastPlayer.prototype.feed=null,ChromeCastPlayer.prototype.media=null,ChromeCastPlayer.prototype.tracks=null,ChromeCastPlayer.prototype.registerPlayer=function(t){var e,i,o,n=this;this.player=t,e=["loadedmetadata","ended","error"],i=this.dispatchEvent.bind(this),e.forEach(function(e){return t.addEventListener(e,i)}),o=function(){n.applyMedia(),n.applyClassName()},this.player.once("ready",o),this.player.addEventListener("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING)),this.player.addEventListener("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED)),this.player.addEventListener("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))},ChromeCastPlayer.prototype.setState=function(t){if(t!==this.state)return this.state=t,this.shim.mediaManager.broadcastStatus(!0),t},ChromeCastPlayer.prototype.registerErrorCallback=function(t){this.onerror=t},ChromeCastPlayer.prototype.registerEndedCallback=function(t){this.onended=t},ChromeCastPlayer.prototype.registerLoadCallback=function(t){this.onloadedmetadata=t},ChromeCastPlayer.prototype.unregisterErrorCallback=function(){this.onerror=null},ChromeCastPlayer.prototype.unregisterEndedCallback=function(){this.onended=null},ChromeCastPlayer.prototype.unregisterLoadCallback=function(){this.onloadedmetadata=null},ChromeCastPlayer.prototype.load=function(t,e,i,o){var n,a,r,s,l,c,d,u,p;if(n=(a=this.shim.mediaManager.getMediaInformation()).customData||{},l=a.metadata||{},null!=o?this.editTracksInfo(o):this.activeTrackId=null,this.feed=null,s={src:t,type:a.contentType,title:l.title,poster:null!=(d=l.images)?d.url:void 0,description:l.subtitle,pubDate:new Date(a.releaseDate),metadata:n,duration:a.duration,startTime:i||(null!=(u=n.media)?u.startTime:void 0),autoplay:e},null!=n.media){for(r in p=n.media)c=p[r],null==s[r]&&(s[r]=c);null!=n.media.metadata&&(s.metadata=n.media.metadata)}this.tracks=a.tracks,this.media=s,this.applyMedia()},ChromeCastPlayer.prototype.applyMedia=function(){null!=this.player&&null!=this.media&&(this.player.once("loadedmetadata",this.loadTracks.bind(this,this.tracks)),this.player.setMedia(this.media),this.setState(cast.receiver.media.PlayerState.BUFFERING))},ChromeCastPlayer.prototype.loadTracks=function(t,e){var i,o;(null!=t?t.length:void 0)>0&&null!=(i=this.getTrack(0))&&(o=/ttml/.test(i.trackContentType)?"ttml":i.trackContentType,this.player.retrieveProxy("PlayerProxy").getActivePlaybackCore().player.enableCaptions(!0,o,i.trackContentId))},ChromeCastPlayer.prototype.mediachangeHandler=function(t){var e,i;e=this.player.getMedia(),(i=new cast.receiver.media.MediaInformation).contentId=e.src,i.contentType=e.type,i.customData=e.metadata,i.duration=e.duration,i.metadata={title:e.title,subtitle:e.description,images:[{url:e.poster}],releaseDate:e.pubDate.toISOString()},this.media=e,this.shim.mediaManager.setMediaInformation(i,!0)},ChromeCastPlayer.prototype.reset=function(){},ChromeCastPlayer.prototype.play=function(){this.player.play()},ChromeCastPlayer.prototype.seek=function(t,e){switch(this.player.setCurrentTime(t),e){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}},ChromeCastPlayer.prototype.pause=function(){return this.player.pause()},ChromeCastPlayer.prototype.getState=function(){return this.state},ChromeCastPlayer.prototype.getCurrentTimeSec=function(){return null!=this.player?this.player.getCurrentTime():0},ChromeCastPlayer.prototype.getDurationSec=function(){return null!=this.player?this.player.getDuration():0},ChromeCastPlayer.prototype.getVolume=function(){var t;if(null!=this.player)return(t=new cast.receiver.media.Volume).level=this.player.getVolume(),t.muted=this.player.getMuted(),t},ChromeCastPlayer.prototype.setVolume=function(t){return null!=t.level&&this.player.setVolume(t.level),!0===t.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1),t},ChromeCastPlayer.prototype.editTracksInfo=function(t){var e,i;null!=t.activeTrackIds&&(e=t.activeTrackIds[0],this.activeTrackId!==e&&(this.activeTrackId=e,this.applyClassName())),null!=(i=t.textTrackStyle)&&null!=this.cssRule&&(this.textTrackStyle=i,null!=i.foregroundColor&&(this.cssRule.style.color=this.hexToRgba(i.foregroundColor)),null!=i.backgroundColor&&(this.cssRule.style.backgroundColor=this.hexToRgba(i.backgroundColor)),i.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS&&(this.cssRule.style.borderRadius=i.windowRoundedCornerRadius+"px"),null!=i.fontScale&&(this.cssRule.style.fontSize=i.fontScale+"em"),null!=i.fontFamily&&(this.cssRule.style.fontFamily=i.fontFamily))},ChromeCastPlayer.prototype.applyClassName=function(t){var e;null!=this.player&&("akamai-cc",e=this.player.getMediaElement().classList,null!=this.activeTrackId?e.add("akamai-cc"):e.remove("akamai-cc"))},ChromeCastPlayer.prototype.hexToRgba=function(t){return/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(t)?"rgba("+parseInt(t.substring(1,3),16)+","+parseInt(t.substring(3,5),16)+","+parseInt(t.substring(5,7),16)+","+(9===t.length?parseInt(t.substring(7,9),16)/256:1)+")":t},ChromeCastPlayer.prototype.getTrack=function(t){var e;return null==t&&(t=this.activeTrackId),null!=(e=this.tracks.filter(function(e){return e.trackId===t})[0])&&null==e.trackContentType&&(e.trackContentType=cast.player.api.CaptionsType.CEA608),e};var ChromeCastConstants={CHANNEL_ID:"urn:x-cast:com.akamai.amp.cast",APPLICATION_ID:"CC1AD845",SUPPORTED_TYPES:[Utils.mimeTypes.m3u8,Utils.mimeTypes.mp4,Utils.mimeTypes.mpd,Utils.mimeTypes.ism,Utils.mimeTypes.webm,Utils.mimeTypes.mp3]};function ChromeCastSenderProxy(t){this.messageBus=t.messageBus||ChromeCastConstants.CHANNEL_ID,ChromeCastSenderProxy.__super__.constructor.call(this,t.sender)}function ChromeCastLaunchCommand(){ChromeCastLaunchCommand.__super__.constructor.call(this)}function ChromeCastCaptioningVisibilityChangeCommand(){ChromeCastCaptioningVisibilityChangeCommand.__super__.constructor.call(this)}function ChromeCastCaptioningSettingsChangeCommand(){ChromeCastCaptioningSettingsChangeCommand.__super__.constructor.call(this)}function ChromeCastReceiverReadyCommand(){ChromeCastReceiverReadyCommand.__super__.constructor.call(this)}function ChromeCastBreakStartCommand(){ChromeCastBreakStartCommand.__super__.constructor.call(this)}function ChromeCastMediaChangeCommand(){ChromeCastMediaChangeCommand.__super__.constructor.call(this)}function ChromeCastChangeVolumeCommand(){ChromeCastChangeVolumeCommand.__super__.constructor.call(this)}function ChromeCastPlaybackProxy(t,e){this.receiver=e,ChromeCastPlaybackProxy.__super__.constructor.call(this,t)}function ChromeCastToggleMutedCommand(){ChromeCastToggleMutedCommand.__super__.constructor.call(this)}function ChromeCastReceiverMediator(){ChromeCastReceiverMediator.__super__.constructor.call(this)}function ChromeCastSenderMediator(){ChromeCastSenderMediator.__super__.constructor.call(this)}function ChromeCastHTMLSenderMediator(){ChromeCastHTMLSenderMediator.__super__.constructor.call(this)}function ChromeCastReceiverProxy(t){this.messageBus=t.messageBus||ChromeCastConstants.CHANNEL_ID,ChromeCastReceiverProxy.__super__.constructor.call(this,t.receiver)}function ChromeCastFeedChangedCommand(){ChromeCastFeedChangedCommand.__super__.constructor.call(this)}function ChromeCastSeekCommand(){ChromeCastSeekCommand.__super__.constructor.call(this)}function ChromeCastButtonMediator(){ChromeCastButtonMediator.__super__.constructor.call(this)}function ChromeCastTogglePlayPauseCommand(){ChromeCastTogglePlayPauseCommand.__super__.constructor.call(this)}function ChromeCastControlsMediator(t){ChromeCastControlsMediator.__super__.constructor.call(this,t)}function ChromeCastPlaybackTargetChangeCommand(){ChromeCastPlaybackTargetChangeCommand.__super__.constructor.call(this)}function ChromeCastPlugin(){ChromeCastPlugin.__super__.constructor.call(this)}function ChromeCastFlashPlugin(){ChromeCastFlashPlugin.__super__.constructor.call(this)}__extends(ChromeCastSenderProxy,PluginProxy),ChromeCastSenderProxy.NAME=ModuleProxy.NAME,ChromeCastSenderProxy.prototype.defaults={applicationID:ChromeCastConstants.APPLICATION_ID},ChromeCastSenderProxy.prototype.session=null,ChromeCastSenderProxy.prototype.media=null,ChromeCastSenderProxy.prototype.messageBus=null,ChromeCastSenderProxy.prototype.feed=null,ChromeCastSenderProxy.prototype.currentTime=null,ChromeCastSenderProxy.prototype.duration=null,ChromeCastSenderProxy.prototype.receiverAvailable=!1,ChromeCastSenderProxy.prototype.currentTime=0,ChromeCastSenderProxy.prototype.duration=0,ChromeCastSenderProxy.prototype.playerState=null,ChromeCastSenderProxy.prototype.displayTimeTimeout=null,ChromeCastSenderProxy.prototype.volume=1,ChromeCastSenderProxy.prototype.muted=!1,ChromeCastSenderProxy.prototype.initialize=function(){var t,e=this;("undefined"!=typeof chrome&&null!==chrome&&null!=(t=chrome.cast)?t.isAvailable:void 0)?this.initializeCastApi():window.__onGCastApiAvailable=function(t,i){!0===t?e.initializeCastApi():e.logError("cast load error",i)}},ChromeCastSenderProxy.prototype.initializeCastApi=function(){var t,e,i,o;e=this.getConfigurationData().applicationID,o=new chrome.cast.SessionRequest(e),i=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,t=new chrome.cast.ApiConfig(o,this.sessionListener.bind(this),this.receiverListener.bind(this),i),chrome.cast.initialize(t,this.onInitSuccess.bind(this),this.onInitError.bind(this))},ChromeCastSenderProxy.prototype.onInitSuccess=function(t){this.logEvent("init success",t)},ChromeCastSenderProxy.prototype.onInitError=function(t){this.logError("init error",t)},ChromeCastSenderProxy.prototype.receiverListener=function(t){this.receiverAvailable="available"===t,this.sendNotification(ChromeCastNotifications.AVAILABILITY_CHANGE,this.receiverAvailable),this.logEvent("receiver "+(this.receiverAvailable?"found":"list empty"))},ChromeCastSenderProxy.prototype.sessionListener=function(t){this.logEvent("session listener",t),null==this.session&&this.setSession(t),0!==this.session.media.length?this.onMediaDiscovered(this.session.media[0]):this.onRequestSessionSuccess(t)},ChromeCastSenderProxy.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))},ChromeCastSenderProxy.prototype.send=function(t){var e;null!=(e=this.session)&&"function"==typeof e.sendMessage&&e.sendMessage(this.messageBus,t,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))},ChromeCastSenderProxy.prototype.onLaunchError=function(t){this.logError("launch error.",t)},ChromeCastSenderProxy.prototype.setSession=function(t){this.session=t,this.session.addMessageListener(this.messageBus,this.onMessage.bind(this)),this.session.addUpdateListener(this.onUpdate.bind(this))},ChromeCastSenderProxy.prototype.onRequestSessionSuccess=function(t){var e;this.logEvent("request session success.",t),this.setSession(t),this.session.sendMessage(this.messageBus,{type:"createPlayer",config:{debug:this.facade.player.getConfig().debug,params:this.facade.player.getParams()}},this.onCreateSucess.bind(this),this.onMessageError.bind(this)),e=this.facade.player.retrieveProxy(PlaybackProxy.NAME),0===this.session.media.length&&this.loadMedia(e.getCurrentTime())},ChromeCastSenderProxy.prototype.onUpdate=function(t){t||(!0===this.facade.player.media.isLive?1/0:this.media.currentTime,this.sendNotification(Notifications.CHANGE_PLAYBACK_TARGET,"amp"),this.stopDisplayTimeUpdate())},ChromeCastSenderProxy.prototype.onCreateSucess=function(t){this.logEvent("MPL created",t),this.sendNotification(Notifications.CHANGE_PLAYBACK_TARGET,"chromecast")},ChromeCastSenderProxy.prototype.onMessageSuccess=function(t){this.logEvent("message sent",t)},ChromeCastSenderProxy.prototype.onMessageError=function(t){this.logError("message error",t)},ChromeCastSenderProxy.prototype.onMessage=function(t,e){var i,o,n;switch(n=(e=JSON.parse(e)).type,i=e.detail||{},n){case"dispatchevent":null!=(o="player"===i.target?this.facade.player:this.facade.player[i.target])&&o.dispatchEvent(i.event)}this.sendNotification(Notifications.DISPATCH_EVENT,{type:"message",message:e})},ChromeCastSenderProxy.prototype.onStop=function(t){this.logEvent("stop"),this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))},ChromeCastSenderProxy.prototype.onStopSuccess=function(t){this.logEvent("stop success",t)},ChromeCastSenderProxy.prototype.onStopError=function(t){this.logError("stop error",t)},ChromeCastSenderProxy.prototype.logEvent=function(t,e){null==t&&(t=e.type||""),this.facade.logger.log("[AMP CHROMECAST] "+t,e)},ChromeCastSenderProxy.prototype.logError=function(t,e){this.facade.logger.error("[AMP CHROMECAST ERROR] "+t,e)},ChromeCastSenderProxy.prototype.loadMedia=function(t){var e,i,o,n,a;null==t&&(t=0),null!=(i=this.facade.player.retrieveProxy(MediaProxy.NAME).getData())&&(null!=this.media&&(a=[].concat(i.source.map(function(t){return t.src}),i.src),e=this.media.media.contentId,a.some(function(t){return t===e}))||(o=function(t){return ChromeCastConstants.SUPPORTED_TYPES.indexOf(t)>-1?"maybe":""},null!=(a=Utils.selectSource(i.source,o))&&(n=this.mediaToLoadRequest(i,a,t,{media:i}),this.session.loadMedia(n,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this)))))},ChromeCastSenderProxy.prototype.mediaToLoadRequest=function(t,e,i,o){var n,a,r,s,l,c,d,u,p,h,y;if((r=new chrome.cast.media.GenericMediaMetadata).title=t.title,r.subtitle=t.description,r.image=[new chrome.cast.Image(t.poster)],r.releaseDate=null!=(p=t.pubDate)&&"function"==typeof p.toISOString?p.toISOString():void 0,(a=new chrome.cast.media.MediaInfo(e.src,e.type)).duration=t.duration,a.customData=o,a.metadata=r,(null!=(h=t.track)?h.length:void 0)>0)for(a.tracks=[],n=d=0,u=(y=t.track).length;d<u;n=++d)c=y[n],(l=new chrome.cast.media.Track(n,chrome.cast.media.TrackType.TEXT)).subtype=chrome.cast.media.TextTrackType.CAPTIONS,l.name="Closed Captions",l.language=c.srclang,l.customData=c,l.trackContentId=c.src,l.trackContentType=c.type,a.tracks.push(l);return(s=new chrome.cast.media.LoadRequest(a)).currentTime=i,s},ChromeCastSenderProxy.prototype.onMediaDiscovered=function(t){null!=this.media&&this.media.removeUpdateListener(this.mediaStatusUpdate),this.media=t,this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this),this.media.addUpdateListener(this.mediaStatusUpdate),this.sendNotification(Notifications.CHANGE_PLAYBACK_TARGET,"chromecast")},ChromeCastSenderProxy.prototype.onMediaStatusUpdate=function(t){this.logEvent("mediastatusupdate",t),this.updatePlayerState(this.media.playerState),this.updateDisplayTime(),!1===t&&this.stopDisplayTimeUpdate()},ChromeCastSenderProxy.prototype.updatePlayerState=function(t){var e;if(t!==this.playerState){switch(this.playerState=t,this.playerState){case chrome.cast.media.PlayerState.BUFFERING:e=PlayState.WAITING;break;case chrome.cast.media.PlayerState.PLAYING:e=PlayState.PLAYING;break;case chrome.cast.media.PlayerState.PAUSED:e=PlayState.PAUSED}this.sendNotification(Notifications.CHANGE_PLAY_STATE,e),this.playerState===chrome.cast.media.PlayerState.PLAYING?this.startDisplayTimeUpdate():this.stopDisplayTimeUpdate()}},ChromeCastSenderProxy.prototype.startDisplayTimeUpdate=function(){this.stopDisplayTimeUpdate(),this.displayTimeTimeout=setInterval(this.updateDisplayTime.bind(this),100)},ChromeCastSenderProxy.prototype.stopDisplayTimeUpdate=function(){clearInterval(this.displayTimeTimeout),this.displayTimeTimeout=null},ChromeCastSenderProxy.prototype.updateDisplayTime=function(){var t,e,i;if(t=this.media.getEstimatedTime()||0,(e=(null!=(i=this.media.media)?i.duration:void 0)||t)!==this.duration)return this.duration=e,void this.sendNotification(Notifications.CHANGE_DURATION,this.duration);t!==this.currentTime&&(this.currentTime=t,this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:this.currentTime,duration:this.duration}))},ChromeCastSenderProxy.prototype.onMediaError=function(t){this.logError("media error",t),this.stopDisplayTimeUpdate()},ChromeCastSenderProxy.prototype.play=function(){this.media.play()},ChromeCastSenderProxy.prototype.pause=function(){this.media.pause()},ChromeCastSenderProxy.prototype.setCurrentTime=function(t){var e;(e=new chrome.cast.media.SeekRequest).currentTime=t,this.media.seek(e)},ChromeCastSenderProxy.prototype.getCurrentTime=function(){return this.currentTime},ChromeCastSenderProxy.prototype.isReceiverAvailable=function(){return this.receiverAvailable},ChromeCastSenderProxy.prototype.toggleMuted=function(){var t;this.muted=!this.muted,t=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(null,this.muted)),this.media.setVolume(t,this.onVolumeSuccess.bind(this),this.onVolumeError.bind(this)),this.sendNotification(Notifications.VOLUME_CHANGE,this.muted?0:this.volume)},ChromeCastSenderProxy.prototype.getVolume=function(){return this.volume},ChromeCastSenderProxy.prototype.setVolume=function(t,e){var i;null==e&&(e=!1),t===this.volume&&!0!==e||(!1===e&&(this.volume=t),i=new chrome.cast.media.VolumeRequest(new chrome.cast.Volume(t,0===t)),this.media.setVolume(i,this.onVolumeSuccess.bind(this),this.onVolumeError.bind(this)))},ChromeCastSenderProxy.prototype.onVolumeSuccess=function(){this.facade.logger.log("[AMP Chromecast] Volume success",this.media.volume)},ChromeCastSenderProxy.prototype.onVolumeError=function(){this.facade.logger.log("[AMP Chromecast] Volume error")},__extends(ChromeCastLaunchCommand,PluginCommand),ChromeCastLaunchCommand.prototype.execute=function(t){this.proxy.launch()},__extends(ChromeCastCaptioningVisibilityChangeCommand,PluginCommand),ChromeCastCaptioningVisibilityChangeCommand.prototype.execute=function(t){this.proxy.send({type:"captioning.visibilitychange",detail:{visibility:t.getBody()}})},__extends(ChromeCastCaptioningSettingsChangeCommand,PluginCommand),ChromeCastCaptioningSettingsChangeCommand.prototype.execute=function(t){this.proxy.send({type:"captioning.settingschange",detail:t.getBody()})},__extends(ChromeCastReceiverReadyCommand,PluginCommand),ChromeCastReceiverReadyCommand.prototype.execute=function(t){this.facade.player.getViewComponent().hidden=!1,this.proxy.ready()},__extends(ChromeCastBreakStartCommand,PluginCommand),ChromeCastBreakStartCommand.prototype.execute=function(t){var e;this.facade.logger.debug("ChromeCastBreakStartCommand"),"chromecast"===(e=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore()).getPlaybackCoreName()&&(e.unload(),e.src=null)},__extends(ChromeCastMediaChangeCommand,PluginCommand),ChromeCastMediaChangeCommand.prototype.execute=function(t){"chromecast"===this.applicationState.getPlaybackTarget()&&(this.facade.logger.debug("ChromeCastMediaChangeCommand"),this.proxy.loadMedia())},__extends(ChromeCastChangeVolumeCommand,PluginCommand),ChromeCastChangeVolumeCommand.prototype.execute=function(t){var e;e=t.getBody(),this.proxy.setVolume(e),this.sendNotification(Notifications.VOLUME_CHANGE,e)},__extends(ChromeCastPlaybackProxy,PlaybackCoreProxy),ChromeCastPlaybackProxy.prototype.initialized=!0,ChromeCastPlaybackProxy.prototype.player=null,ChromeCastPlaybackProxy.prototype.host=null,ChromeCastPlaybackProxy.prototype.protocol=null,ChromeCastPlaybackProxy.prototype.playbackCoreName="chromecast",ChromeCastPlaybackProxy.prototype.manifest=null,ChromeCastPlaybackProxy.prototype.xhr=null,ChromeCastPlaybackProxy.prototype.trackInfo=null,ChromeCastPlaybackProxy.prototype.receiver=null,ChromeCastPlaybackProxy.prototype.reset=function(){ChromeCastPlaybackProxy.__super__.reset.call(this),this.xhr=null,this.manifest=null},ChromeCastPlaybackProxy.prototype.unload=function(){null!=this.player&&(this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle},this.receiver.chromecastPlayer.activeTrackId=null,this.receiver.chromecastPlayer.textTrackStyle=null,this.player.unload(),this.player=null)},ChromeCastPlaybackProxy.prototype.load=function(){var t,e,i,o=this;switch(this.data.loading=!0,this.playWhenLoaded=!0,this.unload(),(i=this.facade.getMediaElement()).once(this.resume.event,this.resume.listener),i.addEventListener("loadedmetadata",this.handlers.loadedmetadata),i.addEventListener("durationchange",this.handlers.durationchange),i.addEventListener("canplaythrough",this.handlers.canplaythrough),0,!0===this.facade.logger.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG),this.host=new cast.player.api.Host({mediaElement:i,url:this.getSrc()}),this.host.updateManifestRequestInfo=function(t){t.withCredentials=!0},this.host.updateSegmentRequestInfo=function(t){t.withCredentials=!0},this.host.onError=function(t){o.facade.logger.error("Google Media Player Fatal Error - "+t),o.player.unload()},t=this.facade.retrieveProxy(MediaProxy.NAME).getType(),e=Utils.mimeTypes,t){case e.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case e.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case e.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")},ChromeCastPlaybackProxy.prototype.resumecomplete=function(){ChromeCastPlaybackProxy.__super__.resumecomplete.call(this)},__extends(ChromeCastToggleMutedCommand,PluginCommand),ChromeCastToggleMutedCommand.prototype.execute=function(t){this.proxy.toggleMuted()},__extends(ChromeCastReceiverMediator,PluginMediator),ChromeCastReceiverMediator.prototype.onRegister=function(){ChromeCastReceiverMediator.__super__.onRegister.call(this),this.sendNotification(Notifications.ADD_APPLICATION_STATE,"chromecast-receiver")},__extends(ChromeCastSenderMediator,PluginMediator),ChromeCastSenderMediator.prototype.componentName="chromecast",ChromeCastSenderMediator.prototype.controls=null,ChromeCastSenderMediator.prototype.onRegister=function(){ChromeCastSenderMediator.__super__.onRegister.call(this),this.controls=new ChromeCastControlsMediator(!1)},ChromeCastSenderMediator.prototype.registerOverlay=function(){},ChromeCastSenderMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAYBACK_TARGET_CHANGE,Notifications.CHANGE_PLAY_STATE]},ChromeCastSenderMediator.prototype.handleNotification=function(t){var e,i;switch(i=t.getName(),e=t.getBody(),i){case Notifications.PLAYBACK_TARGET_CHANGE:"chromecast"===e.value?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case Notifications.CHANGE_PLAY_STATE:this.controls.setState(e)}},__extends(ChromeCastHTMLSenderMediator,ChromeCastSenderMediator),ChromeCastHTMLSenderMediator.prototype.chromeCastButton=null,ChromeCastHTMLSenderMediator.prototype.onRegister=function(){ChromeCastHTMLSenderMediator.__super__.onRegister.call(this),this.chromeCastButton=new ChromeCastButtonMediator,this.facade.registerMediator(this.chromeCastButton)},ChromeCastHTMLSenderMediator.prototype.listNotificationInterests=function(){return ChromeCastHTMLSenderMediator.__super__.listNotificationInterests.call(this).concat([ChromeCastNotifications.AVAILABILITY_CHANGE])},ChromeCastHTMLSenderMediator.prototype.handleNotification=function(t){var e,i;switch(ChromeCastHTMLSenderMediator.__super__.handleNotification.call(this,t),i=t.getName(),e=t.getBody(),i){case ChromeCastNotifications.AVAILABILITY_CHANGE:!0===e?(this.sendNotification(Notifications.ADD_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(Notifications.ADD_CONTROL,this.chromeCastButton.getViewComponent())):(this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(Notifications.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}},__extends(ChromeCastReceiverProxy,PluginProxy),ChromeCastReceiverProxy.NAME=ModuleProxy.NAME,ChromeCastReceiverProxy.prototype.defaults={shim:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]},ChromeCastReceiverProxy.prototype.messageBus=null,ChromeCastReceiverProxy.prototype.castReceiverManager=null,ChromeCastReceiverProxy.prototype.castMessageBus=null,ChromeCastReceiverProxy.prototype.startTime=0,ChromeCastReceiverProxy.prototype.currentTime=0,ChromeCastReceiverProxy.prototype.boundHandler=null,ChromeCastReceiverProxy.prototype.amp=null,ChromeCastReceiverProxy.prototype.mediaManager=null,ChromeCastReceiverProxy.prototype.playbackCore=null,ChromeCastReceiverProxy.prototype.teardownTimeout=null,ChromeCastReceiverProxy.prototype.chromecastPlayer=null,ChromeCastReceiverProxy.prototype.initialize=function(){var t;ChromeCastReceiverProxy.__super__.initialize.call(this),this.sendNotification(Notifications.INITIALIZED),t=new ChromeCastPlaybackProxy(this.getConfigurationData().types,this),this.facade.player.retrieveProxy(PlayerProxy.NAME).registerPlaybackCore(t)},ChromeCastReceiverProxy.prototype.ready=function(){!0===this.facade.logger.enabled&&cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG),this.shim=ChromeCastShim.getInstance(),this.castReceiverManager=this.shim.castReceiverManager,this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this),this.castReceiverManager.onSenderConnected=this.onSenderConnected.bind(this),this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this),this.amp=this.facade.player,this.chromecastPlayer=this.shim.player,this.chromecastPlayer.registerPlayer(this.amp),this.mediaManager=this.shim.mediaManager,this.castMessageBus=this.shim.castMessageBuses[this.messageBus],this.castMessageBus.onMessage=this.onMessage.bind(this),this.amp.addEventListener("seeking",this.eventHandler.bind(this)),this.amp.addEventListener("seeked",this.eventHandler.bind(this)),this.amp.addEventListener("pause",this.startTeardownTimeout.bind(this,1200)),this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,300)),this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,300)),this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this)),this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this)),null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",this.onBreakEnd.bind(this)),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads"))),this.startTeardownTimeout(300)},ChromeCastReceiverProxy.prototype.onBreakEnd=function(t){this.dispatchEvent("ads",t),!0===this.amp.getEnded()&&this.startTeardownTimeout(300)},ChromeCastReceiverProxy.prototype.logEvent=function(t,e){null==t?t=e.type||"":null==e&&(t=(e=t.data).type),this.facade.logger.log("[CHROMECAST] ",t,e)},ChromeCastReceiverProxy.prototype.onSenderConnected=function(t){this.logEvent("senderconnected",t),setTimeout(this.sendNotification.bind(this,Notifications.DISPATCH_EVENT,new Event("senderconnected",t)),0)},ChromeCastReceiverProxy.prototype.onSenderDisconnected=function(t){this.logEvent("sender disconnected",t),0===this.castReceiverManager.getSenders().length&&t.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&this.teardown(),setTimeout(this.sendNotification.bind(this,Notifications.DISPATCH_EVENT,new Event("senderdisconnected",t)),0)},ChromeCastReceiverProxy.prototype.onMessage=function(t){var e,i,o,n,a;this.logEvent("message from sender",t);try{if(null==(o=t.data||t.message))return;if(a=o.type,"string"==typeof(e=o.detail)&&(e=JSON.parse(e)),null==e)return;switch(a){case"captioning.visibilitychange":i=[],!0===e.visibility&&i.push(0),this.chromecastPlayer.editTracksInfo({activeTrackIds:i});break;case"captioning.settingschange":(n=new cast.receiver.media.TextTrackStyle).foregroundColor=e.fontColor,n.backgroundColor=e.backgroundColor,n.fontScale=e.size,n.windowColor=e.windowColor,n.fontFamily=e.fontFamily,n.edgeColor=e.edgeColor,n.edgeType=e.edgeType,this.chromecastPlayer.editTracksInfo({textTrackStyle:n});break;case"stats.visibilitychange":this.amp.stats.setHidden(!e.visibility)}this.sendNotification(Notifications.DISPATCH_EVENT,t)}catch(t){this.error(t)}},ChromeCastReceiverProxy.prototype.onClose=function(t){this.logEvent("message channel closed",t)},ChromeCastReceiverProxy.prototype.eventHandler=function(t){var e;e={type:t.type},null!=t.detail&&(e.detail=t.detail),this.send(e)},ChromeCastReceiverProxy.prototype.dispatchEvent=function(t,e){this.send({type:"dispatchevent",detail:{target:t,event:{type:e.type,detail:e.detail}}})},ChromeCastReceiverProxy.prototype.send=function(t){this.castMessageBus.broadcast(t)},ChromeCastReceiverProxy.prototype.startTeardownTimeout=function(t){this.stopTeardownTimeout(),this.teardownTimeout=setTimeout(this.teardown.bind(this),1e3*t)},ChromeCastReceiverProxy.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)},ChromeCastReceiverProxy.prototype.teardown=function(){window.close()},__extends(ChromeCastFeedChangedCommand,PluginCommand),ChromeCastFeedChangedCommand.prototype.execute=function(t){var e;"function"==typeof(e=this.proxy).setFeed&&e.setFeed(t.getBody())},__extends(ChromeCastSeekCommand,PluginCommand),ChromeCastSeekCommand.prototype.execute=function(t){this.facade.logger.debug("ChromeCastSeekCommand"),this.plugin.setCurrentTime(t.getBody())},__extends(ChromeCastButtonMediator,ButtonMediator),ChromeCastButtonMediator.prototype.componentName="chromecast",ChromeCastButtonMediator.prototype.onclick=function(t){return t.stopImmediatePropagation(),this.sendNotification(ChromeCastNotifications.LAUNCH),!1},__extends(ChromeCastTogglePlayPauseCommand,PluginCommand),ChromeCastTogglePlayPauseCommand.prototype.execute=function(t){switch(this.applicationState.getPlayState()){case PlayState.ENDED:this.plugin.setCurrentTime(0),this.plugin.play();break;case PlayState.PAUSED:case PlayState.READY:this.plugin.play();break;case PlayState.PLAYING:case PlayState.WAITING:this.plugin.pause()}},__extends(ChromeCastControlsMediator,ControlsMediator),ChromeCastControlsMediator.prototype.componentName="chromecast-controls",ChromeCastControlsMediator.prototype.message=null,ChromeCastControlsMediator.prototype.messageContainer=null,ChromeCastControlsMediator.prototype.button=null,ChromeCastControlsMediator.prototype.captioningActive=!1,ChromeCastControlsMediator.prototype.onRegister=function(){var t,e,i,o;ChromeCastControlsMediator.__super__.onRegister.call(this),this.messageContainer=this.create("chromecast-message-container"),this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer),this.button=new ChromeCastButtonMediator,this.facade.registerMediator(this.button),e=new FullScreenMediator(this.controlBar),this.facade.registerMediator(e),e.setDisabled(!0),this.sendNotification(Notifications.ADD_CONTROL,this.button.getViewComponent()),this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||!0!==(null!=(i=this.facade.player.captioning)&&null!=(o=i.config)?o.enabled:void 0)||(t=new ButtonMediator(this.localizationManager.getString(LocalizationConstants.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(t),this.captionButton=t.getViewComponent(),this.sendNotification(Notifications.ADD_CONTROL,this.captionButton),this.sendNotification(Notifications.ADD_CONTROL_STATE,"cc-enabled"))},ChromeCastControlsMediator.prototype.captionButtonClick=function(){var t;this.captioningActive=!this.captioningActive;try{this.facade.player.parent.chromecast.postMessage({type:"captioning.visibilitychange",detail:{visibility:this.captioningActive}})}catch(t){this.facade.logger.error("[AMP Chromecast Captioning Error]",t)}t=this.captioningActive?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE,this.sendNotification(t,"cc-active")},__extends(ChromeCastPlaybackTargetChangeCommand,PluginCommand),ChromeCastPlaybackTargetChangeCommand.prototype.execute=function(t){var e,i,o,n=this;"chromecast"===(o=t.getBody().value)?this.player.pause():"amp"===o&&(e=this.proxy.getCurrentTime(),i=this.player.getDuration(),0!==e&&e!==i&&(this.player.once("seeked",function(t){setTimeout(n.sendNotification.bind(n,Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING),0)}),this.player.setCurrentTime(e)))},__extends(ChromeCastPlugin,Plugin),ChromeCastPlugin.prototype.moduleName="chromecast",ChromeCastPlugin.prototype.isAvailable=function(){return this.isSender()||this.isReceiver()},ChromeCastPlugin.prototype.createModel=function(){this.proxy=this.isSender()?new ChromeCastSenderProxy(this.config):new ChromeCastReceiverProxy(this.config),this.registerProxy(this.proxy)},ChromeCastPlugin.prototype.createController=function(){ChromeCastPlugin.__super__.createController.call(this),this.isSender()?(this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,ChromeCastPlaybackTargetChangeCommand),this.registerCommand(ChromeCastNotifications.LAUNCH,ChromeCastLaunchCommand),this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ChromeCastTogglePlayPauseCommand),this.registerCommand(UserNotifications.SEEK,ChromeCastSeekCommand),this.registerCommand(CaptioningNotifications.VISIBILITY_CHANGE,ChromeCastCaptioningVisibilityChangeCommand),this.registerCommand(CaptioningNotifications.SETTINGS_CHANGE,ChromeCastCaptioningSettingsChangeCommand),this.registerCommand(Notifications.MEDIA_CHANGE,ChromeCastMediaChangeCommand),this.registerCommand(Notifications.CHANGE_VOLUME,ChromeCastChangeVolumeCommand),this.registerCommand(Notifications.TOGGLE_MUTED,ChromeCastToggleMutedCommand),this.registerCommand(ChromeCastNotifications.AVAILABILITY_CHANGE,PluginEventCommand)):this.isReceiver()&&(this.registerCommand(Notifications.READY,ChromeCastReceiverReadyCommand),this.registerCommand(AdNotifications.BREAK_START,ChromeCastBreakStartCommand))},ChromeCastPlugin.prototype.createView=function(){this.isSender()?this.registerMediator(new ChromeCastHTMLSenderMediator):this.isReceiver()&&this.registerMediator(new ChromeCastReceiverMediator)},ChromeCastPlugin.prototype.isSender=function(){return!ChromeCastPlugin.prototype.isReceiver()&&/Chrome/.test(navigator.userAgent)},ChromeCastPlugin.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)},ChromeCastPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY,CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.SETTINGS_CHANGE,AdNotifications.BREAK_START,Notifications.PLAYBACK_TARGET_CHANGE,Notifications.MEDIA_CHANGE]},ChromeCastPlugin.prototype.listNotificationPublications=function(){return ChromeCastPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.INITIALIZED,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.CHANGE_PLAYBACK_TARGET,Notifications.CHANGE_PLAY_STATE,ChromeCastNotifications.AVAILABILITY_CHANGE,Notifications.CHANGE_PLAY_STATE,Notifications.CHANGE_DURATION,Notifications.DISPLAY_TIME])},ChromeCastPlugin.prototype.play=function(){var t;"function"==typeof(t=this.proxy).play&&t.play()},ChromeCastPlugin.prototype.pause=function(){var t;"function"==typeof(t=this.proxy).pause&&t.pause()},ChromeCastPlugin.prototype.setCurrentTime=function(t){return this.proxy.setCurrentTime(t),t},ChromeCastPlugin.prototype.isReceiverAvailable=function(){var t;return(null!=(t=this.proxy)&&"function"==typeof t.isReceiverAvailable?t.isReceiverAvailable():void 0)||!1},ChromeCastPlugin.prototype.getMedia=function(){return this.proxy.media},ChromeCastPlugin.prototype.getSession=function(){return this.proxy.session},ChromeCastPlugin.prototype.getMediaManager=function(){return this.proxy.mediaManager},ChromeCastPlugin.prototype.getCastReceiverManager=function(){return this.proxy.castReceiverManager},ChromeCastPlugin.prototype.getCastMessageBus=function(){return this.proxy.shim.castMessageBuses[this.proxy.messageBus]},ChromeCastPlugin.prototype.postMessage=function(t){this.proxy.send(t)},ChromeCastPlugin.prototype.launch=function(){this.proxy.launch()},AMP.registerPlugin("chromecast","html",ChromeCastPlugin),__extends(ChromeCastFlashPlugin,ChromeCastPlugin),ChromeCastFlashPlugin.NAME="ChromeCastFlashPlugin",ChromeCastFlashPlugin.prototype.createModel=function(){this.proxy=new ChromeCastSenderProxy(this.config),this.registerProxy(this.proxy)},ChromeCastFlashPlugin.prototype.createController=function(){ChromeCastFlashPlugin.__super__.createController.call(this),this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,ChromeCastPlaybackTargetChangeCommand),this.registerCommand(ChromeCastNotifications.LAUNCH,ChromeCastLaunchCommand),this.registerCommand(FeedNotifications.FEED_CHANGED,ChromeCastFeedChangedCommand),this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ChromeCastTogglePlayPauseCommand),this.registerCommand(UserNotifications.SEEK,ChromeCastSeekCommand)},ChromeCastFlashPlugin.prototype.createView=function(){this.registerMediator(new ChromeCastSenderMediator)},ChromeCastFlashPlugin.prototype.listNotificationInterests=function(){return[FeedNotifications.FEED_CHANGED,Notifications.CHANGE_MEDIA,Notifications.PLAYBACK_TARGET_CHANGE]};var ChromeCastNotifications={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"};function ChromeCastWrapper(t,e){if(!ChromeCastPlugin.prototype.isSender())throw new Error("Chromecast not supported on this platform. Skipping plugin initialization.");ChromeCastWrapper.__super__.constructor.call(this,t,e),this.plugin=new ChromeCastFlashPlugin,this.plugin.initialize(e,this.player),t.registerModule(this.plugin)}function AISProxy(t){AISProxy.__super__.constructor.call(this,t)}function ChromeCastShim(t,e){var i,o;if(/CrKey/.test(navigator.userAgent)&&"undefined"!=typeof cast&&null!==cast){for(i in ChromeCastShim.__super__.constructor.call(this),this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),this.castReceiverManager.onReady=this.dispatchEvent.bind(this,{type:"ready"}),this.castReceiverManager.onSenderConnected=this.dispatchEvent.bind(this,{type:"senderconnected"}),this.castReceiverManager.onSenderDisconnected=this.dispatchEvent.bind(this,{type:"senderdisconnected"}),this.castReceiverManager.onShutdown=this.dispatchEvent.bind(this,{type:"shutdown"}),this.castReceiverManager.onStandbyChanged=this.dispatchEvent.bind(this,{type:"standbychange"}),this.castReceiverManager.onSystemVolumeChanged=this.dispatchEvent.bind(this,{type:"systemvolumechanged"}),this.castReceiverManager.onVisibilityChanged=this.dispatchEvent.bind(this,{type:"visibilitychanged"}),this.player=new ChromeCastPlayer(this),this.mediaManager=new cast.receiver.MediaManager(this.player),null==e&&(e={}),e[ChromeCastConstants.CHANNEL_ID]=cast.receiver.CastMessageBus.MessageType.JSON,this.castMessageBuses={},e)o=e[i],this.castMessageBuses[i]=this.castReceiverManager.getCastMessageBus(i,o),this.castMessageBuses[i].addEventListener("message",this.dispatchEvent.bind(this));this.castReceiverManager.start(t)}}function LinkedMenuWrapper(t,e){null==e&&(e={}),LinkedMenuWrapper.__super__.constructor.call(this,t,e)}function SettingsPanelPlugin(){SettingsPanelPlugin.__super__.constructor.call(this)}function HLSWrapper(t,e){HLSWrapper.__super__.constructor.call(this,t,e),Utils.flashTypes.push(Utils.mimeTypes.m3u8)}function HLSPlaybackProxy(t,e){this.plugin=e,HLSPlaybackProxy.__super__.constructor.call(this,t.types,t),this.temporalTypes=["vod","live","dvr"]}function HLSAdBreakStartCommand(){HLSAdBreakStartCommand.__super__.constructor.call(this)}function PlaybackPluginProxy(t){PlaybackPluginProxy.__super__.constructor.call(this,t)}function HLSProxy(t){HLSProxy.__super__.constructor.call(this,t)}function ChartbeatAnalyticsStrategy(t){this._player=t}function LinkedMenuPlugin(){LinkedMenuPlugin.__super__.constructor.call(this)}function ChartbeatAnalyticsStartCommand(){ChartbeatAnalyticsStartCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsAdStartCommand(){ChartbeatAnalyticsAdStartCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsAdEndCommand(){ChartbeatAnalyticsAdEndCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsEndCommand(){ChartbeatAnalyticsEndCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsMediaChangeCommand(){ChartbeatAnalyticsMediaChangeCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsPausedCommand(){ChartbeatAnalyticsPausedCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsCanPlayCommand(){ChartbeatAnalyticsCanPlayCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsPlayingCommand(){ChartbeatAnalyticsPlayingCommand.__super__.constructor.call(this)}function ChartbeatAnalyticsWrapper(t,e){this.plugin=new ChartbeatAnalyticsPlugin,this.plugin.oninitialized=t.registerModule.bind(t,this.plugin),this.plugin.initialize(e,t),ChartbeatAnalyticsWrapper.__super__.constructor.call(this,t,e)}function ChartbeatAnalyticsProxy(t){ChartbeatAnalyticsProxy.__super__.constructor.call(this,t)}function HLSPlugin(){HLSPlugin.__super__.constructor.call(this),Object.defineProperties(this,{instance:{get:this.getInstance,enumerable:!0,configurable:!1}})}function ChartbeatAnalyticsPlugin(){ChartbeatAnalyticsPlugin.__super__.constructor.call(this)}__extends(ChromeCastWrapper,PluginWrapper),ChromeCastWrapper.NAME="ChromeCastWrapper",ChromeCastWrapper.prototype.buttonId="chromecastBtn",ChromeCastWrapper.prototype.plugin=null,ChromeCastWrapper.prototype.flashView={elements:{controls:{elements:{chromecastBtn:{}}}}},ChromeCastWrapper.prototype.listNotificationInterests=function(){return ChromeCastWrapper.__super__.listNotificationInterests.call(this).concat([FlashNotifications.ELEMENT_EVENT,FlashNotifications.LOAD_STATE_READY,FlashNotifications.LOAD_STATE_LOADING,FlashNotifications.APPLICATION_STATE_CHANGE,ChromeCastNotifications.AVAILABILITY_CHANGE])},ChromeCastWrapper.prototype.handleNotification=function(t){var e,i,o,n;switch(ChromeCastWrapper.__super__.handleNotification.call(this,t),o=t.getName(),e=t.getBody(),o){case FlashNotifications.ELEMENT_EVENT:"click"===e.type&&e.element===this.buttonId&&this.plugin.sendNotification(ChromeCastNotifications.LAUNCH);break;case ChromeCastNotifications.AVAILABILITY_CHANGE:null!=(null!=(n=this.player.mediaElement)?n.setPlayerProperty:void 0)&&this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:e});break;case FlashNotifications.APPLICATION_STATE_CHANGE:case FlashNotifications.LOAD_STATE_READY:case FlashNotifications.LOAD_STATE_LOADING:(i=this.plugin.isReceiverAvailable())&&this.player.mediaElement.setPlayerProperty(this.buttonId,{state:1}),this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:i})}},ChromeCastWrapper.prototype.play=function(){this.plugin.play()},ChromeCastWrapper.prototype.pause=function(){this.plugin.pause()},ChromeCastWrapper.prototype.setCurrentTime=function(t){return this.plugin.setCurrentTime(t),t},ChromeCastWrapper.prototype.isReceiverAvailable=function(){return this.plugin.isReceiverAvailable()},ChromeCastWrapper.prototype.getMedia=function(){return this.plugin.getMedia()},ChromeCastWrapper.prototype.getSession=function(){return this.plugin.getSession()},ChromeCastWrapper.prototype.getMediaManager=function(){return this.plugin.getMediaManager()},ChromeCastWrapper.prototype.getCastReceiverManager=function(){return this.plugin.getCastReceiverManager()},ChromeCastWrapper.prototype.getCastMessageBus=function(){return this.plugin.getCastMessageBuses()},ChromeCastWrapper.prototype.postMessage=function(t){this.plugin.postMessage(t)},ChromeCastWrapper.prototype.launch=function(){this.plugin.launch()},AMP.registerPlugin("chromecast","flash",ChromeCastWrapper),__extends(AISProxy,PluginProxy),AISProxy.NAME=ModuleProxy.NAME,AISProxy.prototype.client=null,AISProxy.prototype.currentTime=null,AISProxy.prototype.idps=null,AISProxy.prototype.idp=null,AISProxy.prototype.token=null,AISProxy.prototype.authz=null,AISProxy.prototype.authenticated=null,AISProxy.prototype.defaults={platformID:null,resourceID:null,contentID:null,responseTargets:null,query:"hdnts",vcs:!1,preview:null,uri:"urn:protected",logos:{base:null,group:null,key:"full"}},AISProxy.prototype.getScript=function(){return this.value.plugin},AISProxy.prototype.initialize=function(){this.client=window.ais_client,this.client.setLogging(this.facade.logger.enabled),this.client.setPlatformId(this.value.platformID),this.client.setUseCache(!1),this.client.assignhandler("bounce",this.bounceHandler.bind(this)),this.client.assignhandler("chooser",this.chooserHandler.bind(this)),this.client.assignhandler("init",this.initHandler.bind(this)),this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this)),this.client.assignhandler("vcs",this.vcsHandler.bind(this)),window.onunload=function(){}},AISProxy.prototype.isRestricted=function(t){var e,i,o;return"ais"===(e=t.status.reason)||"token"===e||(i=t.restriction.filter(function(t){return"allow"===t.relationship&&"uri"===t.type}),o=this.value.uri,i.some(function(t){return-1!==t.value.indexOf(o)}))},AISProxy.prototype.waiting=function(t){var e=this;setTimeout(function(){e.facade.player.appState.setWaiting(t)},10)},AISProxy.prototype.authorize=function(t){null==t&&(t=!1),this.authz=null,this.token=null,!0===t&&(this.value.preview=null),this.disengage(),this.waiting(!0),this.sendNotification(AISNotifications.START_AUTHENTICATION)},AISProxy.prototype.credentials=function(t){var e;(e=this.facade.player.security).setAuthorization({key:this.value.query||this.getDefaults().query,token:t}),this.token=e.getSecret()},AISProxy.prototype.authorized=function(t){null==t&&(t=this.token),this.engage(),this.waiting(!1),this.sendNotification(AISNotifications.AUTHENTICATION_COMPLETE),this.sendNotification(SecurityNotifications.AUTHORIZED,t)},AISProxy.prototype.play=function(t){if(this.sendNotification(Notifications.INITIALIZED),this.sendNotification(Notifications.PLAY),null!=t)return this.sendNotification(Notifications.SEEK,t)},AISProxy.prototype.engage=function(){this.facade.registerCommand(Notifications.TIME_UPDATE,AISTimeUpdateCommand),this.facade.registerCommand(Notifications.ENDED,AISEndedCommand)},AISProxy.prototype.disengage=function(){this.facade.removeCommand(Notifications.TIME_UPDATE),this.facade.removeCommand(Notifications.ENDED)},AISProxy.prototype.logout=function(){var t,e,i,o,n;switch(this.authenticated=null,e=(null!=(n=this.idp.window_display)?n.method:void 0)||"redirect",i=this.getTarget(e),this.setRedirect(e),e){case"redirect":window.open(this.client.logoutFormat(i),"_top");break;case"popup":o=this.idp.window_display.width||320,t=this.idp.window_display.height||240,window.open(this.client.logoutFormat(i),"ais_popup","width="+o+",height="+t)}},AISProxy.prototype.isPreviewAvailable=function(){var t;return null!=(null!=(t=this.value.preview)?t.duration:void 0)},AISProxy.prototype.preview=function(t){var e,i,o,n,a,r,s=this;return null==t&&(t=!1),i=1e3*this.value.preview.duration,r="window"===this.value.preview.type,e="AIS_preview___"+this.value.platformID+"__"+this.value.resourceID,100,o="PREVIEW EXPIRED",!1===r&&(null==(a=localStorage.getItem(e))&&(a=0,localStorage.setItem(e,0)),a=parseInt(a),n=i-a),function(){return new Promise(function(t,e){!1===r&&n<=0?e(o):t()})}().then(function(){return s.requestIdToken(t)}).then(function(t){return s.requestCrossToken(t)}).then(function(t){if(s.credentials(t.token),s.authorized(s.token),!0===r&&(a=0,n=t.expires-t.issued),n<=0)throw o;s.timer=new Timer(100,Math.ceil(n/100)),s.timer.addEventListener("timer",function(t){var o,l;o=t.target.time,l=n-o,!1===r&&localStorage.setItem(e,a+o),s.sendNotification(AISNotifications.PREVIEW_TIME_REMAINING,{time:l,duration:i}),l<=0&&(s.timer.stop(),s.sendNotification(SecurityNotifications.AUTHORIZATION_EXPIRED))}),s.sendNotification(AISNotifications.PREVIEW,t),s.sendNotification(AISNotifications.PREVIEW_TIME_REMAINING,{time:n,duration:i})}).catch(function(t){s.facade.logger.error(t),s.authorize(!0)}).then(function(){s.waiting(!1)})},AISProxy.prototype.requestGuardToken=function(){var t;return t="https://idp.securetve.com/rest/security/v2/platforms/"+this.value.platformID+"/tokens/guard",Utils.requestJson(t).then(function(t){return t.guard_token})},AISProxy.prototype.requestIdToken=function(t){var e,i,o;if(o="AIS_preview___"+this.value.platformID+"__response_cache__identity_token",!0===t)localStorage.removeItem(o);else if(null!=(i=localStorage.getItem(o)))return Promise.resolve(i);return e=["https://idp.securetve.com/rest/authn/v2/platforms/"+this.value.platformID+"/init/fingerprint","https://idp.securetve.com/rest/authn/v2/platforms/"+this.value.platformID+"/tokens/id"],this.requestGuardToken().then(function(t){return Utils.requestJson({url:e[0],headers:{"Akamai-Token-Guard":t}}).then(function(t){return akamai.ais.createEncryptedFingerprint(t)}).then(function(i){return Utils.requestJson({url:e[1],headers:{"Akamai-Token-Guard":t,"Akamai-Authentication":"fingerprint/ob "+i}})}).then(function(t){if(null!=t.failure_type)throw t.failure_type;return i=t.identity_token,localStorage.setItem(o,i),i})})},AISProxy.prototype.requestCrossToken=function(t){var e,i=this;return e=["https://idp.securetve.com/rest/authz/v2/platforms/"+this.value.platformID+"/resources/"+this.value.resourceID,"https://idp.securetve.com/rest/authz/v2/platforms/"+this.value.platformID+"/tokens/crossover"],Utils.requestJson({url:e[0],headers:{"Akamai-Token-Id":t}}).then(function(o){var n;if(null==(n=o.failure_type))return o;switch(n){case"INVALID_ID_TOKEN":return i.preview(!0);case"GRANTS_WINDOW_EXPIRED":return i.requestGuardToken().then(function(o){return Utils.requestJson({url:e[0],method:"POST",headers:{"Akamai-Token-Guard":o,"Akamai-Token-Id":t},body:'{"action":"grant_extension","attributes":{"duration":'+i.value.preview.duration+"}}"})});default:throw JSON.stringify(o,null,"  ")}}).then(function(t){var o,n;if(null!=t.failure_type)throw t.failure_type;return o=Utils.parseJWT(t.access_token).payload.grants[i.value.resourceID],n={issued:1e3*o.issued,expires:1e3*o.expires,duration:i.value.preview.duration},Utils.requestJson({url:e[1],headers:{"Akamai-Token-Access":t.access_token}}).then(function(t){return n.token=t.crossover_token,n})})},AISProxy.prototype.playing=function(){null!=this.timer&&null!=this.value.preview&&"window"!==this.value.preview.type&&this.timer.start()},AISProxy.prototype.pause=function(){null!=this.timer&&null!=this.value.preview&&"window"!==this.value.preview.type&&this.timer.stop()},AISProxy.prototype.authenticate=function(){null===this.authenticated?this.bounce():!1===this.authenticated&&this.choose()},AISProxy.prototype.bounce=function(t){this.client.bounce()},AISProxy.prototype.init=function(t){this.client.init()},AISProxy.prototype.identity=function(t){var e=this;return new Promise(function(i,o){return e.client.identity(t),e.client.assignhandler("identity",function(t,o){var n;return n=o.identity,i(n),e.facade.dispatchEvent(new Event(t,n))})})},AISProxy.prototype.choose=function(){this.timer=null,this.client.chooser()},AISProxy.prototype.resourceAccess=function(t){null==t&&(t=this.value.resourceID),this.client.resourceAccess(t)},AISProxy.prototype.vcsSet=function(t){t=Utils.formatTimecode(t),this.client.vcsSet(this.value.contentID,t)},AISProxy.prototype.bounceHandler=function(t,e){this.authenticated="true"===e.authenticated.toString(),!1===this.authenticated?this.sendNotification(SecurityNotifications.AUTHENTICATION_FAILED):!0===this.authenticated&&this.init()},AISProxy.prototype.initHandler=function(t,e){var i,o,n,a,r;for(i in this.idp=e.idps,this.facade.idps={},r=e.idps){for(o in n=r[i],this.facade.idps.key=i,n)a=n[o],this.facade.idps[o]=a;break}for(i in e)n=e[i],"idps"!==i&&null!=n&&(this.facade[i]=n);null!=this.value.logos&&null!=this.facade.idps.logos&&(this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key]),this.client.assignhandler("logout_result",this.logoutHandler.bind(this)),this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"authenticating"),this.sendNotification(AISNotifications.AUTHENTICATED,this.facade.idps),this.resourceAccess(this.value.resourceID)},AISProxy.prototype.chooserHandler=function(t,e){this.waiting(!1),this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"authenticating"),e.possible_idps=this.idps=this.sort(e.possible_idps,"value","display_name"),this.sendNotification(AISNotifications.CHOOSE_AUTH_PROVIDER,e)},AISProxy.prototype.launchIDPLogin=function(t){var e,i,o,n,a,r;switch(this.sendNotification(AISNotifications.AUTHENTICATING,!0),o=(null!=(r=(i=this.idps[t]).window_display)?r.method:void 0)||"redirect",n=this.getTarget(o),this.setRedirect(o),o){case"redirect":window.open(this.client.loginFormat(t,n),"_top");break;case"popup":o=i.window_display.method||"popup",a=i.window_display.width||320,e=i.window_display.height||240,window.open(this.client.loginFormat(t,n),"ais_popup","width="+a+",height="+e)}},AISProxy.prototype.authz_queryHandler=function(t,e){var i,o,n;!1===(i="true"===e.authorization.toString())?this.sendNotification(SecurityNotifications.AUTHORIZATION_FAILED,e):!0===i&&(this.authz=e,o={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.player.setParams({mvpdname:o.mvpdName}),this.facade.player.sendNotification(MediaAnalyticsNotifications.SET_DIMENSIONS,o),this.facade.viewerId=this.client.aisuid,null!=(n=e.resource)&&(this.facade.resource=n),this.credentials(e.security_token),this.sendNotification(AISNotifications.AUTHENTICATING,!1),!0===this.value.vcs&&null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))},AISProxy.prototype.logoutHandler=function(t,e){top.location.href=top.location.href},AISProxy.prototype.vcsHandler=function(t,e){var i;"get"===e.operation&&("00:00:00"===(i=e.ph_pos)||"00:00"===i?(this.client.vcsSet(this.value.contentID,i),this.authorized(this.token)):this.sendNotification(AISNotifications.CHOOSE_PLAY_OPTIONS,Utils.flattenTimecode(i)))},AISProxy.prototype.sort=function(t,e,i){var o,n,a,r,s,l,c,d;for(r in s={},o=[],n=0,t)l=t[r],o[n]={key:r,value:l[i]},n++;for(o.sort(function(t,i){var o,n,a,r,s,l;return(o="value"===e?null!=(a=t.value)?a.toLowerCase():void 0:null!=(r=t.key)?r.toLowercase():void 0)<(n="value"===e?null!=(s=i.value)?s.toLowerCase():void 0:null!=(l=i.key)?l.toLowercase():void 0)?-1:o>n?1:0}),n=c=0,d=o.length;c<d;n=++c)s[(a=o[n]).key]=t[a.key];return s},AISProxy.prototype.setRedirect=function(t){var e,i,o;try{e=/\/dev\./,o=window.top.location.href||window.top.location,i=e.test(o)?o.replace(e,"/"):null,Cookies.setCookie(this.getTarget(t),o,1,"/",i)}catch(t){}},AISProxy.prototype.getTarget=function(t){return null==t&&(t="redirect"),this.value.responseTargets[t]},__extends(ChromeCastShim,EventDispatcher),ChromeCastShim.prototype.castReceiverManager=null,ChromeCastShim.prototype.mediaManager=null,ChromeCastShim.prototype.castMessageBuses=null,ChromeCastShim.prototype.player=null,ChromeCastShim.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)},ChromeCastShim.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)},ChromeCastShim.getInstance=function(){return this.instance},ChromeCastShim.instance=new ChromeCastShim,__extends(LinkedMenuWrapper,PluginWrapper),LinkedMenuWrapper.NAME="LinkedMenuWrapper",LinkedMenuWrapper.prototype.flashPlugins=[{id:"LinkedMenuPlugin",src:"#{paths.resources}plugins/LinkedMenuPlugin.swf",blocking:!1,host:"akamai",main:"LinkedMenuPlugin"}],AMP.registerPlugin("linkedmenu","flash",LinkedMenuWrapper),__extends(SettingsPanelPlugin,ControlPanelPlugin),SettingsPanelPlugin.prototype.moduleName="settingspanel",SettingsPanelPlugin.prototype.createModel=function(){this.registerProxy(new SettingsPanelProxy(this.config))},SettingsPanelPlugin.prototype.createController=function(){SettingsPanelPlugin.__super__.createController.call(this),this.registerCommand(SettingsPanelNotifications.TOGGLE_AUTO_PLAY,ToggleAutoplayCommand)},SettingsPanelPlugin.prototype.createView=function(){this.registerMediator(new SettingsPanelMediator)},SettingsPanelPlugin.prototype.listNotificationPublications=function(){return SettingsPanelPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY,UserSettingsNotifications.UPDATE_SETTINGS])},SettingsPanelPlugin.prototype.listNotificationInterests=function(){return SettingsPanelPlugin.__super__.listNotificationInterests.apply(this,arguments).concat([CaptioningNotifications.VISIBILITY_CHANGE,UserSettingsNotifications.SETTINGS_CHANGE,Notifications.READY])},AMP.registerPlugin("settingspanel","html",SettingsPanelPlugin),__extends(HLSWrapper,PluginWrapper),HLSWrapper.NAME="HLSWrapper",HLSWrapper.prototype.flashPlugins=[{id:"flashlsOSMF",src:"#{paths.resources}plugins/flashlsOSMF.swf",host:"osmf",type:"application/x-shockwave-flash"}],AMP.registerPlugin("hls","flash",HLSWrapper),__extends(HLSPlaybackProxy,PlaybackCoreProxy),HLSPlaybackProxy.prototype.playbackCoreName="hls",HLSPlaybackProxy.prototype.player=null,HLSPlaybackProxy.prototype.hlsConfig=null,HLSPlaybackProxy.prototype.fragErrorTime=0,HLSPlaybackProxy.prototype.timedMedatadata=null,HLSPlaybackProxy.prototype.currentMedatadata=null,HLSPlaybackProxy.prototype.id3Track=null,HLSPlaybackProxy.prototype.manifestParsed=!1,HLSPlaybackProxy.prototype.details=null,HLSPlaybackProxy.prototype.quality=-1,HLSPlaybackProxy.prototype.qualityMode="auto",HLSPlaybackProxy.prototype.canPlayMedium=function(t){return HLSPlaybackProxy.__super__.canPlayMedium.call(this,t)||"audio"===t},HLSPlaybackProxy.prototype.getUseMAE=function(){return HLSPlaybackProxy.__super__.getUseMAE.call(this)&&"undefined"!=typeof MediaAccelerationHlsJsWrapper&&null!==MediaAccelerationHlsJsWrapper},HLSPlaybackProxy.prototype.getConfig=function(){var t;return t=Utils.clone(this.config.data),!0===this.config.withCredentials&&(t.xhrSetup=function(t,e){t.withCredentials=!0}),t.debug=this.plugin.proxy.getDebug(),this.getUseMAE()||(t.enableSoftwareAES=null==t.enableSoftwareAES||t.enableSoftwareAES),t},HLSPlaybackProxy.prototype.load=function(){var t,e,i,o,n,a,r=this;for(e in null!=this.player&&this.destroy(),this.manifestParsed=!1,t=this.getConfig(),this.getUseMAE()?(this.facade.mae=new MediaAccelerationHlsJsWrapper(this.config.mae,t),i=this.facade.mae.getPlayer()):i=new Hls(t),i.attachMedia(this.getMediaElement()),n=Hls.Events)o=n[e],i.on(o,function(t,e){r.plugin.dispatcher.dispatchEvent(new Event(t,e))});i.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this)),i.on(Hls.Events.ERROR,this.onError.bind(this)),i.on(Hls.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata.bind(this)),i.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this)),i.on(Hls.Events.LEVEL_SWITCHING,this.onLevelSwitching.bind(this)),i.on(Hls.Events.FRAG_LOADING,this.onFragmentLoadStart.bind(this)),i.on(Hls.Events.FRAG_LOADED,this.onFragmentLoaded.bind(this));try{for(e in a=this.config.quality)o=a[e],i[e]=o}catch(t){}this.player=i,this.details=null,HLSPlaybackProxy.__super__.load.call(this)},HLSPlaybackProxy.prototype.applySrc=function(){this.currentMedatadata=null,this.player.loadSource(this.getSrc()),this.getMediaElement().load()},HLSPlaybackProxy.prototype.onManifestParsed=function(t,e){this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.MANIFEST_PARSED,{event:t,data:e})),this.manifestParsed=!0,this.sendNotification(Notifications.QUALITY_LEVELS_LOADED,e.levels),this.player.loadLevel=-1},HLSPlaybackProxy.prototype.onLevelLoaded=function(t,e){this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.LEVEL_LOADED,{event:t,data:e})),this.player.levels[e.level].level=e.level,this.sendNotification(Notifications.QUALITY_CHANGE,this.player.levels[e.level]),this.details=e.details,this.details.totalduration!==this.data.duration&&(this.data.duration=this.details.totalduration,this.sendNotification(Notifications.CHANGE_DURATION,this.data.duration)),!0===e.details.live&&"dvr"!==this.facade.mediaProxy.getTemporalType()&&this.facade.mediaProxy.setTemporalType("live")},HLSPlaybackProxy.prototype.onLevelSwitching=function(t,e){this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.LEVEL_SWITCHING,{event:t,data:e})),this.sendNotification(Notifications.QUALITY_CHANGING,this.player.levels[e.level])},HLSPlaybackProxy.prototype.onFragParsingMetadata=function(t,e){this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.FRAG_PARSING_METADATA,{event:t,data:e}))},HLSPlaybackProxy.prototype.onFragmentLoadStart=function(t,e){var i;this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.FRAG_LOADING,{event:t,data:e})),i=this.player.levels[e.frag.level].bitrate,this.sendNotification(Notifications.FRAGMENT_LOAD_START,i)},HLSPlaybackProxy.prototype.onFragmentLoaded=function(t,e){var i;this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event(Hls.Events.FRAG_LOADED,{event:t,data:e})),i=this.player.levels[e.frag.level].bitrate,this.sendNotification(Notifications.FRAGMENT_LOADED,i)},HLSPlaybackProxy.prototype.ontimeupdate=function(t){var e;!0!==(("function"==typeof(e=this.facade.ads||{}).getInProgress?e.getInProgress():void 0)||e.inProgress)&&(this.data.currentTime=this.getCurrentTime(),this.sendNotification(Notifications.TIME_UPDATE,this.data.currentTime))},HLSPlaybackProxy.prototype.ondurationchange=function(t){var e;(e=this.getDetails().totalduration)===this.data.duration||0===e||isNaN(e)||(this.data.duration=e,this.sendNotification(Notifications.CHANGE_DURATION,e))},HLSPlaybackProxy.prototype.oncanplaythrough=function(t){this.createTracks(),this.sendNotification(Notifications.CAN_PLAY_THROUGH),this.sendNotification(Notifications.PROGRESS,this.getDuration()),"manual"===this.qualityMode&&this.player.currentLevel!==this.quality&&this.setQuality(this.quality)},HLSPlaybackProxy.prototype.getCurrentTime=function(){return this.getMediaElement().currentTime-this.getStartTime()},HLSPlaybackProxy.prototype.getDetails=function(){return this.details||{}},HLSPlaybackProxy.prototype.getFragmentDuration=function(){return this.getDetails().targetduration},HLSPlaybackProxy.prototype.getUTCStart=function(){return 1e4*this.getDetails().startSN},HLSPlaybackProxy.prototype.getUTCTime=function(){return this.getUTCStart()+1e3*this.getCurrentTime()},HLSPlaybackProxy.prototype.getUTCEnd=function(){return 1e4*this.getDetails().endSN},HLSPlaybackProxy.prototype.getStartTime=function(){return this.getMediaElement().duration-this.getDuration()},HLSPlaybackProxy.prototype.goLive=function(){this.setCurrentTime(this.getLiveTime())},HLSPlaybackProxy.prototype.getLiveTime=function(){return this.getDuration()-this.getFragmentDuration()},HLSPlaybackProxy.prototype.isLive=function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()},HLSPlaybackProxy.prototype.seek=function(t){var e=this;return HLSPlaybackProxy.__super__.seek.call(this,t+this.getStartTime()).then(function(t){"dvr"===e.mediaProxy.getTemporalType()&&e.sendNotification(Notifications.IS_LIVE,e.isLive())})},HLSPlaybackProxy.prototype.onplaying=function(t){HLSPlaybackProxy.__super__.onplaying.call(this),this.retried=!1},HLSPlaybackProxy.prototype.onError=function(t,e){if(this.plugin.sendNotification(Notifications.DISPATCH_EVENT,new Event("error",{event:t,data:e})),!0!==this.config.ignoreErrors){if(!1===this.config.retryOnError||!0===this.retried)return this.retried=!1,void this.error(e);if(e.fatal&&e.type===Hls.ErrorTypes.MEDIA_ERROR&&e.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(e.fatal=!1),e.fatal)switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0,this.manifestParsed?this.player.startLoad():this.player.loadSource(this.getSrc()),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",t);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=!0,this.player.recoverMediaError(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",t);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",t),this.error(e)}else e.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)}},HLSPlaybackProxy.prototype.error=function(t){switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:t.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:t.code=MediaError.MEDIA_ERR_DECODE;break;default:t.toString=function(){return t.details}}this.sendNotification(Notifications.ERROR,t)},HLSPlaybackProxy.prototype.createTracks=function(){var t,e,i,o,n,a,r,s,l,c;for(t=this.player.audioTracks,o=this.player.audioTrack,s=this.facade.tracks.getAudioTracks(),i=t.length,e=function(t,e){this.facade.tracks.getAudioTracks().forEach(function(t){return t.data.enabled=!1}),!0===e&&(this.facade.tracks.getAudioTracks()[t.id].data.enabled=!0,this.player.audioTrack=t.id)},n=l=0,c=t.length;l<c;n=++l)a=t[n],!1!==Utils.fieldIsUnique(s,"id",a.id)&&((r=new Track({kind:a.type,label:a.name||a.id,language:a.lang,id:a.id,enabled:a.id===o,data:a})).changeEnabled=e.bind(this,a),s.add(r,n+1===i))},HLSPlaybackProxy.prototype.setQuality=function(t){var e,i;return e=this.qualityMode,e=t>-1?"manual":"auto",this.setQualityMode(e),null!=(i=this.player)&&(i.currentLevel=this.quality=t),this.quality},HLSPlaybackProxy.prototype.getQuality=function(){var t,e,i;return-1===(t=null!=(e=this.player)?e.currentLevel:void 0)&&(t=null!=(i=this.player)?i.nextLoadLevel:void 0),t},HLSPlaybackProxy.prototype.getQualityLevels=function(){var t;return(null!=(t=this.player)?t.levels:void 0)||HLSPlaybackProxy.__super__.getQualityLevels.call(this)},HLSPlaybackProxy.prototype.getQualityMode=function(){return this.qualityMode},HLSPlaybackProxy.prototype.setQualityMode=function(t){return"auto"!==t&&"manual"!==t?t+=" is not a valid key":this.qualityMode=t,t},HLSPlaybackProxy.prototype.destroy=function(){null!=this.player&&(HLSPlaybackProxy.__super__.destroy.call(this),this.player.destroy(),this.player=null)},__extends(HLSAdBreakStartCommand,PluginCommand),HLSAdBreakStartCommand.prototype.execute=function(t){var e,i;"freewheel"===(null!=(i=t.getBody())?i.partner:void 0)&&(e=this.facade.player.getPlaybackRate(),this.proxy.destroy(),this.facade.player.setPlaybackRate(e))},__extends(PlaybackPluginProxy,PluginProxy),PlaybackPluginProxy.NAME=ModuleProxy.NAME,PlaybackPluginProxy.prototype.playbackProxy=null,PlaybackPluginProxy.prototype.createPlaybackProxy=function(){},PlaybackPluginProxy.prototype.initialize=function(){this.playbackProxy=this.createPlaybackProxy(),null!=this.playbackProxy&&(this.sendNotification(Notifications.INITIALIZED),this.facade.player.retrieveProxy(PlayerProxy.NAME).registerPlaybackCore(this.playbackProxy))},PlaybackPluginProxy.prototype.destroy=function(){var t;null!=(t=this.playbackProxy)&&t.destroy()},__extends(HLSProxy,PlaybackPluginProxy),HLSProxy.NAME=ModuleProxy.NAME,HLSProxy.prototype.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableCEA708Captions:!0},mae:null,buffer:null,quality:null,withCredentials:null,retryOnError:!0,ignoreErrors:!1},HLSProxy.prototype.createPlaybackProxy=function(){if(null!=(window.MediaSource||window.WebKitMediaSource)&&Hls.isSupported())return new HLSPlaybackProxy(this.getConfigurationData(),this.facade)},ChartbeatAnalyticsStrategy.prototype.ContentType={AD:"ad",CONTENT:"ct"},ChartbeatAnalyticsStrategy.prototype.AdPosition={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},ChartbeatAnalyticsStrategy.prototype.VideoState={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"},ChartbeatAnalyticsStrategy.prototype.media=null,ChartbeatAnalyticsStrategy.prototype.facade=null,ChartbeatAnalyticsStrategy.prototype.cur_position=0,ChartbeatAnalyticsStrategy.prototype.queryInterval=2,ChartbeatAnalyticsStrategy.prototype.timer=null,ChartbeatAnalyticsStrategy.prototype.isPlayerReady=!1,ChartbeatAnalyticsStrategy.prototype._player=null,ChartbeatAnalyticsStrategy.prototype.contentType=null,ChartbeatAnalyticsStrategy.prototype.adType="",ChartbeatAnalyticsStrategy.prototype.playbackState=ChartbeatAnalyticsStrategy.prototype.VideoState.UNPLAYED,ChartbeatAnalyticsStrategy.prototype.videoStartTime=null,ChartbeatAnalyticsStrategy.prototype.isReady=function(){return this.isPlayerReady},ChartbeatAnalyticsStrategy.prototype.getTitle=function(){var t;return null!=(t=this.media)?t.title:void 0},ChartbeatAnalyticsStrategy.prototype.getVideoPath=function(){var t;return null!=(t=this.media)?t.guid:void 0},ChartbeatAnalyticsStrategy.prototype.getContentType=function(){return this.contentType},ChartbeatAnalyticsStrategy.prototype.getAdPosition=function(){return this.adType},ChartbeatAnalyticsStrategy.prototype.getTotalDuration=function(){var t;return 1e3*(null!=(t=this.media)?t.duration:void 0)},ChartbeatAnalyticsStrategy.prototype.getState=function(){return this.playbackState},ChartbeatAnalyticsStrategy.prototype.getCurrentPlayTime=function(){return null,this.media.isLive?this.cur_position=Math.floor(Date.now()/1e3):(this.cur_position=this.facade.player.getCurrentTime().toFixed(1),Math.abs(this.timer-this.cur_position)>this.queryInterval&&(this.timer=this.cur_position)),this.cur_position},ChartbeatAnalyticsStrategy.prototype.getBitrate=function(){var t;t=NaN;try{t=this.facade.player.getQuality()}catch(t){}return t},ChartbeatAnalyticsStrategy.prototype.getThumbnailPath=function(){return this.facade.player.getMedia().poster},ChartbeatAnalyticsStrategy.prototype.getViewStartTime=function(){return null!=this.videoStartTime?Math.round((new Date).getTime()-this.videoStartTime):0},ChartbeatAnalyticsStrategy.verify=function(t){return!0},ChartbeatAnalyticsStrategy.prototype.onVideoStart=function(){this.videoStartTime=(new Date).getTime()},ChartbeatAnalyticsStrategy.prototype.onVideoEnd=function(){this.videoStartTime=null},__extends(LinkedMenuPlugin,Plugin),LinkedMenuPlugin.prototype.moduleName="linkedmenu",AMP.registerPlugin("linkedmenu","html",LinkedMenuPlugin),__extends(ChartbeatAnalyticsStartCommand,puremvc.SimpleCommand),ChartbeatAnalyticsStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).start()},__extends(ChartbeatAnalyticsAdStartCommand,puremvc.SimpleCommand),ChartbeatAnalyticsAdStartCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).adStart(t.body)},__extends(ChartbeatAnalyticsAdEndCommand,puremvc.SimpleCommand),ChartbeatAnalyticsAdEndCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).adEnd(t.body)},__extends(ChartbeatAnalyticsEndCommand,puremvc.SimpleCommand),ChartbeatAnalyticsEndCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).end()},__extends(ChartbeatAnalyticsMediaChangeCommand,puremvc.SimpleCommand),ChartbeatAnalyticsMediaChangeCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).contentChanged(t.body)},__extends(ChartbeatAnalyticsPausedCommand,puremvc.SimpleCommand),ChartbeatAnalyticsPausedCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).paused()},__extends(ChartbeatAnalyticsCanPlayCommand,puremvc.SimpleCommand),ChartbeatAnalyticsCanPlayCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).canPlay(t.body)},__extends(ChartbeatAnalyticsPlayingCommand,puremvc.SimpleCommand),ChartbeatAnalyticsPlayingCommand.prototype.execute=function(t){this.facade.retrieveProxy(ChartbeatAnalyticsProxy.NAME).playing()},__extends(ChartbeatAnalyticsWrapper,PluginWrapper),ChartbeatAnalyticsWrapper.NAME="ChartbeatAnalyticsWrapper",__extends(ChartbeatAnalyticsProxy,PluginProxy),ChartbeatAnalyticsProxy.NAME=ModuleProxy.NAME,ChartbeatAnalyticsProxy.prototype.defaults={data:null,events:null,plugin:{js:"//static.chartbeat.com/js/chartbeat_video.js"}},ChartbeatAnalyticsProxy.prototype.media=null,ChartbeatAnalyticsProxy.prototype.initialize=function(){var t;try{t=this.facade.player.getMediaElement(),ChartbeatAnalyticsStrategy.prototype._player=t,ChartbeatAnalyticsStrategy.prototype.facade=this.facade,window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(ChartbeatAnalyticsStrategy),(window._cbv||(window._cbv=[])).push(t),this.setConfigMetadata()}catch(t){}ChartbeatAnalyticsProxy.__super__.initialize.call(this)},ChartbeatAnalyticsProxy.prototype.setConfigMetadata=function(){var t,e,i,o,n;if(n=window._sf_async_config={},null!=(t=null!=(o=this.value)?o.data:void 0))for(e in t)"null"!==(i=t[e])&&(n[e]=i);this.loadScript()},ChartbeatAnalyticsProxy.prototype.loadScript=function(){if(this.loaded){window._sf_endpt=(new Date).getTime();var t=document.createElement("script");t.setAttribute("language","javascript"),t.setAttribute("type","text/javascript"),t.setAttribute("src","//static.chartbeat.com/js/chartbeat_video.js"),document.body.appendChild(t),this.loaded=!1}this.loaded=!0},ChartbeatAnalyticsProxy.prototype.contentChanged=function(){this.media=this.facade.player.getMedia(),this.setConfigMetadata(),ChartbeatAnalyticsStrategy.prototype.media=this.media,ChartbeatAnalyticsStrategy.prototype.playbackState=ChartbeatAnalyticsStrategy.prototype.VideoState.UNPLAYED,ChartbeatAnalyticsStrategy.prototype.isPlayerReady=!0},ChartbeatAnalyticsProxy.prototype.adStart=function(t){ChartbeatAnalyticsStrategy.prototype.contentType=ChartbeatAnalyticsStrategy.prototype.ContentType.AD,"preroll"===(null!=t?t.type:void 0)&&(ChartbeatAnalyticsStrategy.prototype.adType=ChartbeatAnalyticsStrategy.prototype.AdPosition.PREROLL),"midroll"===(null!=t?t.type:void 0)&&(ChartbeatAnalyticsStrategy.prototype.adType=ChartbeatAnalyticsStrategy.prototype.AdPosition.MIDROLL),"postroll"===(null!=t?t.type:void 0)&&(ChartbeatAnalyticsStrategy.prototype.adType=ChartbeatAnalyticsStrategy.prototype.AdPosition.POSTROLL)},ChartbeatAnalyticsProxy.prototype.adEnd=function(t){"postroll"===(null!=t?t.type:void 0)&&(ChartbeatAnalyticsStrategy.prototype.contentType=ChartbeatAnalyticsStrategy.prototype.ContentType.CONTENT)},ChartbeatAnalyticsProxy.prototype.start=function(t){ChartbeatAnalyticsStrategy.prototype.contentType=ChartbeatAnalyticsStrategy.prototype.ContentType.CONTENT,ChartbeatAnalyticsStrategy.prototype.onVideoStart()},ChartbeatAnalyticsProxy.prototype.playing=function(t){ChartbeatAnalyticsStrategy.prototype.contentType=ChartbeatAnalyticsStrategy.prototype.ContentType.CONTENT,ChartbeatAnalyticsStrategy.prototype.playbackState=ChartbeatAnalyticsStrategy.prototype.VideoState.PLAYED},ChartbeatAnalyticsProxy.prototype.end=function(t){ChartbeatAnalyticsStrategy.prototype.playbackState=ChartbeatAnalyticsStrategy.prototype.VideoState.COMPLETED,ChartbeatAnalyticsStrategy.prototype.onVideoEnd()},ChartbeatAnalyticsProxy.prototype.paused=function(t){ChartbeatAnalyticsStrategy.prototype.playbackState=ChartbeatAnalyticsStrategy.prototype.VideoState.STOPPED},ChartbeatAnalyticsProxy.prototype.canPlay=function(t){ChartbeatAnalyticsStrategy.prototype.playbackReady=!0},__extends(HLSPlugin,Plugin),HLSPlugin.prototype.moduleName="hls",HLSPlugin.prototype.createModel=function(){this.proxy=new HLSProxy(this.config),this.registerProxy(this.proxy)},HLSPlugin.prototype.createController=function(){this.registerCommand(AdNotifications.BREAK_START,HLSAdBreakStartCommand),HLSPlugin.__super__.createController.call(this)},HLSPlugin.prototype.logEvent=function(t){!0!==/(hlsFragLoading|hlsFragLoaded)/.test(t.type)&&HLSPlugin.__super__.logEvent.call(this,t)},HLSPlugin.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy},HLSPlugin.prototype.getInstance=function(){return this.getPlaybackProxy().player},HLSPlugin.prototype.listNotificationInterests=function(){return HLSPlugin.__super__.listNotificationInterests.call(this).concat([AdNotifications.BREAK_START])},HLSPlugin.prototype.listNotificationPublications=function(){return HLSPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.TIMED_METADATA,Notifications.QUALITY_LEVELS_LOADED,Notifications.QUALITY_CHANGE,Notifications.QUALITY_CHANGING,Notifications.FRAGMENT_LOAD_START,Notifications.FRAGMENT_LOADED])},AMP.registerPlugin("hls","html",HLSPlugin),__extends(ChartbeatAnalyticsPlugin,Plugin),ChartbeatAnalyticsPlugin.prototype.moduleName="chartbeatanalytics",ChartbeatAnalyticsPlugin.prototype.pluginResources=null,ChartbeatAnalyticsPlugin.prototype.createModel=function(){this.registerProxy(new ChartbeatAnalyticsProxy(this.config))},ChartbeatAnalyticsPlugin.prototype.loadModuleResources=function(){var t;return this.pluginResources=null!=(t=this.config)?t.resources:void 0,this.config.resources=null,ChartbeatAnalyticsPlugin.__super__.loadModuleResources.call(this)},ChartbeatAnalyticsPlugin.prototype.createController=function(){ChartbeatAnalyticsPlugin.__super__.createController.call(this),this.registerCommand(AdNotifications.BREAK_END,ChartbeatAnalyticsAdEndCommand),this.registerCommand(AdNotifications.AD_STARTED,ChartbeatAnalyticsAdStartCommand),this.registerCommand(Notifications.ENDED,ChartbeatAnalyticsEndCommand),this.registerCommand(Notifications.MEDIA_CHANGE,ChartbeatAnalyticsMediaChangeCommand),this.registerCommand(Notifications.CAN_PLAY_THROUGH,ChartbeatAnalyticsCanPlayCommand),this.registerCommand(Notifications.STARTED,ChartbeatAnalyticsStartCommand),this.registerCommand(Notifications.PLAYING,ChartbeatAnalyticsPlayingCommand),this.registerCommand(Notifications.PAUSED,ChartbeatAnalyticsPausedCommand)},ChartbeatAnalyticsPlugin.prototype.listNotificationInterests=function(){return[AdNotifications.AD_STARTED,AdNotifications.BREAK_END,Notifications.STARTED,Notifications.ENDED,Notifications.MEDIA_CHANGE,Notifications.PLAYING,Notifications.PAUSED,Notifications.CAN_PLAY_THROUGH]},AMP.registerPlugin("chartbeatanalytics","html",ChartbeatAnalyticsPlugin),AMP.registerPlugin("chartbeatanalytics","flash",ChartbeatAnalyticsWrapper);var PromisePlugin=function(t){function e(t,i){babelHelpers.classCallCheck(this,e);var o=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o.player=t,o.config=i||{},o.logger=new Logger(o.debug);var n=Events.values,a=void 0;return n.forEach(function(t){null!=(a=o["on"+t])&&"function"==typeof a&&(a=o["on"+t]=a.bind(o),o.player.addEventListener(t,a))}),o}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"bindHandlers",value:function(t){var e=this;t instanceof Array==0&&(t=[t]),t.forEach(function(t){e[t]=e[t].bind(e)})}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}},{key:"data",get:function(){return this.player.evaluateBindings(this.config)}}],[{key:"createFactory",value:function(t){return function(t,e){var i=this;return new Promise(function(o,n){try{o(new i(t,e))}catch(t){n(t)}})}.bind(t)}}]),e}(EventDispatcher),AdPromisePlugin=function(t){function e(t,i){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"dispatchEvent",value:function(t){this.player.sendNotification("ads"+t.type,t.detail),babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispatchEvent",this).call(this,t)}}]),e}(PromisePlugin),FlashPromisePlugin=function(t){function e(t,i){babelHelpers.classCallCheck(this,e);var o=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return o.player.createDefaults.call(o),o.player.addEventListener("createflashvars",o.createFlashVars.bind(o)),o.player.addEventListener("createxml",o.createXML.bind(o)),o}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"createFlashVars",value:function(t){}},{key:"createXML",value:function(t){}},{key:"createProperty",value:function(t,e,i,o){var n=t.createElement("property");if(n.setAttribute("key",e),null!=o&&o.appendChild(n),null!=i)if("object"!==(void 0===i?"undefined":babelHelpers.typeof(i))||i instanceof Array){var a=akamai.amp.XMLUtils.createTextContent(t,i.toString());n.appendChild(a)}else for(var r in i){var s=i[r];this.createProperty(t,r,s,n)}return n}},{key:"flashPlugins",get:function(){return[]}}]),e}(PromisePlugin);global.akamai={amp:{AMP:AMP,utils:{Timer:Timer,Utils:Utils,QueryString:QueryString,Logger:Logger.instance,MRSSHelper:MRSSHelper},Timer:Timer,Utils:Utils,Poller:Poller,Cookies:Cookies,PlayState:PlayState,DisplayState:DisplayState,QueryString:QueryString,Logger:Logger,Config:Config,XMLUtils:XMLUtils,IdleUtil:IdleUtil,chromecast:{ChromeCastShim:void 0!==ChromeCastShim?ChromeCastShim.getInstance():null},XHR:XHR,Resource:Resource,Media:MediaVO,Authorization:Authorization,Event:Event,Events:Events,EventDispatcher:EventDispatcher,Plugin:PromisePlugin,FlashPlugin:FlashPromisePlugin,AdPlugin:AdPromisePlugin,DataBinding:DataBinding,Logger:Logger}},void 0!==AdVO&&(global.akamai.amp.AdVO=AdVO),void 0!==AdNotifications&&(global.akamai.amp.AdEvents=function(){var t,e,i={values:[]};for(t in AdNotifications)e=AdNotifications[t].replace(/^ads/,""),i[t.replace(/^AD_/,"")]=e,i.values.push(e);return i}()),window.AKAMAI_MEDIA_PLAYER.saveSDK(version,global)}window.AKAMAI_MEDIA_PLAYER.setVersion(version)}();